console.log("Deliverability > Running");var currentUrl=window.location.href,userId="marketolive@marketo.com",DELIVERABILITY=DELIVERABILITY||{};DELIVERABILITY.webRequest=function(url,params,method,async,responseType,callback){console.log("Web Request > "+url+"\n"+params);var xmlHttp=new XMLHttpRequest(),result;xmlHttp.onreadystatechange=function(){if(callback&&xmlHttp.readyState==4&&xmlHttp.status==200)
result=callback(xmlHttp.response);}
if(async&&xmlHttp.responseType){xmlHttp.responseType=responseType;}
xmlHttp.open(method,url,async);xmlHttp.setRequestHeader("Content-type","application/json; charset=utf-8");xmlHttp.send(params);return result;};DELIVERABILITY.login=function(){console.log("Deliverability > Login: App");$("#email")[0].value="marketolive@marketo.com";$("#password")[0].value="!Marketo17";$("button")[0].click();};DELIVERABILITY.removeGenericButton=function(buttons,property,target){if(buttons.length==0){console.log("Deliverability > Error: removeGenericButton() received an empty selector.");return;}
for(var ii=0;ii<buttons.length;++ii){if(property&&target){if($(buttons[ii]).attr(property)==null){continue;}else if($(buttons[ii]).attr(property).search(target)!=-1){$(buttons[ii]).remove();}}else{$(buttons[ii]).remove();}}};DELIVERABILITY.removeDeleteButtons=function(){console.log("Deliverability > Removing: Delete Buttons");$("#btndelete").remove();DELIVERABILITY.removeGenericButton($(".action_copy"));DELIVERABILITY.removeGenericButton($(".action_delete"));DELIVERABILITY.removeGenericButton($(".btn.copy"));DELIVERABILITY.removeGenericButton($(".btn.delete"));DELIVERABILITY.removeGenericButton($(".btn.btn-success"),"value",/(save|update|create|upload|import)/i);DELIVERABILITY.removeGenericButton($("button"),"value",/delete/i);DELIVERABILITY.removeGenericButton($(".btn"),"onclick","^return confirm\\(");};DELIVERABILITY.removeSubmitButtons=function(){console.log("Deliverability > Removing: Submit Buttons");$("#add_widget").remove();$("#new_dashboard").remove();$("#change_dashboard").remove();$("#create-campaign-anchor").remove();$("#saveFilters").remove();$("#tour-design-add-anchor").remove();$("#create_alert").remove();};if(currentUrl.search("^https:\/\/250ok\.com\/login")!=-1){DELIVERABILITY.login();}else if($("#email").length==1){if($("#email")[0].value==userId){DELIVERABILITY.removeDeleteButtons();DELIVERABILITY.removeSubmitButtons();}}else{DELIVERABILITY.webRequest('/app/account',null,'GET',true,'document',function(response){var el=document.createElement("html"),email;el.innerHTML=response;email=el.querySelector("#email").value;if(email==userId){DELIVERABILITY.removeDeleteButtons();DELIVERABILITY.removeSubmitButtons();}});}