<<<<<<< Updated upstream
console.log("Marketo App > Running");window.mkto_live_plugin_state=true;var currentUrl=window.location.href,currentProtocol=window.location.protocol,currentHost=window.location.host,mktoAppDomain="^https:\/\/app-[a-z0-9]+\.marketo\.com",mktoAppMatch="https://app-*.marketo.com",mktoLoginDomain="^https:\/\/login\.marketo\.com",mktoAppLoginDomain="^https:\/\/app\.marketo\.com",mktoDesignerDomain="^https:\/\/[a-z0-9]+-[a-z0-9]+\.marketodesigner\.com",mktoDesignerMatch="https://*.marketodesigner.com/*",rtpDemoDomain="^http:\/\/sjrtp1.marketo.com\/demo\/$|^http:\/\/cloud4.insightera.com\/demo\/$",emailDeliverabilityDomain="^https:\/\/250ok.com/",mktoWizard=mktoAppDomain+"/m#",mktoEmailDesigner=mktoDesignerDomain+"/ds",mktoLandingPageDesigner=mktoDesignerDomain+"/lpeditor/",defaultTurnerLogoGreen="http://marketolive.com/m3/assets/img/turner-tech-green.png",defaultTurnerLogoWhite="http://marketolive.com/m3/assets/img/turner-tech-white.png",defaultColor="rgb(42, 83, 112)",mktoAccountString106="mktodemoaccount106",mktoAccountString106a="mktodemoaccount106a",mktoAccountString106b="mktodemoaccount106b",mktoAccountString106d="mktodemoaccount106d",mktoAccountStringsMatch="^"+mktoAccountString106+"$|^"+mktoAccountString106a+"$|^"+mktoAccountString106b+"$|^"+mktoAccountString106d+"$",mktoAccountStrings106and106dMatch="^"+mktoAccountString106+"$|^"+mktoAccountString106d+"$",mktoEmailInsightsLink="http://www.marketolive.com/en/analytics/email-insights-summit-demo-1",mktoEmailDeliverabilityToolsLink="https://250ok.com/login",mktoMyMarketoFragment="MM0A1",mktoMarketingActivitiesDefaultFragment="MA15A1",mktoMarketingActivitiesMarketingFragment="MA19802A1",mktoMarketingActivitiesJapaneseFragment="MA19848A1",mktoMarketingActivitiesFinservFragment="MA20806A1",mktoMarketingActivitiesHealthcareFragment="MA20826A1",mktoMarketingActivitiesHigherEdFragment="MA20846A1",mktoLeadDatabaseDefaultFragment="ML0A1ZN2",mktoLeadDatabaseMarketingFragment="ML0A1ZN19788",mktoLeadDatabaseJapaneseFragment="ML0A1ZN19834",mktoLeadDatabaseFinservFragment="ML0A1ZN20792",mktoLeadDatabaseHealthcareFragment="ML0A1ZN20812",mktoLeadDatabaseHigherEdFragment="ML0A1ZN20832",mktoAnalyticsDefaultFragment="AH0A1ZN17",mktoOppInfluenceAnalyzerFragment="AR1559A1!",mktoProgramAnalyzerFragment="AR1544A1!",mktoModeler106Fragment="RCM70A1!",mktoModeler106abFragment="RCM5A1!",mktoSuccessPathAnalyzerFragment="AR1682A1!",mktoAdBridgeSmartListFragment="SL1119566B2LA1",mktoEmailDesignerFragment="EME",mktoEmailPreviewFragment="EMP",mktoLandingPageDesignerFragment="LPE",mktoLandingPagePreviewFragment="LPP",mktoFormWizardFragment="FOE",mktoMobilePushNotificationWizardFragment="MPNE",mktoSocialAppWizardFragment="SOAE",mktoABtestWizardFragment="EBE",mktoEmailTestWizardFragment="CCE",mktoCalendarFragment="CAL",mktoAnalyticsFragment="AR",mktoDefaultWorkspaceId=1,mktoMarketingWorkspaceId=172,mktoJapaneseWorkspaceId=173,mktoFinservWorkspaceId=174,mktoHealthcareWorkspaceId=175,mktoHigherEdWorkspaceId=176,userWorkspaceName="My Workspace",isMktoLiveInstance=false,userName,pod,APP=APP||{};APP.getCookie=function(cookieName){console.log("Marketo App > Getting: Cookie "+cookieName);var name=cookieName+'=',cookies=document.cookie.split(';'),currCookie;for(var ii=0;ii<cookies.length;ii++){currCookie=cookies[ii].trim();if(currCookie.indexOf(name)==0){return currCookie.substring(name.length,currCookie.length);}}
console.log("Marketo App > Getting: Cookie "+cookieName+" not found");return null;}
APP.disableDemoPluginCheck=function(){console.log("Marketo App > Disabling: Demo Plugin Check");if(window&&window.mkto_live_plugin_state){window.mkto_live_plugin_state=true;}
if(MktPage&&MktPage.validateDemoPlugin){MktPage.validateDemoPlugin=function(){};}
isMktoLiveInstance=true;}
APP.disablePropertyPanelSaving=function(){console.log("Marketo App > Disabling: Saving of Landing Page Property Panel & Sync Error Message");if(Mkt3&&Mkt3.controller&&Mkt3.controller.editor&&Mkt3.controller.editor.LandingPagePropertyPanel&&Mkt3.controller.editor.LandingPagePropertyPanel.prototype&&Mkt3.controller.editor.LandingPagePropertyPanel.prototype.fireSyncProperties){Mkt3.controller.editor.LandingPagePropertyPanel.prototype.fireSyncProperties=function(){console.log("Marketo App > Executing: Disable Saving of Landing Page Property Panel & Sync Error Message");};}}
APP.disableConfirmationMessage=function(){console.log("Marketo App > Disabling: Smart Campaign Delete Confirmation Message");if(Mkt&&Mkt.widgets&&Mkt.widgets.DataPanel&&Mkt.widgets.DataPanel.prototype&&Mkt.widgets.DataPanel.prototype.clickClose){Mkt.widgets.DataPanel.prototype.clickClose=function(){console.log("Marketo App > Executing: Disable Smart Campaign Delete Confirmation Message");var hasChanges=this.hasSettings(),showTriggerWarning=false;if(this.isSmartlist&&this.dpMeta.trigger){var triggerCount=this.dpMgr.getTriggers().length;if(triggerCount==1){showTriggerWarning=true;}}
if(hasChanges||showTriggerWarning){var title=MktLang.getStr('DataFormPanel.Delete_arg0',[this.dpTypeName(true)]),name=this.dpMeta.displayName||this.dpMeta.name,msg=MktLang.getStr('DataFormPanel.Are_you_sure_you_want_to_delete_arg0_arg1',[this.dpTypeName(),MktLang.getDBStr(name)]);if(showTriggerWarning){msg+=MktLang.getStr("DataFormPanel.Triggered_campaigns_must_contain_trigger_remain_active");}
if(this.dpMgr.isSmartlist&&!this.dpMeta.trigger&&this.dpMgr.smartListRuleLogic.customMode()){msg+=MktLang.getStr('DataFormPanel.Reminder')+
MktLang.getStr('DataFormPanel.Check_your_advanced_filter_rules_after_any_insert_delete_reorder');}
if(MktCanvas&&MktCanvas.getActiveTab()&&MktCanvas.getActiveTab().config&&MktCanvas.getActiveTab().config.accessZoneId){console.log("Marketo App > Closing: Smart Campaign Delete Confirmation Message");this._doClose();}
else{Ext4.Msg.confirmDelete({title:title,msg:msg,minHeight:300,fn:function(buttonId){if(buttonId==='ok'){this._doClose();}},scope:this});}}
else{this._doClose();}}}}
APP.overrideHomeTiles=function(){console.log("Marketo App > Overriding: My Marketo Home Tiles");if(MktCanvas&&MktCanvas.getEl()&&MktCanvas.getEl().dom&&MktCanvas.getEl().dom.nextSibling&&MktCanvas.getEl().dom.nextSibling.childNodes&&MktCanvas.getEl().dom.nextSibling.childNodes[0]&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0]&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0]&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0]&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0]&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0]&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes){console.log("Marketo App > Executing: Override My Marketo Home Tiles");var container=MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0],containerComponent=MktCanvas.lookupComponent(container),tilesTextContent=containerComponent.el.dom.textContent.replace(/([a-z])([A-Z])/g,"$1,$2").replace(/([A-Z])([A-Z][a-z])/g,"$1,$2").split(','),hrefMatch=new RegExp(" href=\"[^\"]*\" ","g"),idMatch,spareTileClone,emailInsightsTile,emailInsightsTileOuterHTML,deliverabilityToolsTile,deliverabilityToolsTileOuterHTML,ii;for(ii=0;ii<tilesTextContent.length;ii++){if(tilesTextContent[ii]=="Email Insights"){emailInsightsTile=MktCanvas.lookupComponent(container.childNodes[ii]);}
else if(tilesTextContent[ii]=="Deliverability Tools"){deliverabilityToolsTile=MktCanvas.lookupComponent(container.childNodes[ii]);}}
if(emailInsightsTile){emailInsightsTile.el.dom.outerHTML=emailInsightsTile.el.dom.outerHTML.replace(hrefMatch," href=\""+mktoEmailInsightsLink+"\" ");}
else{emailInsightsTileOuterHTML='<div class="x4-btn mkt3-homeTile x4-btn-default-small x4-icon-text-left x4-btn-icon-text-left x4-btn-default-small-icon-text-left x-panel" style="height: 150px;" id="homeTile-1084"><em id="homeTile-1084-btnWrap"><a id="homeTile-1084-btnEl" href="'+mktoEmailInsightsLink+'" class="x4-btn-center" target="_blank" role="link" style="width: 150px; height: 150px;"><span id="homeTile-1084-btnInnerEl" class="x4-btn-inner" style="width: 150px; height: 150px; line-height: 150px;">Email Insights</span><span id="homeTile-1084-btnIconEl" class="x4-btn-icon mki3-email-insights-svg"></span></a></em><div class="x-panel-bwrap" id="ext-gen164"><div class="x-panel-body x-panel-body-noheader" id="ext-gen165"></div></div></div>';idMatch=new RegExp("homeTile-1084","g");spareTileClone=MktCanvas.lookupComponent(container.childNodes[container.childNodes.length-1]).cloneConfig();emailInsightsTileOuterHTML=emailInsightsTileOuterHTML.replace(idMatch,spareTileClone.id);spareTileClone.el.dom.outerHTML=emailInsightsTileOuterHTML;container.appendChild(container.childNodes[container.childNodes.length-2]);container.appendChild(spareTileClone.el.dom);}
if(deliverabilityToolsTile){deliverabilityToolsTile.el.dom.outerHTML=deliverabilityToolsTile.el.dom.outerHTML.replace(hrefMatch," href=\""+mktoEmailDeliverabilityToolsLink+"\" ");}
else{deliverabilityToolsTileOuterHTML='<div class="x4-btn mkt3-homeTile x4-btn-default-small x4-icon-text-left x4-btn-icon-text-left x4-btn-default-small-icon-text-left" style="height: 150px;" id="homeTile-1036"><em id="homeTile-1036-btnWrap"><a id="homeTile-1036-btnEl" href="'+mktoEmailDeliverabilityToolsLink+'" class="x4-btn-center" target="_blank" role="link" style="width: 150px; height: 150px;"><span id="homeTile-1036-btnInnerEl" class="x4-btn-inner" style="width: 150px; height: 150px; line-height: 150px;">Deliverability Tools</span><span id="homeTile-1036-btnIconEl" class="x4-btn-icon mki3-mail-sealed-svg"></span></a></em></div>';idMatch=new RegExp("homeTile-1036","g");spareTileClone=MktCanvas.lookupComponent(container.childNodes[container.childNodes.length-1]).cloneConfig();deliverabilityToolsTileOuterHTML=deliverabilityToolsTileOuterHTML.replace(idMatch,spareTileClone.id);spareTileClone.el.dom.outerHTML=deliverabilityToolsTileOuterHTML;container.appendChild(container.childNodes[container.childNodes.length-2]);container.appendChild(spareTileClone.el.dom);}}}
APP.overrideSuperballMenuItems=function(){console.log("Marketo App > Overriding: Superball Menu Items");if(MktPage&&MktPage.showSuperMenu){MktPage.showSuperMenu=function(){console.log("Marketo App > Executing: Override Superball Menu Items");var logoEl=Ext.get(Ext.DomQuery.selectNode('.mkt-app-logo')),menu=logoEl.menu,menuTop=55;if(!menu){menu=logoEl.menu=Ext4.widget('appNavigationMenu',{listeners:{boxready:function(view){var logoRegion=logoEl.getRegion();if(logoRegion.bottom>menuTop){view.setBodyStyle('padding-top',logoRegion.bottom-menuTop+10+'px');view.updateLayout();}
menu.setZIndex(logoEl.getStyle('zIndex')-5);},beforerender:function(view){view.addCls(view.componentCls+'-hidden');},show:function(view){view.removeCls(view.componentCls+'-hidden');logoEl.ignoreNextClick=true;logoEl.removeClass(logoEl.attentionCls);if(!MktPage.savedState.isUsedSuperMenu){MktPage.savedState.isUsedSuperMenu=true;MktSession.ajaxRequest('user/saveUserPref',{serializeParms:{key:'isUsedSuperMenu',data:MktPage.savedState.isUsedSuperMenu}});}},beforehide:function(view){view.addCls(view.componentCls+'-hidden');},hide:function(){(function(){logoEl.ignoreNextClick=false;}).defer(250);}}});if(menu&&menu.items&&menu.items.items){console.log("Marketo App > Working: Override Superball Menu Items");var ii,currSuperBallMenuItem,emailInsightsMenuItem,deliverabilityToolsMenuItem,clonedMenuItem;for(ii=0;ii<menu.items.items.length;ii++){currSuperBallMenuItem=menu.items.items[ii];if(currSuperBallMenuItem.text=="Email Insights"){emailInsightsMenuItem=currSuperBallMenuItem;}
else if(currSuperBallMenuItem.text=="Deliverability Tools"){deliverabilityToolsMenuItem=currSuperBallMenuItem;}}
if(emailInsightsMenuItem){emailInsightsMenuItem.href=mktoEmailInsightsLink;emailInsightsMenuItem.update();}
else{clonedMenuItem=menu.items.items[0].cloneConfig();clonedMenuItem.setText("Email Insights");clonedMenuItem.setIconCls("mki3-email-insights-svg");clonedMenuItem.href=mktoEmailInsightsLink;clonedMenuItem.hrefTarget="_blank";clonedMenuItem.update();menu.add(clonedMenuItem);}
if(deliverabilityToolsMenuItem){deliverabilityToolsMenuItem.href=mktoEmailDeliverabilityToolsLink;deliverabilityToolsMenuItem.update();}
else{clonedMenuItem=menu.items.items[0].cloneConfig();clonedMenuItem.setText("Deliverability Tools");clonedMenuItem.setIconCls("mki3-mail-sealed-svg");clonedMenuItem.href=mktoEmailDeliverabilityToolsLink;clonedMenuItem.hrefTarget="_blank";clonedMenuItem.update();menu.add(clonedMenuItem);}}}
if(!menu.isVisible()&&!logoEl.ignoreNextClick){menu.showAt(0,menuTop);menu.setZIndex(logoEl.getStyle('zIndex')-5);}}}}
APP.overrideAnalyticsTiles=function(){console.log("Marketo App > Overriding: Analytics Tiles");var isAnalyticsTiles=window.setInterval(function(){if(typeof(MktPage)!=="undefined"&&typeof(MktCanvas)!=="undefined"&&typeof(MktCanvas.getActiveTab().config.mkt3XType)!=="undefined"){window.clearInterval(isAnalyticsTiles);if(MktPage&&MktPage.savedState&&MktPage.savedState.custPrefix.search(mktoAccountStrings106and106dMatch)!=-1&&MktCanvas&&MktCanvas.getActiveTab()&&MktCanvas.getActiveTab().config&&MktCanvas.getActiveTab().config.mkt3XType=="analyticsHome"&&MktCanvas.getActiveTab().config.accessZoneId==mktoDefaultWorkspaceId&&MktCanvas.getActiveTab().el&&MktCanvas.getActiveTab().el.dom&&MktCanvas.getActiveTab().el.dom.childNodes&&MktCanvas.getActiveTab().el.dom.childNodes[0]&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1]&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0]&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0]&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0]&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0]&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes){console.log("Marketo App > Executing: Analytics Tiles");var ii,currTileHTML,tiles=MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes,host="https://app-sjp.marketo.com";for(ii=0;ii<tiles.length;ii++){if(tiles[ii]&&tiles[ii].outerHTML&&tiles[ii].textContent){currTileHTML=tiles[ii].outerHTML;switch(tiles[ii].textContent){case"Email Performance":currTileHTML='<a href="'+host+'/#AR3866B2">'+currTileHTML+'</a>';MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;case"Lead Performance":currTileHTML='<a href="'+host+'/#AR3874B2">'+currTileHTML+'</a>';MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;case"Web Page Activity":currTileHTML='<a href="'+host+'/#AR3876B2">'+currTileHTML+'</a>';MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;case"Opportunity Influence Analyzer":currTileHTML='<a href="'+host+'/#AR1559A1">'+currTileHTML+'</a>';MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;case"Program Analyzer":currTileHTML='<a href="'+host+'/#AR1544A1">'+currTileHTML+'</a>';MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;case"Success Path Analyzer":currTileHTML='<a href="'+host+'/#AR1682A1">'+currTileHTML+'</a>';MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;case"Revenue Explorer":break;case"Email Insights":var hrefMatch=new RegExp(' href=\"[^\"]*\" ','g');currTileHTML=currTileHTML.replace(hrefMatch,' href=\"'+mktoEmailInsightsLink+'\" ');MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;case"Engagement Stream Performance":currTileHTML='<a href="'+host+'/#AR3881B2">'+currTileHTML+'</a>';MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;case"Program Performance":currTileHTML='<a href="'+host+'/#AR3882B2">'+currTileHTML+'</a>';MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;case"Email Link Performance":currTileHTML='<a href="'+host+'/#AR3886B2">'+currTileHTML+'</a>';MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;case"Social Influence":break;case"Leads By Revenue Stage":currTileHTML='<a href="'+host+'/#AR3889B2">'+currTileHTML+'</a>';MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;case"Landing Page Performance":currTileHTML='<a href="'+host+'/#AR3891B2">'+currTileHTML+'</a>';MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;case"Leads By Status":currTileHTML='<a href="'+host+'/#AR3893B2">'+currTileHTML+'</a>';MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;case"Company Web Activity":currTileHTML='<a href="'+host+'/#AR3901B2">'+currTileHTML+'</a>';MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;case"Sales Insight Email Performance":currTileHTML='<a href="'+host+'/#AR3903B2">'+currTileHTML+'</a>';MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[ii].outerHTML=currTileHTML;break;default:break;}}}}}},0);}
APP.overrideSmartCampaignSaving=function(){console.log("Marketo App > Overriding: Saving for Smart Campaigns");if(Mkt&&Mkt.widgets&&Mkt.widgets.DataPanelManager&&Mkt.widgets.DataPanelManager.prototype&&Mkt.widgets.DataPanelManager.prototype.save){Mkt.widgets.DataPanelManager.prototype.save=function(cause,dp,acceptUpdates){console.log("Marketo App > Executing: Override Saving for Smart Campaigns");this._updateDataPanelOrder(true);var canvas=MktCanvas.getActiveTab();if(!APP.evaluateMenu("button",null,canvas,null)&&APP.getCookie("toggleState")!="false"){if(this.saveQueue.blockingSaveInProgress){this.saveQueue.pendingChangesCount++;this.saveQueue.dataPanelMetas=this._serializeDataPanels();this.saveQueue.dataPanelCount=this.countDataPanels();return;}
var dataPanelMetas;if(this.saveQueue.dataPanelMetas){dataPanelMetas=this.saveQueue.dataPanelMetas;}
else{dataPanelMetas=this._serializeDataPanels();}
this.saveQueue.pendingChangesCount=0;this.saveQueue.dataPanelMetas=null;this.saveQueue.dataPanelCount=0;if(dataPanelMetas===null){return;}
if(dataPanelMetas.length===0&&this.isFlow){}
if(this.dpSubtype!=DPConst.RUN_ACTION&&dataPanelMetas){if(this.lastSave.dataPanelMetas&&this.lastSave.dataPanelMetas==dataPanelMetas){return;}
else if(this.lastSave.dataPanelMetasUpdated&&this.lastSave.dataPanelMetasUpdated==dataPanelMetas){return;}}
console.debug('Saving '+this.dpType+':',MktFormat.formatJsonStr(dataPanelMetas));if(DPDEBUG){console.debug('Current Save:',dataPanelMetas);if(this.lastSave.dataPanelMetas){console.debug('Previous Save:',this.lastSave.dataPanelMetas);}
if(this.lastSave.dataPanelMetasUpdated){console.debug('Previous Update:',this.lastSave.dataPanelMetasUpdated);}}
this.lastSave.acceptUpdates=acceptUpdates;this.lastSave.dataPanelMetas=dataPanelMetas;this.saveQueue.blockingSaveInProgress=true;this.beforeSaveMessage();var params=Ext.apply({dataPanelMetas:dataPanelMetas,accessZoneId:this.accessZoneId},this.baseSaveParams);if(this.isSmartlist&&this.smartListRuleLogic.customMode()){if(this.smartListRuleLogic.isCustomLogicValid()){var smartListLogicParams=this.smartListRuleLogic.getSmartListLogicSaveParams();Ext.apply(params,smartListLogicParams);}else{console.debug('Data panel save successful. Custom rule logic is not valid');}}
params[this.appVarsBase+'Id']=this.dataPanelStorageId;this.beforeSaveHook();if(DPDEBUG){console.debug("Saving... ",params);}
MktSession.ajaxRequest(this.saveAction,{serializeParms:params,onMySuccess:this.saveSuccess.createDelegate(this),onMyFailure:this.saveFailure.createDelegate(this)});}
else{console.log("Marketo App > Disabling: Saving for Smart Campaigns");}}}}
APP.overrideSmartCampaignCanvas=function(){console.log("Marketo App > Overriding: Smart Campaign Canvases");if(Mkt&&Mkt.widgets&&Mkt.widgets.DataPanelLayout&&Mkt.widgets.DataPanelLayout.prototype&&Mkt.widgets.DataPanelLayout.prototype.initComponent){Mkt.widgets.DataPanelLayout.prototype.initComponent=function(){console.log("Marketo App > Executing: Override Smart Campaign Canvases");if(MktCanvas&&MktCanvas.getActiveTab()&&MktCanvas.getActiveTab().config&&MktCanvas.getActiveTab().config.accessZoneId==mktoDefaultWorkspaceId){console.log("Marketo App > Enabling: Smart Campaign Canvases");this.dpEditable=true;}
DPDEBUG=false;if(this.dpSubtype){this.addClass('mktDataPanelLayout-'+this.dpSubtype);}
if(this.canvas){MktCanvas.mask(this.canvas);}
if(this.dpType=='Smartlist'){this.isSmartlist=true;this.Flow=false;this.SETTINGS='conditions';}
else if(this.dpType=='Flow'){this.isSmartlist=false;this.isFlow=true;this.SETTINGS='actions';}
this.items=[];this.items.push({region:'center',margins:!MktPage.isFeatureEnabled('carbolt')?'7 5 10 10':'',layout:'fit',items:this.createManager()});if(this.dpEditable&&this.canvas&&this.paletteWidth>0){this.canvasWidth=MktCanvas.getWidth();var availableWidth=Math.min(this.canvasWidth-700,this.maxPaletteWidth);this.paletteWidth=Math.max(this.paletteWidth,availableWidth);this.items.push({cls:'mktEastPanel',region:'east',margins:!MktPage.isFeatureEnabled('carbolt')?'5 5 5 8':'0 0 0 15',layout:'fit',width:this.paletteWidth,items:this.createPalette()});}
Mkt.widgets.DataPanelLayout.superclass.initComponent.apply(this);if(this.canvas){MktPage.canvasCleanupStack.push(this.canvasCleanup.createDelegate(this));}
if(this.canvas){this.extendCanvasToolbar();}
if(this.canvas){this.extendCanvasGutter();}
if(this.canvas){MktCanvas.addHook(this.canvas,{dp:this});}}}}
APP.overrideUpdatePortletOrder=function(){console.log("Marketo App > Overriding: Updating of Portlet Order");if(Mkt&&Mkt.apps&&Mkt.apps.localasset&&Mkt.apps.localasset.LocalAssetPortal&&Mkt.apps.localasset.LocalAssetPortal.prototype&&Mkt.apps.localasset.LocalAssetPortal.prototype.updatePortletOrder){console.log("Marketo App > Executing: Override Updating of Portlet Order");Mkt.apps.localasset.LocalAssetPortal.prototype.updatePortletOrder=function(e){var canvas=MktCanvas.getActiveTab(),disable=APP.evaluateMenu("button",null,canvas,null);if(!disable){var newPortletOrder=[];for(var i=0;i<this.items.length;i++){var itemInfo=this.items.get(i).smartCampaignMetaData;newPortletOrder.push(itemInfo.compTypeId+":"+itemInfo.compId);}
var params={compId:this.programId,portletOrdering:Ext.encode(newPortletOrder)};MktSession.ajaxRequest('marketingEvent/orderLocalAssetPortlets',{serializeParms:params,localAssetManager:this,portletOrdering:newPortletOrder,onMySuccess:this.updatePortletOrderSuccess});}
else{console.log("Marketo App > Disabling: Updating of Portlet Order");}}}}
APP.discardLandingPageDrafts=function(lpIds){console.log("Marketo App > Discarding: Landing Page Drafts");if(mktLPLManager&&mktLPLManager.doModifyPages){console.log("Marketo App > Executing: Discard Landing Page Drafts");var lpMessageBox=Ext.MessageBox.show({title:"Marketo Live",msg:"Discarding Landing Page Drafts",progress:false,wait:false,width:270,closable:false});mktLPLManager.doModifyPages('revert',lpIds);if(lpMessageBox&&lpMessageBox.hide){lpMessageBox.hide();}}}
APP.discardEmailDrafts=function(emIds){console.log("Marketo App > Discarding: Email Drafts");if(mktEmManager&&mktEmManager.discardDraft){console.log("Marketo App > Executing: Discard Email Drafts");var emMessageBox=Ext.MessageBox.show({title:"Marketo Live",msg:"Discarding Email Drafts",progress:false,wait:false,width:270,closable:false});mktEmManager.discardDraft(emIds);if(emMessageBox&&emMessageBox.hide){emMessageBox.hide();}}}
APP.discardFormPushDrafts=function(assetType,assetIds){console.log("Marketo App > Discarding: "+assetType+" Drafts");if(Ext4&&Ext4.getStore&&Ext4.create&&Mkt3){console.log("Marketo App > Executing: Discard "+assetType+" Drafts");var assetStore=Ext4.getStore(assetType);if(MktMessage&&MktMessage.showSystemError){MktMessage.showSystemError=function(){};}
if(typeof(Mkt3)!=='undefined'){if(!assetStore){assetStore=Ext4.create('Mkt3.store.'+assetType,{storeId:assetType});}
assetStore.load({filters:[{property:'id',value:assetIds}],callback:function(assets){for(var i=0;i<assets.length;i++){var asset=assets[i];asset.discard(function(success){if(success){asset.updateNode();}},this);}}});}}}
APP.overrideTreeNodeExpand=function(){console.log("Marketo App > Overriding: Tree Node Expand");if(MktAsyncTreeNode&&MktAsyncTreeNode.prototype&&MktAsyncTreeNode.prototype.expand&&userName){MktAsyncTreeNode.prototype.expand=function(){console.log("Marketo App > Executing: Tree Node Expand");var attr=this.attributes,ii;if(this.text==userWorkspaceName||(this.parentNode.text==userWorkspaceName&&this.attributes.system==true)||(this.parentNode.parentNode!=null&&this.parentNode.parentNode.text==userWorkspaceName&&this.attributes.system==true)){for(ii=0;ii<this.childNodes.length;ii++){if(this.childNodes[ii].attributes.system==false){if(this.childNodes[ii].text.toLowerCase()!==userName){this.childNodes[ii].hidden=true;}
else{}}}}
if(attr.folder){if(attr.cancelFirstExpand){delete this.attributes.cancelFirstExpand;}
else if(this.childNodes&&this.childNodes.length>0&&!attr.mktExpanded){if(this.text!=userWorkspaceName&&this.parentNode.text!=userWorkspaceName&&this.parentNode.parentNode!=null&&this.parentNode.parentNode.text!=userWorkspaceName){console.log("Marketo App > Saving: Folder Expand State");MktFolder.saveExpandState(this,true);}}}
MktAsyncTreeNode.superclass.expand.apply(this,arguments);attr.mktExpanded=true;}}}
APP.overrideTreeNodeCollapse=function(){console.log("Marketo App > Overriding: Tree Node Collapse");if(MktAsyncTreeNode&&MktAsyncTreeNode.prototype&&MktAsyncTreeNode.prototype.collapse&&userName){MktAsyncTreeNode.prototype.collapse=function(){console.log("Marketo App > Executing: Tree Node Collapse");var attr=this.attributes,ii;if(this.text==userWorkspaceName||(this.parentNode.text==userWorkspaceName&&this.attributes.system==true)||(this.parentNode.parentNode!=null&&this.parentNode.parentNode.text==userWorkspaceName&&this.attributes.system==true)){for(ii=0;ii<this.childNodes.length;ii++){if(this.childNodes[ii].attributes.system==false){if(this.childNodes[ii].text.toLowerCase()!==userName){this.childNodes[ii].ui.elNode.hidden=true;}
else{}}}}
if(attr.suppressAjaxCollapse){delete this.attributes.suppressAjaxCollapse;}
else if(isDefined(attr.folder)&&attr.folder&&attr.mktExpanded===true){MktFolder.saveExpandState(this,false);}
MktTreeNode.superclass.collapse.apply(this,arguments);attr.mktExpanded=false;}}}
APP.overrideNewProgramCreate=function(){console.log("Marketo App > Overriding: New Program/Segmentation Creation");if(Mkt&&Mkt.widgets&&Mkt.widgets.ModalForm&&Mkt.widgets.ModalForm.prototype&&Mkt.widgets.ModalForm.prototype.okButtonHandler&&userName){Mkt.widgets.ModalForm.prototype.okButtonHandler=function(){console.log("Marketo App > Executing: New Program/Segmentation Creation");if(this.title=="New Program"||this.title=="New Segmentation"){var ii;if(this.title=="New Program"){if(this.getInputItems()){if(this.getInputItems()[1]&&this.getInputItems()[1].fieldLabel=="Name"){if(this.getInputItems()[1].getValue().toLowerCase().search(userName+"$")==-1){this.getInputItems()[1].setValue(this.getInputItems()[1].getValue()+" - "+userName);}}
else{for(ii=0;ii<this.getInputItems().length;ii++){if(this.getInputItems()[ii]&&this.getInputItems()[ii].fieldLabel=="Name"){if(this.getInputItems()[ii].getValue().toLowerCase().search(userName+"$")==-1){this.getInputItems()[ii].setValue(this.getInputItems()[ii].getValue()+" - "+userName);}}}}}}
else if(this.title=="New Segmentation"){if(this.findByType("textfield")){if(this.findByType("textfield")[0]&&this.findByType("textfield")[0].fieldLabel=="Name"){if(this.findByType("textfield")[0].getValue().toLowerCase().search(userName+"$")==-1){this.findByType("textfield")[0].setValue(this.findByType("textfield")[0].getValue()+" - "+userName);}}
else{for(ii=0;ii<this.findByType("textfield").length;ii++){if(this.findByType("textfield")[ii]&&this.findByType("textfield")[ii].fieldLabel=="Name"){if(this.findByType("textfield")[ii].getValue().toLowerCase().search(userName+"$")==-1){this.findByType("textfield")[ii].setValue(this.findByType("textfield")[ii].getValue()+" - "+userName);}}}}}}}
if(this.submitInProgress){return;}
if(this.beforeSubmitCallback()===false){return;};if(this.okCallback&&isFunction(this.okCallback)){this.okCallback();}
if(!this.submitUrl){return;}
if(this.showProgressModal){this.hide();this.progressModal=Ext.MessageBox.show({title:MktLang.getStr('ModalForm.Please_wait'),msg:this.progressMsg,progress:true,wait:true,width:200,closable:false});}
else{MktSession.clockCursor();}
this.submitInProgress=true;this.enableOkCancelButton(!this.submitInProgress);if(this.serializeJSON){this.serializeParms=this.serializeParms||{};this.serializeParms._json=Ext.encode(this.serializeJSON);}
var parms=Ext.apply({},this.serializeParms,this.baseParams);MktSession.ajaxRequest(this.submitUrl,{serializeParms:parms,onMySuccess:this.submitSuccessHandler.createDelegate(this),onMyFailure:this.submitFailedHandler.createDelegate(this)});}}}
APP.overrideAssetSaveEdit=function(){console.log("Marketo App > Overriding: Asset Save Edit");if(Mkt&&Mkt.widgets&&Mkt.widgets.CanvasHeader&&Mkt.widgets.CanvasHeader.prototype&&Mkt.widgets.CanvasHeader.prototype.saveEdit){Mkt.widgets.CanvasHeader.prototype.saveEdit=function(){if(MktCanvas&&MktCanvas.getActiveTab()&&MktCanvas.getActiveTab().config&&MktCanvas.getActiveTab().config.accessZoneId&&userName){console.log("Marketo App > Executing: Asset Save Edit");var currWorkspaceId=MktCanvas.getActiveTab().config.accessZoneId;if(currWorkspaceId!=mktoDefaultWorkspaceId&&currWorkspaceId!=mktoJapaneseWorkspaceId&&currWorkspaceId!=mktoFinservWorkspaceId&&currWorkspaceId!=mktoHealthcareWorkspaceId&&currWorkspaceId!=mktoHigherEdWorkspaceId){var isFolderEdit=false;if((MktExplorer.getEl().dom.ownerDocument.title.search("Marketing Activities")!=-1&&(this.titleId=="mpTEName"||this.titleId=="cdhTEName"||this.titleId=="pname"))||MktExplorer.getEl().dom.ownerDocument.title.search("Marketing Activities")==-1){if(MktCanvas.getActiveTab().config.accessZoneId==mktoMarketingWorkspaceId&&this.titleId=="pname"){if(this.titleValue==userName){isFolderEdit=true;}}
if(this.getTitleField().getValue().toLowerCase().search(userName+"$")==-1){this.getTitleField().setValue(this.getTitleField().getValue()+" - "+userName);}}
if(isFolderEdit){var toUpdateNodeText=false;MktSession.clockCursor(true);this.getTitleField().setValue(this.titleValue);var canvasTab=MktCanvas.getActiveTab();var nodeId=null;if(canvasTab.config.expNodeId){var node=MktExplorer.getNodeById(canvasTab.config.expNodeId);if(node&&node.attributes.compType){var compType=node.attributes.compType;if(compType=='Marketing Program'){nodeId=canvasTab.config.expNodeId;}
if(compType=='Image'){toUpdateNodeText=false;}}
if(toUpdateNodeText){}}
var el=this.getEl();var panelObj=this;var formPanel=this.formPanel;var viewPanel=this.viewPanel;formPanel.hide(true,0.2);viewPanel.show(true,0.2);viewPanel.body.update(panelObj.viewTemplate.apply(panelObj));el.animate({height:{from:this.getHeight(),to:this.origHeight}},0.25,function(){panelObj.setHeight(panelObj.origHeight);panelObj.body.setHeight(panelObj.origHeight);if(isFunction(panelObj.savedCallback)){panelObj.savedCallback();}});MktSession.unclockCursor();this._saveInProgress=false;}
else{var toUpdateNodeText=true;MktSession.clockCursor(true);this.serializeParms[this.titleId]=this.getTitleField().getValue();this.serializeParms[this.descId]=this.getDescField().getValue();this.newTitleValue=MktPage.isFeatureEnabled('treeEncoding')?this.serializeParms[this.titleId]:Ext.util.Format.htmlEncode(this.serializeParms[this.titleId]);this.newDescValue=Ext.util.Format.htmlEncode(this.serializeParms[this.descId]);this.updateCanvasConfig();this.prevTitleValue=this.titleValue;this.titleValue=this.newTitleValue;this.descValue=this.newDescValue;MktPage.updateFullTitle();var canvasTab=MktCanvas.getActiveTab();canvasTab.updateTabTitle(this.titleValue);var nodeId=null;if(canvasTab.config.expNodeId){var node=MktExplorer.getNodeById(canvasTab.config.expNodeId);if(node&&node.attributes.compType){var compType=node.attributes.compType;if(compType=='Marketing Program'){nodeId=canvasTab.config.expNodeId;MktExplorer.lockSubTree(nodeId);}
if(compType=='Image'){toUpdateNodeText=false;}}
if(toUpdateNodeText){MktExplorer.updateNodeText(canvasTab.config.expNodeId,this.titleValue);}}
var el=this.getEl();var panelObj=this;var formPanel=this.formPanel;var viewPanel=this.viewPanel;formPanel.hide(true,0.2);viewPanel.show(true,0.2);viewPanel.body.update(panelObj.viewTemplate.apply(panelObj));el.animate({height:{from:this.getHeight(),to:this.origHeight}},0.25,function(){panelObj.setHeight(panelObj.origHeight);panelObj.body.setHeight(panelObj.origHeight);if(isFunction(panelObj.savedCallback)){panelObj.savedCallback();}});MktSession.unclockCursor();this._saveInProgress=true;MktSession.ajaxRequest(this.actionUrl,{serializeParms:this.serializeParms,containerId:this.id,onMySuccess:this.saveResponse.createDelegate(this,[nodeId],true),onMyError:this.saveError.createDelegate(this,[nodeId])});}}
if(currWorkspaceId==mktoDefaultWorkspaceId||currWorkspaceId==mktoJapaneseWorkspaceId||currWorkspaceId==mktoFinservWorkspaceId||currWorkspaceId==mktoHealthcareWorkspaceId||currWorkspaceId==mktoHigherEdWorkspaceId){var toUpdateNodeText=false;MktSession.clockCursor(true);this.getTitleField().setValue(this.titleValue);var canvasTab=MktCanvas.getActiveTab();var nodeId=null;if(canvasTab.config.expNodeId){var node=MktExplorer.getNodeById(canvasTab.config.expNodeId);if(node&&node.attributes.compType){var compType=node.attributes.compType;if(compType=='Marketing Program'){nodeId=canvasTab.config.expNodeId;}
if(compType=='Image'){toUpdateNodeText=false;}}
if(toUpdateNodeText){}}
var el=this.getEl();var panelObj=this;var formPanel=this.formPanel;var viewPanel=this.viewPanel;formPanel.hide(true,0.2);viewPanel.show(true,0.2);viewPanel.body.update(panelObj.viewTemplate.apply(panelObj));el.animate({height:{from:this.getHeight(),to:this.origHeight}},0.25,function(){panelObj.setHeight(panelObj.origHeight);panelObj.body.setHeight(panelObj.origHeight);if(isFunction(panelObj.savedCallback)){panelObj.savedCallback();}});MktSession.unclockCursor();this._saveInProgress=false;}}}}}
APP.overrideNewAssetCreate=function(){console.log("Marketo App > Overriding: New Asset Creation");if(Mkt3&&Mkt3.controller&&Mkt3.controller.lib&&Mkt3.controller.lib.AbstractModalForm&&Mkt3.controller.lib.AbstractModalForm.prototype&&Mkt3.controller.lib.AbstractModalForm.prototype.onSubmit&&userName){Mkt3.controller.lib.AbstractModalForm.prototype.onSubmit=function(form){console.log("Marketo App > Executing: New Asset Creation");if(form==null||form.ownerAsset==null||form.ownerAsset.isOneOfProgramTypes==null||form.ownerAsset.isOneOfProgramTypes()==false){if(this!=null&&this.getField("name")!=null&&this.getField("name").getValue()!=null){var assetName=this.getField("name").getValue();if(assetName.toLowerCase().search(userName+"$")==-1){this.getField("name").setValue(assetName+" - "+userName);}}}
form=!form.isXType('modalForm')?form.up('modalForm'):form;form.setSubmitting(true);if(this.validate(form)){if(this.application.fireEvent(this.widgetId+'BeforeSubmit',form?form.getRecord():null)!==false){if(this.submit(form)!==false){this.submitComplete(form);}}
else{form.setSubmitting(false);}}
else{form.showDefaultMessage();form.setSubmitting(false);}}}}
APP.overrideNewFolders=function(){console.log("Marketo App > Overriding: New Folders");if(MktMa&&MktMa.newProgramFolderSubmit&&userName){MktMa.newProgramFolderSubmit=function(text,parentId,tempNodeId){console.log("Marketo App > Executing: New Folders in Marketing Activities");MktSession.clockCursor(true);var parms={};if((this.currNode.parentNode.attributes.compType.search("Folder$")!=-1&&text.toLowerCase().search(userName+"$")==-1)||text==userName){text=text+" - "+userName;}
parms.text=text;parms.parentId=parentId;parms.tempNodeId=tempNodeId;MktSession.ajaxRequest('explorer/createProgramFolder',{serializeParms:parms,onMySuccess:MktMa.newProgramFolderDone,onMyFailure:function(tempNodeId){var tempNode=MktExplorer.getNodeById(tempNodeId);if(tempNode){tempNode.remove();}}.createDelegate(this,[tempNodeId])});if(MktMa.currNode){MktMa.currNode.unselect();}}}
if(MktFolder&&MktFolder.newFolderSubmit&&userName){MktFolder.newFolderSubmit=function(text,parentNodeId,tempNodeId){console.log("Marketo App > Executing: New Folders");MktSession.clockCursor(true);var parms={};if(text.toLowerCase().search(userName+"$")==-1||text==userName){text=text+" - "+userName;}
parms.text=text;parms.parentNodeId=parentNodeId;parms.tempNodeId=tempNodeId;MktSession.ajaxRequest('folder/createFolderSubmit',{serializeParms:parms,onMySuccess:MktFolder.newFolderSubmitDone.createDelegate(this,[tempNodeId]),onMyFailure:function(tempNodeId){var tempNode=MktExplorer.getNodeById(tempNodeId);if(tempNode){tempNode.remove();}}.createDelegate(this,[tempNodeId])});}}}
APP.overrideRenamingFolders=function(){console.log("Marketo App > Overriding: Renaming Folders");if(MktMa&&MktMa.renameProgramFolderSubmit&&userName){MktMa.renameProgramFolderSubmit=function(value,startValue,folderId){console.log("Marketo App > Executing: Renaming Folders in Marketing Activities");MktSession.clockCursor(true);var folder=MktExplorer.getNodeById(folderId),parms={};if(startValue==userName&&this.currNode.parentNode.attributes.system==true&&this.currNode.attributes.accessZoneId==mktoMarketingWorkspaceId){if(folder){folder.setText(startValue);}
MktSession.unclockCursor();}
else{if((this.currNode.parentNode.attributes.compType.search("Folder$")!=-1&&value.toLowerCase().search(userName+"$"))==-1||value==userName){value=value+" - "+userName;if(folder){folder.setText(value);}}
parms.origProgramName=startValue;parms.newProgramName=value;parms.folderId=folderId;MktSession.ajaxRequest('explorer/renameProgramFolder',{serializeParms:parms,onMySuccess:MktMa.renameProgramFolderSubmitDone,onMyFailure:function(folderId,origName){var folder=MktExplorer.getNodeById(folderId);if(folder){folder.setText(origName);}}.createDelegate(this,[folderId,startValue])});}}}
if(MktFolder&&MktFolder.renameFolderSubmit&&userName){MktFolder.renameFolderSubmit=function(text,startValue,nodeId){console.log("Marketo App > Executing: Renaming Folders");MktSession.clockCursor(true);var parms={};if(startValue==userName&&this.currNode.parentNode.attributes.system==true&&this.currNode.attributes.accessZoneId==mktoMarketingWorkspaceId){MktFolder.currNode.setText(startValue);MktSession.unclockCursor();}
else{if(text.toLowerCase().search(userName+"$")==-1||text==userName){text=text+" - "+userName;MktFolder.currNode.setText(text);}
parms.text=text;parms.nodeId=nodeId;MktSession.ajaxRequest('folder/renameFolderSubmit',{serializeParms:parms,onMySuccess:MktFolder.renameFolderSubmitDone.createDelegate({parms:parms,startValue:startValue}),onMyFailure:function(){MktFolder.currNode.setText(startValue);}.createDelegate(this)});}}}}
APP.hideFoldersOnImport=function(){console.log("Marketo App > Hiding: Folders On Program Import via Override");if(Ext&&Ext.form&&Ext.form.ComboBox&&Ext.form.ComboBox.prototype&&Ext.form.ComboBox.prototype.onTriggerClick&&userName){Ext.form.ComboBox.prototype.onTriggerClick=function(){console.log("Marketo App > Executing: Hide Folders On Program Import via Override");if(this.readOnly||this.disabled){return;}
if(this.isExpanded()){this.collapse();this.el.focus();}
else{this.onFocus({});if(this.triggerAction=='all'){this.doQuery(this.allQuery,true);if(this&&this.label&&this.label.dom&&this.label.dom.textContent=="Campaign Folder:"&&MktCanvas&&MktCanvas.getActiveTab()&&MktCanvas.getActiveTab().config&&MktCanvas.getActiveTab().config.accessZoneId==mktoMarketingWorkspaceId){console.log("Marketo App > Executing: Hide Campaign Folders On Program Import via Override");var ii;for(ii=0;ii<this.view.all.elements.length;ii++){if(this.view.all.elements[ii].textContent.toLowerCase()!=userName){this.view.all.elements[ii].hidden=true;}}}}
else{this.doQuery(this.getRawValue());}
this.el.focus();}}}}
APP.hidePageGrid=function(){console.log("Marketo App > Hiding: Page Grid via Override");if(MktGrids&&MktGrids.CanvasGridPanel&&MktGrids.CanvasGridPanel.prototype&&MktGrids.CanvasGridPanel.prototype.loadPagedGrid){MktGrids.CanvasGridPanel.prototype.loadPagedGrid=function(){if(MktCanvas&&MktCanvas.getActiveTab()&&MktCanvas.getActiveTab().config&&MktCanvas.getActiveTab().config.accessZoneId==mktoMarketingWorkspaceId){switch(this.canvas){case"landingCanvasLP":this.hide();break;case"landingCanvasFO":this.hide();break;case"landingCanvasEM":this.hide();break;case"landingCanvasSnippet":this.hide();break;case"landingCanvasIM":this.hide();break;case"ldbCanvasLeadList":this.hide();break;case"campaignCanvasDetailActivityLog":this.hide();break;case"atxCanvasDetailView":break;default:break;}}
this.store.load({params:{start:0,query:this.query}});}}}
APP.disableButtons=function(){console.log("Marketo App > Disabling: Buttons");$jQ=jQuery.noConflict();if($jQ&&$jQ(".mktButtonPositive")){$jQ(".mktButtonPositive").remove();}}
APP.evaluateMoveItem=function(nodeToMove,destNode){console.log("Marketo App > Evaluating: Move Item");if(userName){var ii,currNode,depth;if((nodeToMove.attributes&&(nodeToMove.attributes.accessZoneId==mktoDefaultWorkspaceId||nodeToMove.attributes.accessZoneId==mktoJapaneseWorkspaceId||nodeToMove.attributes.accessZoneId==mktoFinservWorkspaceId||nodeToMove.attributes.accessZoneId==mktoHealthcareWorkspaceId||nodeToMove.attributes.accessZoneId==mktoHigherEdWorkspaceId))||(destNode.attributes&&(destNode.attributes.accessZoneId==mktoDefaultWorkspaceId||destNode.attributes.accessZoneId==mktoJapaneseWorkspaceId||destNode.attributes.accessZoneId==mktoFinservWorkspaceId||destNode.attributes.accessZoneId==mktoHealthcareWorkspaceId||destNode.attributes.accessZoneId==mktoHigherEdWorkspaceId))){return false;}
else if(nodeToMove.attributes.accessZoneId==mktoMarketingWorkspaceId&&destNode.attributes.accessZoneId==mktoMarketingWorkspaceId){currNode=nodeToMove;depth=currNode.getDepth();for(ii=0;ii<depth;ii++){if(currNode.text==userName){currNode=destNode;depth=currNode.getDepth();for(ii=0;ii<depth;ii++){if(currNode.text==userName){return true;}
currNode=currNode.parentNode;}
return false;}
currNode=currNode.parentNode;}
return false;}
else if(nodeToMove.attributes.accessZoneId==mktoMarketingWorkspaceId){currNode=nodeToMove;depth=currNode.getDepth();for(ii=0;ii<depth;ii++){if(currNode.text==userName){return true;}
currNode=currNode.parentNode;}
return false;}
else if(destNode.attributes.accessZoneId==mktoMarketingWorkspaceId){currNode=destNode;depth=currNode.getDepth();for(ii=0;ii<depth;ii++){if(currNode.text==userName){return true;}
currNode=currNode.parentNode;}
return false;}
else{return true;}}}
APP.disableDragAndDrop=function(){console.log("Marketo App > Disabling: Tree Node Drop");if(Ext&&Ext.tree&&Ext.tree.TreeDropZone&&Ext.tree.TreeDropZone.prototype&&Ext.tree.TreeDropZone.prototype.processDrop){Ext.tree.TreeDropZone.prototype.processDrop=function(target,data,point,dd,e,dropNode){console.log("Marketo App > Executing: Tree Node Drop");if(APP.evaluateMoveItem(dropNode,target)){var dropEvent={tree:this.tree,target:target,data:data,point:point,source:dd,rawEvent:e,dropNode:dropNode,cancel:!dropNode,dropStatus:false};var retval=this.tree.fireEvent("beforenodedrop",dropEvent);if(retval===false||dropEvent.cancel===true||!dropEvent.dropNode){target.ui.endDrop();return dropEvent.dropStatus;}
target=dropEvent.target;if(point=='append'&&!target.isExpanded()){target.expand(false,null,function(){this.completeDrop(dropEvent);}.createDelegate(this));}
else{this.completeDrop(dropEvent);}
return true;}
else{return false;}}}}
APP.evaluateMenu=function(triggeredFrom,menu,canvas,toolbar){console.log("Marketo App > Evaluating: Menu");if(userName){var toBeDisabled=false;switch(triggeredFrom){case"tree":if(menu&&menu.currNode&&menu.currNode.attributes&&(menu.currNode.attributes.accessZoneId==mktoDefaultWorkspaceId||menu.currNode.attributes.accessZoneId==mktoJapaneseWorkspaceId||menu.currNode.attributes.accessZoneId==mktoFinservWorkspaceId||menu.currNode.attributes.accessZoneId==mktoHealthcareWorkspaceId||menu.currNode.attributes.accessZoneId==mktoHigherEdWorkspaceId||menu.currNode.attributes.accessZoneId==mktoMarketingWorkspaceId)){toBeDisabled=true;if(menu.currNode.attributes.accessZoneId==mktoMarketingWorkspaceId){var ii,currNode=menu.currNode,depth=currNode.getDepth();for(ii=0;ii<depth;ii++){if(currNode.attributes.text==userName){toBeDisabled=false;break;}
currNode=currNode.parentNode;}}}
else if((!menu||!menu.currNode||!menu.currNode.attributes||!menu.currNode.attributes.accessZoneId)&&(canvas&&canvas.config&&(canvas.config.accessZoneId==mktoDefaultWorkspaceId||canvas.config.accessZoneId==mktoJapaneseWorkspaceId||canvas.config.accessZoneId==mktoFinservWorkspaceId||canvas.config.accessZoneId==mktoHealthcareWorkspaceId||canvas.config.accessZoneId==mktoHigherEdWorkspaceId||(canvas.config.accessZoneId==mktoMarketingWorkspaceId&&((canvas.config.expNodeId&&MktExplorer.getNodeById(canvas.config.expNodeId))||(canvas.config.dlZoneFolderId&&MktExplorer.getNodeById(canvas.config.dlZoneFolderId))))))){toBeDisabled=true;if(canvas.config.accessZoneId==mktoMarketingWorkspaceId){var ii,currNode,depth;if(canvas.config.expNodeId){currNode=MktExplorer.getNodeById(canvas.config.expNodeId);}
else{currNode=MktExplorer.getNodeById(canvas.config.dlZoneFolderId);}
depth=currNode.getDepth();for(ii=0;ii<depth;ii++){if(currNode.attributes.text==userName){toBeDisabled=false;break;}
currNode=currNode.parentNode;}}}
return toBeDisabled;break;case"button":if((canvas&&canvas.config&&(canvas.config.accessZoneId==mktoDefaultWorkspaceId||canvas.config.accessZoneId==mktoJapaneseWorkspaceId||canvas.config.accessZoneId==mktoFinservWorkspaceId||canvas.config.accessZoneId==mktoHealthcareWorkspaceId||canvas.config.accessZoneId==mktoHigherEdWorkspaceId||(canvas.config.accessZoneId==mktoMarketingWorkspaceId&&((canvas.config.expNodeId&&MktExplorer.getNodeById(canvas.config.expNodeId))||(canvas.config.dlZoneFolderId&&MktExplorer.getNodeById(canvas.config.dlZoneFolderId))))))||(MktMainNav&&MktMainNav.activeNav=="tnCustAdmin")){toBeDisabled=true;if(canvas.config.accessZoneId==mktoMarketingWorkspaceId){var ii,currNode,depth;if(canvas.config.expNodeId){currNode=MktExplorer.getNodeById(canvas.config.expNodeId);}
else{currNode=MktExplorer.getNodeById(canvas.config.dlZoneFolderId);}
depth=currNode.getDepth();for(ii=0;ii<depth;ii++){if(currNode.attributes.text==userName){toBeDisabled=false;break;}
currNode=currNode.parentNode;}}}
return toBeDisabled;break;case"socialAppToolbar":if(toolbar.getSocialApp()&&(toolbar.getSocialApp().get('zoneId')==mktoDefaultWorkspaceId||toolbar.getSocialApp().get('zoneId')==mktoJapaneseWorkspaceId||toolbar.getSocialApp().get('zoneId')==mktoFinservWorkspaceId||toolbar.getSocialApp().get('zoneId')==mktoHealthcareWorkspaceId||toolbar.getSocialApp().get('zoneId')==mktoHigherEdWorkspaceId)||(toolbar.getSocialApp().get('zoneId')==mktoMarketingWorkspaceId&&toolbar.getSocialApp().getNodeJson()&&toolbar.getSocialApp().getNodeJson().id&&MktExplorer.getNodeById(toolbar.getSocialApp().getNodeJson().id))){toBeDisabled=true;if(toolbar.getSocialApp().get('zoneId')==mktoMarketingWorkspaceId){var ii,currNode=MktExplorer.getNodeById(toolbar.getSocialApp().getNodeJson().id),depth=currNode.getDepth();for(ii=0;ii<depth;ii++){if(currNode.attributes.text==userName){toBeDisabled=false;break;}
currNode=currNode.parentNode;}}}
return toBeDisabled;break;case"mobilePushNotification":if(toolbar.getMobilePushNotification()&&(toolbar.getMobilePushNotification().get('zoneId')==mktoDefaultWorkspaceId||toolbar.getMobilePushNotification().get('zoneId')==mktoJapaneseWorkspaceId||toolbar.getMobilePushNotification().get('zoneId')==mktoFinservWorkspaceId||toolbar.getMobilePushNotification().get('zoneId')==mktoHealthcareWorkspaceId||toolbar.getMobilePushNotification().get('zoneId')==mktoHigherEdWorkspaceId)||(toolbar.getMobilePushNotification().get('zoneId')==mktoMarketingWorkspaceId&&toolbar.getMobilePushNotification().getNodeJson()&&toolbar.getMobilePushNotification().getNodeJson().id&&MktExplorer.getNodeById(toolbar.getMobilePushNotification().getNodeJson().id))){toBeDisabled=true;if(toolbar.getMobilePushNotification().get('zoneId')==mktoMarketingWorkspaceId){var ii,currNode=MktExplorer.getNodeById(toolbar.getMobilePushNotification().getNodeJson().id),depth=currNode.getDepth();for(ii=0;ii<depth;ii++){if(currNode.attributes.text==userName){toBeDisabled=false;break;}
currNode=currNode.parentNode;}}}
return toBeDisabled;break;default:return true;break;}}}
APP.disableMenus=function(){console.log("Marketo App > Disabling: Menus");if(Ext&&Ext.menu&&Ext.menu.Menu&&Ext.menu.Menu.prototype&&Ext.menu.Menu.prototype.showAt){Ext.menu.Menu.prototype.showAt=function(xy,parentMenu){console.log("Marketo App > Executing: Disable Actions and Right-click menus for ALL in ALL");if(this.fireEvent('beforeshow',this)!==false){var disable,mItems=this.items,canvas=MktCanvas.getActiveTab(),itemsToDisable=["formApprove","formClone","formDelete","formMove","formDraftApprove","pageApprove","pageUnapprove","pageConvertToTestGroup","pageClone","pageDelete","pageMove","pageDraftApprove","emailApprove","emailUnapprove","emailClone","emailDelete","emailMove","emailNewTest","emailDraftApprove","emailApproveTest","importList","cloneSmartlist","cloneList","deleteList","showSupportHistory","showSupportUsagePerf","showSmartListProcessorDiag","showSmartListProcessorOverride","cloneReport_atxCanvasOverview","deleteReport","cloneReport","deleteReport","moveReport","blackCatDiag","mergeLeads","sendEmail","sendPushNotification","addToList","removeFromList","interestingMoment","sendAlert","changeScore","changeDataValue","changeStatusInProgression","addToNurture","changeNurtureCadence","changeNurtureTrack","changeLeadPartition","changeRevenueStage","deleteLead","giveCreditToReferrer","requestCampaign","removeFromFlow","pushLeadToSFDC","createTask","convertLead","changeOwner","deleteLeadFromSFDC","addToSFDCCampaign","changeStatusInSFDCCampaign","removeFromSFDCCampaign","deleteItem","createProgramFolder","newSmartCampaign","createNewMarketingProgram","importProgram","entryRescheduleEntries","sfdcCampaignSync","cloneMarketingProgram","deleteMarketingProgram","eventSchedule","entryRescheduleEntries","webinarSettings","sfdcCampaignSync","cloneMarketingEvent","deleteMarketingEvent","refreshFromWebinarProvider","sfdcCampaignSync","cloneNurtureProgram","deleteNurtureProgram","testNurtureProgram","newSmartCampaign","createNewMarketingProgram","newLocalAsset","createProgramFolder","renameProgramFolder","deleteProgramFolder","convertToArchiveFolder","convertToCampaignFolder","scClone","scArchive","scMove","cloneMarketingProgram","deleteMarketingProgram","cloneMarketingEvent","deleteMarketingEvent","cloneNurtureProgram","deleteNurtureProgram","cloneEmailBatchProgram","deleteEmailBatchProgram","cloneInAppProgram","deleteInAppProgram","shareProgramFolder","scActivate","scAbort","scCampChangeHistory","scCampRunHistory","scClearPalette","scClearSmartList","scClearFlow","progGenerateRef","checkForCorruptEmails","socialAppApprove","socialAppClone","socialAppDelete","socialAppDraftApprove","pushNotificationUnapprove","pushNotificationApprove","pushNotificationClone","pushNotificationDelete","pushNotificationDraftApprove","Not in ProgramStatusMarketingEvent","SentStatusMarketingEvent","VisitedStatusMarketingEvent","EngagedStatusMarketingEvent","deleteCustomToken","newLandingPage","newTestGroup","newPageTemplate","pageTemplateImport","newForm","newVideoShare","newShareButton","newReferralOffer","newEmail","newEmailTemplate","newSnippet","uploadImage","share","createFolder","renameFolder","deleteFolder","convertToArchiveFolder","convertToFolder","approvePageTemplate","unapprovePageTemplate","clonePageTemplate","pageTemplateDelete","approveDraftPageTemplate","emailTemplateApprove","emailTemplateUnapprove","emailTemplateClone","emailTemplateDelete","emailTemplateDraftApprove","snippetApprove","snippetUnapprove","snippetClone","snippetDelete","snippetDraftApprove","uploadImage","imageDelete","replaceImage","newSmartList","newList","newSegmentation","importList","newLead","newDataMgr","newSegmentation","newSmartList","share","createFolder","renameFolder","deleteFolder","convertToArchiveFolder","convertToFolder","createDraftSegmentation","approveSegmentation","unapproveSegmentation","deleteSegmentation","refreshSegmentation","approveDraftSegmentation","newRcm_atxCanvasOverview","newRcm_rcmCanvasOverview","newRcm_atxCanvasSubscriptions","newRcm","share","createFolder","renameFolder","deleteFolder","convertToArchiveFolder","convertToFolder","newReport_atxCanvasOverview","cloneReport_atxCanvasOverview","deleteReport","cloneReport","deleteReport","cloneReport","deleteReport","moveReport","rcmApproveStages","rcmUnapproveStages","rcmApprove","rcmUnapprove","rcmClone","rcmDelete","rcmApproveDraft","rcmAassignmentRules","editDescriptor","deleteDescriptor","deleteDescriptorValue","hideDescriptorValue","unhideDescriptorValue","newEntry","editEntry","unhideEntry","hideEntry","hideFieldFmFields","changeTypeFmFields","newAlias","newRule","editRule","deleteRule","newWebinarLogin","editWebinarLogin","cloneWebinarLogin","deleteWebinarLogin","editWebhook","cloneWebhook","deleteWebhook","customHeader",];if(this.triggeredFrom!="tree"&&this.triggeredFrom!="button"){disable=APP.evaluateMenu("tree",this,canvas,null);}
else if(this.id=="leadDbListMenu"||this.id=="segmentationMenu"){disable=APP.evaluateMenu("tree",this,canvas,null);}
else{disable=APP.evaluateMenu(this.triggeredFrom,this,canvas,null);}
itemsToDisable.forEach(function(itemToDisable){var item=mItems.get(itemToDisable);if(item){item.setDisabled(disable);}});if(mItems.get("shareProgramFolder")){mItems.get("shareProgramFolder").setDisabled(true);}
else if(mItems.get("share")){mItems.get("share").setDisabled(true);}
if(this.ownerCt&&this.ownerCt.text.search("^View:")!=-1){var ii;for(ii=0;ii<this.items.items.length;ii++){switch(this.items.items[ii].text){case"Create View":this.items.items[ii].setDisabled(true);break;case"Edit Default":this.items.items[ii].setDisabled(true);break;default:break;}}}
this.parentMenu=parentMenu;if(!this.el){this.render();}
if(this.enableScrolling){this.el.setXY(xy);xy[1]=this.constrainScroll(xy[1]);xy=[this.el.adjustForConstraints(xy)[0],xy[1]];}
else{xy=this.el.adjustForConstraints(xy);}
this.el.setXY(xy);this.el.show();Ext.menu.Menu.superclass.onShow.call(this);if(Ext.isIE){this.fireEvent('autosize',this);if(!Ext.isIE8){this.el.repaint();}}
this.hidden=false;this.focus();this.fireEvent('show',this);}}}
if(Mkt3&&Mkt3.controller&&Mkt3.controller.socialApp&&Mkt3.controller.socialApp.SocialApp&&Mkt3.controller.socialApp.SocialApp.prototype&&Mkt3.controller.socialApp.SocialApp.prototype.loadToolbar){var prevSocialAppToolbar=Mkt3.controller.socialApp.SocialApp.prototype.loadToolbar;Mkt3.controller.socialApp.SocialApp.prototype.loadToolbar=function(menu,attr){console.log("Marketo App > Executing: Disable Actions menu for Social Apps in Marketing Activities");prevSocialAppToolbar.apply(this,arguments);var disable=APP.evaluateMenu("socialAppToolbar",null,null,this),mItems=Ext4.ComponentQuery.query("socialAppToolbar contextMenu [action=approve],"+"socialAppToolbar contextMenu [action=clone],"+"socialAppToolbar contextMenu [action=delete],"+"socialAppToolbar contextMenu [action=approveDraft],");mItems.forEach(function(item){if(item){item.setDisabled(disable);}});return menu;}}
if(Mkt3&&Mkt3.controller&&Mkt3.controller.mobilePushNotification&&Mkt3.controller.mobilePushNotification.MobilePushNotification&&Mkt3.controller.mobilePushNotification.MobilePushNotification.prototype&&Mkt3.controller.mobilePushNotification.MobilePushNotification.prototype.loadToolbar){var prevMobilePushNotificationToolbar=Mkt3.controller.mobilePushNotification.MobilePushNotification.prototype.loadToolbar;Mkt3.controller.mobilePushNotification.MobilePushNotification.prototype.loadToolbar=function(menu,attr){console.log("Marketo App > Executing: Disable Actions menu for Push Notifications in Marketing Activities");prevMobilePushNotificationToolbar.apply(this,arguments);var disable=APP.evaluateMenu("mobilePushNotification",null,null,this),mItems=Ext4.ComponentQuery.query("mobilePushNotification contextMenu [action=approve],"+"mobilePushNotification contextMenu [action=unapprove],"+"mobilePushNotification contextMenu [action=clone],"+"mobilePushNotification contextMenu [action=delete],"+"mobilePushNotification contextMenu [action=approveDraft],");mItems.forEach(function(item){if(item){item.setDisabled(disable);}});return menu;}}
if(Ext4&&Ext4.Component&&Ext4.Component.prototype&&Ext4.Component.prototype.showAt){Ext4.Component.prototype.showAt=function(x,y,animate){console.log("Marketo App > Executing: Disable Content & Actions menu for a Nurture Program Stream in Marketing Activities");var me=this;if(!me.rendered&&(me.autoRender||me.floating)){me.doAutoRender();me.hidden=true}
if(me.floating){me.setPosition(x,y,animate)}
else{me.setPagePosition(x,y,animate)}
me.show()
if(MktCanvas&&MktCanvas.getActiveTab()){var ii,disable=APP.evaluateMenu("button",null,MktCanvas.getActiveTab(),null);for(ii=0;ii<me.items.items.length;ii++){switch(me.items.items[ii].action){case"edit":break;case"clone":me.items.items[ii].setDisabled(disable);break;case"activateAllContent":break;case"showArchivedContent":break;case"hideArchivedContent":break;case"editTransitionRules":break;case"delete":me.items.items[ii].setDisabled(disable);break;case"activate":break;case"deactivate":break;case"schedule":break;case"archive":me.items.items[ii].setDisabled(disable);break;case"unarchive":me.items.items[ii].setDisabled(disable);break;case"remove":break;case"emailEditDraft":break;case"emailPreview":break;case"emailApproveDraft":me.items.items[ii].setDisabled(disable);break;case"emailSendTest":break;case"goToEmail":break;case"emailEditDraft":break;case"emailPreviewDraft":break;case"emailSendTestOfDraft":break;case"emailApproveDraft":me.items.items[ii].setDisabled(disable);break;case"programViewAssets":break;case"programViewSetup":break;case"programViewTokens":break;case"programViewMembers":break;case"goToProgram":break;case"mobilePushEditDraft":break;case"mobilePushPreview":break;case"mobilePushApprove":me.items.items[ii].setDisabled(disable);break;case"mobilePushSendTest":break;case"goToPushNotification":break;default:break;}}}}}}
APP.hideToolbarItems=function(){console.log("Marketo App > Hiding: Toolbar Items");if(Ext&&Ext.layout&&Ext.layout.ContainerLayout&&Ext.layout.ContainerLayout.prototype&&Ext.layout.ContainerLayout.prototype.renderItem){Ext.layout.ContainerLayout.prototype.renderItem=function(c,position,target){if(c&&c.topToolbar&&c.topToolbar.items){console.log("Marketo App > Executing: Disable Toolbar items for ALL in ALL");var item,canvas=MktCanvas.getActiveTab(),visible=!APP.evaluateMenu("button",null,canvas,null),itemsToHide=[{"id":"deleteItem","action":"setVisible",},{"id":"deleteSubscription_atxCanvasSubscriptions","action":"setVisible",},{"id":"gotoDeliverability_landingEMDetail","action":"setVisible",},{"id":"deleteCustomToken","action":"setVisible",},{"id":"importMembers","action":"setDisabled",},{"id":"importTemplate_landingCanvasTM","action":"setDisabled",},{"id":"importTemplate_landingTMDetail","action":"setDisabled",},{"id":"gotoDeliverability_landingCanvasEM","action":"setVisible",},{"id":"imageUpload_landingCanvasIM","action":"setDisabled",},{"id":"imageReplace_landingCanvasIM","action":"setVisible",},{"text":"Change Password","action":"setDisabled",},{"text":"Invite New User","action":"setDisabled",},{"text":"Change Password","action":"setDisabled",},{"id":"caadEditButton","action":"setDisabled",},{"id":"caadEditSecurityButton","action":"setDisabled",},{"id":"caadEditRestrictedLoginButton","action":"setDisabled",},{"text":"Invite New User","action":"setDisabled",},{"id":"editLicenses","action":"setVisible",},{"id":"editUser","action":"setVisible",},{"id":"deleteUser","action":"setVisible",},{"id":"resetPassword","action":"setVisible",},{"id":"editRole","action":"setVisible",},{"id":"deleteRole","action":"setVisible",},{"id":"editZone","action":"setVisible",},{"id":"deleteZone","action":"setVisible",},{"id":"editPartition","action":"setVisible",},{"id":"deletePartition","action":"setVisible",},{"text":"Edit IP Settings","action":"setDisabled",},{"text":"Edit Text Editor Settings","action":"setDisabled",},{"text":"Edit Email Editor Settings","action":"setDisabled",},{"id":"addDomain","action":"setDisabled",},{"id":"deleteDomain","action":"setVisible",},{"id":"refreshCadSfdcObjectSync","action":"setDisabled",},{"id":"editVisibleFieldsCadSfdcObjectSync","action":"setVisible",},{"id":"enableSync","action":"setVisible",},{"text":"Edit API Configuration","action":"setDisabled",},{"text":"Edit Settings","action":"setDisabled",},{"id":"issueLicenseCadLisAdmin","action":"setDisabled",},{"id":"revokeLicenseCadLisAdmin","action":"setVisible",},{"id":"resendLicenseCadLisAdmin","action":"setVisible",},{"id":"configAddinCadLisAdmin","action":"setVisible",},{"id":"editRule","action":"setVisible",},{"id":"deleteRule","action":"setVisible",},{"id":"editIpRestriction","action":"setDisabled",},{"id":"editWebinarLogin","action":"setVisible",},{"id":"cadChangeButton","action":"setVisible",},];itemsToHide.forEach(function(itemToHide){if(itemToHide.id){item=c.topToolbar.items.get(itemToHide.id);}
else if(itemToHide.text){item=c.topToolbar.find("text",itemToHide.text)[0];}
if(item){if(itemToHide.id=="gotoDeliverability_landingEMDetail"){item.setVisible(false);}
else if(itemToHide.action=="setVisible"){item.setVisible(visible);}
else if(itemToHide.action=="setDisabled"){item.setDisabled(!visible);}}});}
if(c){if(!c.rendered){c.render(target,position);this.configureItem(c,position);}
else if(!this.isValidParent(c,target)){if(Ext.isNumber(position)){position=target.dom.childNodes[position];}
target.dom.insertBefore(c.getPositionEl().dom,position||null);c.container=target;this.configureItem(c,position);}}}}}
APP.disableAdminSaveButtons=function(){console.log("Marketo App > Disabling: Admin Section Save Buttons");if(Ext&&Ext.Window&&Ext.Window.prototype&&Ext.Window.prototype.show){Ext.Window.prototype.show=function(animateTarget,cb,scope){console.log("Marketo App > Executing: Disable Admin Section Save Buttons");if(MktCanvas&&MktCanvas.getActiveTab()&&MktCanvas.getActiveTab().title){var activeTabTitle=MktCanvas.getActiveTab().title,toDisable,ii,currButton;switch(activeTabTitle){case"Login Settings":toDisable=true;break;case"Roles":toDisable=true;break;case"Workspaces":toDisable=true;break;case"Lead Partitions":toDisable=true;break;case"Location":toDisable=true;break;case"Smart Campaign":toDisable=true;break;case"Communication Limits":toDisable=true;break;case"Tags":toDisable=true;break;case"Field Management":toDisable=true;break;case"Salesforce Objects Sync":toDisable=true;break;case"Salesforce":toDisable=true;break;case"Sales Insight":toDisable=true;break;case"Email Add-in":toDisable=true;break;case"Landing Pages":toDisable=true;break;case"Rules":toDisable=true;break;case"Munchkin":toDisable=true;break;case"Installed Services":toDisable=true;break;case"Webhooks":toDisable=true;break;case"Single Sign-On":toDisable=true;break;case"Revenue Cycle Analytics":toDisable=true;break;case"Treasure Chest":toDisable=true;break;default:break;}
if(toDisable){for(ii=this.buttons.length-1;ii>=0;ii--){currButton=this.buttons[ii];switch(currButton.text){case"Save":currButton.setDisabled(true);break;case"Create":currButton.setDisabled(true);break;case"Apply":currButton.setDisabled(true);break;case"Change":currButton.setDisabled(true);break;case"Disable Global Sync":currButton.setDisabled(true);break;case"Enable Sync":currButton.setDisabled(true);break;case"Disable Sync":currButton.setDisabled(true);break;case"Issue License":currButton.setDisabled(true);break;case"Revoke License":currButton.setDisabled(true);break;case"Resend Invitation":currButton.setDisabled(true);break;case"Delete":currButton.setDisabled(true);break;case"Clone":currButton.setDisabled(true);break;default:break;}}}}
if(!this.rendered){this.render(Ext.getBody());}
if(this.hidden===false){this.toFront();return this;}
if(this.fireEvent('beforeshow',this)===false){return this;}
if(cb){this.on('show',cb,scope,{single:true});}
this.hidden=false;if(Ext.isDefined(animateTarget)){this.setAnimateTarget(animateTarget);}
this.beforeShow();if(this.animateTarget){this.animShow();}
else{this.afterShow();}
return this;}}}
APP.limitNurturePrograms=function(){console.log("Marketo App > Limiting: Nurture Programs");if(Mkt&&Mkt.apps&&Mkt.apps.marketingEvent&&Mkt.apps.marketingEvent.MarketingEventForm&&Mkt.apps.marketingEvent.MarketingEventForm.prototype&&Mkt.apps.marketingEvent.MarketingEventForm.prototype.beforeSubmitCallback){var previousMarketingEventForm=Mkt.apps.marketingEvent.MarketingEventForm.prototype.beforeSubmitCallback;Mkt.apps.marketingEvent.MarketingEventForm.prototype.beforeSubmitCallback=function(){console.log("Marketo App > Executing: Limit Nurture Programs");var limit_exceeded=false,rootNode=MktExplorer.boundTree.root,compType="Nurture Program",matches=[],node=rootNode.cascade(function(){var attr=this.attributes;if(attr&&attr.xtra){if(attr.xtra.compType==compType&&attr.xtra.accessZoneId==MktCanvas.getActiveTab().config.accessZoneId){matches.push(this);}}},undefined,[compType]);if(matches.length>=3){limit_exceeded=true;}
if(limit_exceeded==true){var nutureProgramMessageBox=Ext.MessageBox.show({title:"MarketoLive",msg:"Users are limited to 3 nurture programs each.",width:400,closable:true});nutureProgramMessageBox.show;return false;}else{return previousMarketingEventForm.apply(this,arguments);}}}}
APP.injectAnalyzerNavBar=function(){var isPodsLoaded=window.setInterval(function(){if(typeof(PODS)!=="undefined"){console.log("Marketo App > Injecting: Analyzer Navigation Bar");window.clearInterval(isPodsLoaded);if(typeof(pod)=="undefined"){pod=new PODS.Pod(PODS.getCookie("userPod"));}
for(var y=0;y<pod.valueSet.length;y++){if(currentUrl==pod.valueSet[y].url){console.log("Marketo App > Updating: CSS for Analyzer Navigation Bar");$j=jQuery.noConflict();var currPosition='#'+pod.valueSet[y].position;$j(currPosition).parent().css('display','block');$j(currPosition).parent().siblings().css('display','none');$j(currPosition).removeClass('analyzer-button').addClass('analyzer-title');$j(currPosition).siblings().removeClass('analyzer-title').addClass('analyzer-button');$j("#modeler,#success-path-analyzer,#opportunity-influence-analyzer,#program-analyzer").bind("click",function(e){console.log("Marketo App > Identifying: Current Analyzer");for(var x=0;x<pod.valueSet.length;x++){if(e.target.id==pod.valueSet[x].position)
currPosition=x;}
window.location=pod.valueSet[currPosition].url;});}}}},0);}
APP.overrideSaving=function(){console.log("Marketo App > Overriding: Saving for Nurture Streams");if(Mkt3&&Mkt3.data&&Mkt3.data.Store&&Mkt3.data.Store.prototype&&Mkt3.data.Store.prototype.sync){var prevDataStoreSync=Mkt3.data.Store.prototype.sync;Mkt3.data.Store.prototype.sync=function(){console.log("Marketo App > Executing: Override Saving for Nurture Streams (sync)");if(window.location.href.search("\/#"+mktoCalendarFragment)!=-1){Mkt3.data.Store.prototype.sync=prevDataStoreSync;}
else{var disable;if(MktCanvas&&MktCanvas.getActiveTab()&&APP.getCookie("toggleState")!="false"){disable=APP.evaluateMenu("button",null,MktCanvas.getActiveTab(),null);}
else if(APP.getCookie("toggleState")=="false"){disable=true;}
if(!disable){if(this.autoSyncSuspended){this.autoSync=true;this.autoSyncSuspended=false;}
if(this.getProxy()instanceof Mkt3.data.proxy.AjaxPost){Mkt3.Synchronizer.sync(this);}
else{this.callParent(arguments);}}
else{console.log("Marketo App > Disabling: Saving for Nurture Streams (sync)");}}}}
if(Ext4&&Ext4.data&&Ext4.data.Model&&Ext4.data.Model.prototype&&Ext4.data.Model.prototype.destroy){Ext4.data.Model.prototype.destroy=function(options){console.log("Marketo App > Executing: Override Saving for Nurture Streams (destroy)");var disable;if(MktCanvas&&MktCanvas.getActiveTab()&&APP.getCookie("toggleState")!="false"){disable=APP.evaluateMenu("button",null,MktCanvas.getActiveTab(),null);}
else if(APP.getCookie("toggleState")=="false"){disable=true;}
if(!disable){options=Ext.apply({records:[this],action:'destroy'},options);var me=this,isNotPhantom=me.phantom!==true,scope=options.scope||me,stores=me.stores,i=0,storeCount,store,args,operation,callback;operation=new Ext.data.Operation(options);callback=function(operation){args=[me,operation];if(operation.wasSuccessful()){for(storeCount=stores.length;i<storeCount;i++){store=stores[i];store.remove(me,true);if(isNotPhantom){store.fireEvent('write',store,operation);}}
me.clearListeners();Ext.callback(options.success,scope,args);}
else{Ext.callback(options.failure,scope,args);}
Ext.callback(options.callback,scope,args);};if(isNotPhantom){me.getProxy().destroy(operation,callback,me);}
else{operation.complete=operation.success=true;operation.resultSet=me.getProxy().reader.nullResultSet;callback(operation);}
return me;}
else{console.log("Marketo App > Disabling: Saving for Nurture Streams (destroy)");}}}}
APP.enableSaving=function(){console.log("Marketo App > Enabling: Saving for Editors");if(Mkt3&&Mkt3.data&&Mkt3.data.Store&&Mkt3.data.Store.prototype&&Mkt3.data.Store.prototype.sync){Mkt3.data.Store.prototype.sync=function(){console.log("Marketo App > Executing: Enable Saving for Editors (sync)");if(this.autoSyncSuspended){this.autoSync=true;this.autoSyncSuspended=false;}
if(this.getProxy()instanceof Mkt3.data.proxy.AjaxPost){Mkt3.Synchronizer.sync(this);}else{this.callParent(arguments);}}}
if(Ext4&&Ext4.data&&Ext4.data.Model&&Ext4.data.Model.prototype&&Ext4.data.Model.prototype.destroy){Ext4.data.Model.prototype.destroy=function(options){console.log("Marketo App > Executing: Enable Saving for Editors (destroy)");options=Ext.apply({records:[this],action:'destroy'},options);var me=this,isNotPhantom=me.phantom!==true,scope=options.scope||me,stores=me.stores,i=0,storeCount,store,args,operation,callback;operation=new Ext.data.Operation(options);callback=function(operation){args=[me,operation];if(operation.wasSuccessful()){for(storeCount=stores.length;i<storeCount;i++){store=stores[i];store.remove(me,true);if(isNotPhantom){store.fireEvent('write',store,operation);}}
me.clearListeners();Ext.callback(options.success,scope,args);}else{Ext.callback(options.failure,scope,args);}
Ext.callback(options.callback,scope,args);};if(isNotPhantom){me.getProxy().destroy(operation,callback,me);}else{operation.complete=operation.success=true;operation.resultSet=me.getProxy().reader.nullResultSet;callback(operation);}
return me;}}}
APP.disableSaving=function(){console.log("Marketo App > Disabling: Saving for Editors");if(Mkt3&&Mkt3.data&&Mkt3.data.Store&&Mkt3.data.Store.prototype&&Mkt3.data.Store.prototype.sync){Mkt3.data.Store.prototype.sync=function(){console.log("Marketo App > Executing: Disable Saving for Editors (sync)");};}
if(Ext4&&Ext4.data&&Ext4.data.Model&&Ext4.data.Model.prototype&&Ext4.data.Model.prototype.destroy){Ext4.data.Model.prototype.destroy=function(){console.log("Marketo App > Executing: Disable Saving for Editors (destroy)");};}
if(Mkt3&&Mkt3.controller&&Mkt3.controller.editor&&Mkt3.controller.editor.form&&Mkt3.controller.editor.form.settings&&Mkt3.controller.editor.form.settings.FieldSelection&&Mkt3.controller.editor.form.settings.FieldSelection.prototype&&Mkt3.controller.editor.form.settings.FieldSelection.prototype.deleteFormField){Mkt3.controller.editor.form.settings.FieldSelection.prototype.deleteFormField=function(formField){console.log("Marketo App > Executing: Enable Deleting Form Field");var formFieldWidget=formField.getFieldWidget(),formFieldId,childFieldIndex,childFormField,allFormFields;if(formFieldWidget&&formFieldWidget.get('datatype')==='fieldset'){allFormFields=this.getForm().getFormFields();formFieldId=formField.get('id');for(childFieldIndex=0;childFieldIndex<allFormFields.getCount();childFieldIndex++){childFormField=allFormFields.getAt(childFieldIndex);if(childFormField.get('fieldsetFieldId')==formFieldId){this.deleteFormField(childFormField);}}}
formField.destroy({scope:this,callback:function(field,response){if(response.success){if(formFieldWidget){formFieldWidget.destroy();}}}});this.renumberWidgets();}}}
APP.overlayEmailDesigner=function(){console.log("Marketo App > Overlaying: Email Designer");var logo=APP.getCookie("logo"),color=APP.getCookie("color"),isEmailIframeElement,logoBkg,buttonBkg,logoSwapCompany,logoSwapContainer,logoSwapCompanyContainer;if(logo==null||logo.value==null){logo=defaultTurnerLogoWhite;}
if(color==null||color.value==null){color=defaultColor;}
isEmailIframeElement=window.setInterval(function(){logoBkg=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("logo-bkg"),logoSwapCompany=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("logo-swap-company"),logoSwapContainer=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("logo-swap-container"),logoSwapCompanyContainer=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("logo-swap-company-container");if(logoBkg!=null&&logoSwapCompany!=null){console.log("Marketo App > Overlaying: iframe");window.clearInterval(isEmailIframeElement);logoSwapContainer.style.display="none";logoSwapCompanyContainer.style.display="block";logoSwapCompany.src=logo;}},0);}
APP.overlayLandingPageDesigner=function(){console.log("Marketo App > Overlaying: Landing Page Designer");var logo=APP.getCookie("logo"),color=APP.getCookie("color"),company,companyName,isLandingPageIframeElement,lpLogo,backgroundColor,biggerBackground,subTitle;if(logo==null||logo.value==null){logo=defaultTurnerLogoGreen;companyName="Turner";}
else{company=logo.split("https://logo.clearbit.com/")[1].split(".")[0];companyName=company.charAt(0).toUpperCase()+company.slice(1);}
if(color==null||color.value==null){color=defaultColor;}
isLandingPageIframeElement=window.setInterval(function(){lpLogo=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("lp-logo");backgroundColor=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("background-color");biggerBackground=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("bigger-background");subTitle=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("sub-title");if(lpLogo!=null&&backgroundColor!=null&&biggerBackground!=null&&subTitle!=null){console.log("Marketo App > Overlaying: iframe");window.clearInterval(isLandingPageIframeElement);lpLogo.src=logo;backgroundColor.style.backgroundColor=color;biggerBackground.style.backgroundColor=color;subTitle.innerHTML=companyName+" invites you to join:";}},0);}
APP.openAdBridgeModal=function(){console.log("Marketo App > Opening: Ad Bridge Modal Window");if(document&&document.getElementsByClassName("x-btn-text mkiUserTarget")&&document.getElementsByClassName("x-btn-text mkiUserTarget")[0]&&document.getElementsByClassName("x-btn-text mkiUserTarget")[0].type=="button"){console.log("Marketo App > Executing: Open Ad Bridge Modal Window");document.getElementsByClassName("x-btn-text mkiUserTarget")[0].click();}}
APP.getEmailIds=function(accountString){console.log("Marketo App > Getting: Email IDs for account string: "+accountString);var emIds=[];switch(accountString){case mktoAccountString106:emIds.push(15464);emIds.push(21424);emIds.push(20931);emIds.push(18113,18106,18111,18110);emIds.push(10010,10179,10180,12845,10181,10182,10183,10184);emIds.push(4894,3764,3765,3767,3766,3762);emIds.push(12818,12820,12819,12816,12811,12815,12812,12813,12814,12821,12817,12823);emIds.push(12900,12901,12899,12898);emIds.push(12902,12903,12904);emIds.push(16474,17254,16403);emIds.push(18117,18118,18122,18119,18116,18123,18120,18121,18124);emIds.push(16118,16119,16120,16122,16121,16117);emIds.push(16331,16332,16338,16333,16123,16339,16335,16336,17868);emIds.push(16125,16129,16126,16124,16132,16131,16130,16128,16127,16133,16137,16136);emIds.push(18126);emIds.push(20350,20368)
emIds.push(20327)
emIds.push(20329)
break;case mktoAccountString106a:emIds.push(14240);emIds.push(10171,10173,10172,10169,9957,9974,9968,10174,9972,9973,10170,9962);emIds.push(10010,10179,10180,10181,10182,10183,10184);emIds.push(4894,3764,3765,3767,3766,3762);break;case mktoAccountString106b:emIds.push(13924);emIds.push(12818,12820,12819,12816,12811,12815,12812,12821,12813,12814,12817,12823);emIds.push(10010,10179,10180,12845,10181,10182,10183,10184);emIds.push(4894,3764,3765,3767,3766,3762);break;case mktoAccountString106d:emIds.push(15464);emIds.push(18113,18106,18111,18110);emIds.push(10010,10179,10180,12845,10181,10182,10183,10184);emIds.push(4894,3764,3765,3767,3766,3762);emIds.push(12818,12820,12819,12816,12811,12815,12812,12813,12814,12821,12817,12823);emIds.push(12900,12901,12899,12898);emIds.push(12902,12903,12904);emIds.push(16474,17254,16403);emIds.push(18117,18118,18122,18119,18116,18123,18120,18121,18124);emIds.push(16118,16119,16120,16122,16121,16117);emIds.push(16331,16332,16338,16333,16123,16339,16335,16336,17868);emIds.push(16125,16129,16126,16124,16132,16131,16130,16128,16127,16133,16137,16136);emIds.push(18126);emIds.push(20350,20368)
emIds.push(20327)
emIds.push(20329)
break;default:console.log("Marketp App > Invalid: account string in getEmailIds(): "+accountString);break;}
return emIds;}
if((currentUrl.search(mktoAppDomain)!=-1||currentUrl.search(mktoDesignerDomain)!=-1||currentUrl.search(mktoWizard)!=-1)){console.log("Marketo App > Location: Marketo URL");var isMktPageApp=window.setInterval(function(){if(typeof(MktPage)!=="undefined"){console.log("Marketo App > Location: Marketo Page");var accountString,userId,currUrlFragment,currCompFragment;if(MktPage.savedState&&MktPage.savedState.custPrefix&&MktPage.userid&&Mkt3&&Mkt3.DL&&Mkt3.DL.getDlToken()){window.clearInterval(isMktPageApp);accountString=MktPage.savedState.custPrefix;userId=MktPage.userid.toLowerCase();currUrlFragment=Mkt3.DL.getDlToken();if(Mkt3.DL.dl&&Mkt3.DL.dl.dlCompCode){currCompFragment=Mkt3.DL.dl.dlCompCode;}
if(userId.search("\.demo@marketo.com$")!=-1){userName=userId.split(".demo")[0];}
else{userName=userId.split("@")[0];}}
if(accountString.search(mktoAccountStringsMatch)!=-1||APP.getCookie("toggleState")=="false"){console.log("Marketo App > Location: MarketoLive Instance");window.mkto_live_plugin_state=true;if(userId.search("^admin@mktodemoaccount")!=-1||userId.search("^mktodemoaccount[a-z0-9]*@marketo\.com")!=-1||userId.search("^marketodemo.*@gmail\.com$")!=-1){console.log("Marketo App > User: Admin");APP.disableDemoPluginCheck();if(APP.getCookie("toggleState")!="false"){return;}
else{console.log("Marketo App > User: Admin is now a normal user");}}
APP.disableDemoPluginCheck();if(currUrlFragment==mktoMyMarketoFragment){APP.overrideHomeTiles();}
else if(currUrlFragment==mktoMarketingActivitiesDefaultFragment||currUrlFragment==mktoMarketingActivitiesMarketingFragment||currUrlFragment==mktoMarketingActivitiesJapaneseFragment||currUrlFragment==mktoMarketingActivitiesFinservFragment||currUrlFragment==mktoMarketingActivitiesHealthcareFragment||currUrlFragment==mktoMarketingActivitiesHigherEdFragment||currUrlFragment==mktoLeadDatabaseDefaultFragment||currUrlFragment==mktoLeadDatabaseMarketingFragment||currUrlFragment==mktoLeadDatabaseJapaneseFragment||currUrlFragment==mktoLeadDatabaseFinservFragment||currUrlFragment==mktoLeadDatabaseHealthcareFragment||currUrlFragment==mktoLeadDatabaseHigherEdFragment){APP.disableButtons();}
else if(currUrlFragment==mktoAnalyticsDefaultFragment){APP.overrideAnalyticsTiles();}
else if(currUrlFragment==mktoAdBridgeSmartListFragment){var isAdBridgeSmartList=window.setInterval(function(){if(typeof(document.getElementsByClassName("x-btn-text mkiUserTarget")[0])!=="undefined"){console.log("Marketo App > Location: Ad Bridge Smart List");window.clearInterval(isAdBridgeSmartList);APP.openAdBridgeModal();}},0);}
if(currCompFragment!=mktoEmailDesignerFragment&&currCompFragment!=mktoEmailPreviewFragment&&currCompFragment!=mktoLandingPageDesignerFragment&&currCompFragment!=mktoLandingPagePreviewFragment&&currCompFragment!=mktoFormWizardFragment&&currCompFragment!=mktoMobilePushNotificationWizardFragment&&currCompFragment!=mktoSocialAppWizardFragment&&currCompFragment!=mktoABtestWizardFragment&&currCompFragment!=mktoEmailTestWizardFragment){if(accountString.search(mktoAccountStringsMatch)!=-1){APP.overrideTreeNodeExpand();APP.overrideTreeNodeCollapse();APP.overrideSaving();APP.disableDragAndDrop();APP.disableMenus();APP.hideToolbarItems();APP.disableAdminSaveButtons();APP.overrideSmartCampaignSaving();APP.overrideUpdatePortletOrder();APP.overrideNewProgramCreate();APP.overrideAssetSaveEdit();APP.overrideNewAssetCreate();APP.overrideNewFolders();APP.overrideRenamingFolders();APP.hideFoldersOnImport();APP.disableConfirmationMessage();}
else{APP.overrideSaving();APP.overrideSmartCampaignSaving();APP.overrideUpdatePortletOrder();APP.disableConfirmationMessage();}
if(currUrlFragment==mktoOppInfluenceAnalyzerFragment||currUrlFragment==mktoProgramAnalyzerFragment||currUrlFragment==mktoModeler106Fragment||currUrlFragment==mktoModeler106abFragment||currUrlFragment==mktoSuccessPathAnalyzerFragment){console.log("Marketo App > Location: Analytics");APP.injectAnalyzerNavBar();}
var lpIds={},formIds=[],pushIds=[],socIds=[],emIds=APP.getEmailIds(accountString);switch(accountString){case mktoAccountString106:lpIds["dpageid_11826"]="dpageid_11826";lpIds["dpageid_11822"]="dpageid_11822";lpIds["dpageid_8819"]="dpageid_8819";lpIds["dpageid_8941"]="dpageid_8941";lpIds["dpageid_4876"]="dpageid_4876";lpIds["dpageid_4872"]="dpageid_4872";lpIds["dpageid_4874"]="dpageid_4874";lpIds["dpageid_11856"]="dpageid_11856";lpIds["dpageid_11548"]="dpageid_11548";lpIds["dpageid_11546"]="dpageid_11546";lpIds["dpageid_12420"]="dpageid_12420";lpIds["dpageid_12418"]="dpageid_12418";lpIds["dpageid_11552"]="dpageid_11552";lpIds["dpageid_11550"]="dpageid_11550";lpIds["dpageid_11553"]="dpageid_11553";lpIds["dpageid_12345"]="dpageid_12345";lpIds["dpageid_11556"]="dpageid_11556";lpIds["dpageid_13187"]="dpageid_13187";lpIds["dpageid_13185"]="dpageid_13185";lpIds["dpageid_12709"]="dpageid_12709";lpIds["dpageid_12720"]="dpageid_12720";lpIds["dpageid_12717"]="dpageid_12717";lpIds["dpageid_12719"]="dpageid_12719";lpIds["dpageid_12569"]="dpageid_12569";lpIds["dpageid_12932"]="dpageid_12932";lpIds["dpageid_13165"]="dpageid_13165";lpIds["dpageid_12586"]="dpageid_12586";lpIds["dpageid_12517"]="dpageid_12517";lpIds["dpageid_12250"]="dpageid_12250";lpIds["dpageid_12934"]="dpageid_12934";lpIds["dpageid_12401"]="dpageid_12401";lpIds["dpageid_13167"]="dpageid_13167";lpIds["dpageid_12248"]="dpageid_12248";lpIds["dpageid_12177"]="dpageid_12177";formIds.push(3576,1749,1900);formIds.push(3018,3708,3020,3021);formIds.push(3952,3955,3953);formIds.push(3816,3818,3828);formIds.push(3313,4125,3559);pushIds.push(29,23);pushIds.push(99,216,103,218);pushIds.push(187);pushIds.push(169);pushIds.push(131);socIds.push(586,587,491,484,448);socIds.push(853);socIds.push(1091,1090,1093,1092,1094);socIds.push(1021,1023,1025,1022,1020);socIds.push(860,1024,861,859,858);break;case mktoAccountString106a:lpIds["dpageid_10672"]="dpageid_10672";lpIds["dpageid_10454"]="dpageid_10454";formIds.push(2532,1749,1900);pushIds.push(29,26);break;case mktoAccountString106b:lpIds["dpageid_10760"]="dpageid_10768";lpIds["dpageid_10762"]="dpageid_10762";formIds.push(2472,1749,1900);pushIds.push(2,1);break;case mktoAccountString106d:lpIds["dpageid_11826"]="dpageid_11826";lpIds["dpageid_11822"]="dpageid_11822";lpIds["dpageid_8819"]="dpageid_8819";lpIds["dpageid_8941"]="dpageid_8941";lpIds["dpageid_4876"]="dpageid_4876";lpIds["dpageid_4872"]="dpageid_4872";lpIds["dpageid_4874"]="dpageid_4874";lpIds["dpageid_11856"]="dpageid_11856";lpIds["dpageid_11548"]="dpageid_11548";lpIds["dpageid_11546"]="dpageid_11546";lpIds["dpageid_12420"]="dpageid_12420";lpIds["dpageid_12418"]="dpageid_12418";lpIds["dpageid_11552"]="dpageid_11552";lpIds["dpageid_11550"]="dpageid_11550";lpIds["dpageid_11553"]="dpageid_11553";lpIds["dpageid_12345"]="dpageid_12345";lpIds["dpageid_11556"]="dpageid_11556";lpIds["dpageid_13187"]="dpageid_13187";lpIds["dpageid_13185"]="dpageid_13185";lpIds["dpageid_12709"]="dpageid_12709";lpIds["dpageid_12720"]="dpageid_12720";lpIds["dpageid_12717"]="dpageid_12717";lpIds["dpageid_12719"]="dpageid_12719";lpIds["dpageid_12569"]="dpageid_12569";lpIds["dpageid_12932"]="dpageid_12932";lpIds["dpageid_13165"]="dpageid_13165";lpIds["dpageid_12586"]="dpageid_12586";lpIds["dpageid_12517"]="dpageid_12517";lpIds["dpageid_12250"]="dpageid_12250";lpIds["dpageid_12934"]="dpageid_12934";lpIds["dpageid_12401"]="dpageid_12401";lpIds["dpageid_13167"]="dpageid_13167";lpIds["dpageid_12248"]="dpageid_12248";lpIds["dpageid_12177"]="dpageid_12177";formIds.push(3576,1749,1900);formIds.push(3018,3708,3020,3021);formIds.push(3952,3955,3953);formIds.push(3816,3818,3828);formIds.push(3313,4125,3559);pushIds.push(29,23);pushIds.push(99,216,103,218);pushIds.push(187);pushIds.push(169);pushIds.push(131);socIds.push(586,587,491,484,448);socIds.push(853);socIds.push(1091,1090,1093,1092,1094);socIds.push(1021,1023,1025,1022,1020);socIds.push(860,1024,861,859,858);break;default:break;}
var canDiscardDrafts=window.setInterval(function(){if(typeof(mktLPLManager)!=="undefined"){window.clearInterval(canDiscardDrafts);APP.discardLandingPageDrafts(lpIds);APP.discardEmailDrafts(emIds);APP.discardFormPushDrafts("Form",formIds);APP.discardFormPushDrafts("MobilePushNotification",pushIds);APP.discardFormPushDrafts("SocialApp",socIds);APP.limitNurturePrograms();}},0);}
else if(currCompFragment==mktoLandingPageDesignerFragment){console.log("Marketo App > Location: Landing Page Designer");var customCompanyLandingPage106Fragment="LPE11826",customCompanyLandingPagePreview106Fragment="LPP11826",customCompanyLandingPage106aFragment="LPE10672",customCompanyLandingPagePreview106aFragment="LPP10672",customCompanyLandingPage106bFragment="LPE10768",customCompanyLandingPagePreview106bFragment="LPP10768";switch(currUrlFragment){case customCompanyLandingPage106Fragment:APP.overlayLandingPageDesigner();break;case customCompanyLandingPagePreview106Fragment:APP.overlayLandingPageDesigner();break;case customCompanyLandingPage106aFragment:APP.overlayLandingPageDesigner();break;case customCompanyLandingPagePreview106aFragment:APP.overlayLandingPageDesigner();break;case customCompanyLandingPage106bFragment:APP.overlayLandingPageDesigner();break;case customCompanyLandingPagePreview106bFragment:APP.overlayLandingPageDesigner();break;default:break;}
var isLandingPageDesigner=window.setInterval(function(){if(Mkt3&&Mkt3.app&&Mkt3.app.controllers&&Mkt3.app.controllers.get("Mkt3.controller.editor.LandingPage")&&Mkt3.app.controllers.get("Mkt3.controller.editor.LandingPage").getLandingPage()&&(Mkt3.app.controllers.get("Mkt3.controller.editor.LandingPage").getLandingPage().get("zoneId")==mktoDefaultWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.LandingPage").getLandingPage().get("zoneId")==mktoJapaneseWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.LandingPage").getLandingPage().get("zoneId")==mktoFinservWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.LandingPage").getLandingPage().get("zoneId")==mktoHealthcareWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.LandingPage").getLandingPage().get("zoneId")==mktoHigherEdWorkspaceId)){console.log("Marketo App > Loaded: Landing Page Designer");window.clearInterval(isLandingPageDesigner);APP.disablePropertyPanelSaving();}},0);return;}
else{console.log("Marketo App > Location: Designers/Wizards");var customCompanyEmail106Fragment="EME15464",customCompanyEmail106aFragment="EME14240",customCompanyEmail106bFragment="EME13924",customCompanyHealthcareFragment="EME20327",customCompanyFinservMFragment="EME20350",customCompanyFinservPFragment="EME20368",customCompanyHigherEdFragment="EME20329",loadParameters={filters:[{property:'id',value:Mkt3.DL.dl.compId}],callback:function(records){records.forEach(function(record){if(record.get('zoneId')){var currAssetWorkspaceId=record.get('zoneId');console.log("Marketo App > currAssetWorkspaceId = "+currAssetWorkspaceId);if(currAssetWorkspaceId==mktoDefaultWorkspaceId||currAssetWorkspaceId==mktoJapaneseWorkspaceId||currAssetWorkspaceId==mktoFinservWorkspaceId||currAssetWorkspaceId==mktoHealthcareWorkspaceId||currAssetWorkspaceId==mktoHigherEdWorkspaceId||APP.getCookie("toggleState")=="false"){APP.disableSaving();}}});}};switch(currCompFragment){case mktoEmailDesignerFragment:if(Ext4&&Ext4.getStore('Email')&&Ext4.getStore('Email').load){console.log("Callback for Email Editor");Ext4.getStore('Email').load(loadParameters);}
switch(currUrlFragment){case customCompanyEmail106Fragment:APP.overlayEmailDesigner();break;case customCompanyHealthcareFragment:APP.overlayEmailDesigner();break;case customCompanyFinservMFragment:APP.overlayEmailDesigner();break;case customCompanyFinservPFragment:APP.overlayEmailDesigner();break;case customCompanyHigherEdFragment:APP.overlayEmailDesigner();break;case customCompanyEmail106aFragment:APP.overlayEmailDesigner();break;case customCompanyEmail106bFragment:APP.overlayEmailDesigner();break;default:break;}
break;case mktoFormWizardFragment:if(Ext4&&Ext4.getStore('Form')&&Ext4.getStore('Form').load){console.log("Callback for Form Editor");Ext4.getStore('Form').load(loadParameters);}
break;case mktoMobilePushNotificationWizardFragment:if(Ext4&&Ext4.getStore('MobilePushNotification')&&Ext4.getStore('MobilePushNotification').load){console.log("Callback for Push Notification Editor");Ext4.getStore('MobilePushNotification').load(loadParameters);}
break;case mktoSocialAppWizardFragment:if(Ext4&&Ext4.getStore('SocialApp')&&Ext4.getStore('SocialApp').load){console.log("Callback for Social App Editor");Ext4.getStore('SocialApp').load(loadParameters);}
break;case mktoABtestWizardFragment:var isABtestWizard=window.setInterval(function(){if(Mkt3&&Mkt3.app&&Mkt3.app.controllers&&Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor")&&Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor()&&Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record&&(Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoDefaultWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoJapaneseWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoFinservWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoHealthcareWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoHigherEdWorkspaceId)){console.log("Marketo App > Location: A/B Test Wizard");window.clearInterval(isABtestWizard);APP.disableSaving();}},0);break;case mktoEmailTestWizardFragment:var isEmailTestWizard=window.setInterval(function(){if(Mkt3&&Mkt3.app&&Mkt3.app.controllers&&Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor")&&Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor()&&Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record&&(Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoDefaultWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoJapaneseWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoFinservWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoHealthcareWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoHigherEdWorkspaceId)){console.log("Marketo App > Location: Email Test Group Wizard");window.clearInterval(isEmailTestWizard);APP.disableSaving();}},0);break;default:break;}}
window.onhashchange=function(){console.log("Window: Hash Changed");currentUrl=window.location.href;currUrlFragment=Mkt3.DL.getDlToken();if(Mkt3.DL.dl&&Mkt3.DL.dl.dlCompCode){currCompFragment=Mkt3.DL.dl.dlCompCode;}
if(currUrlFragment==mktoMyMarketoFragment){APP.overrideHomeTiles();}
else if(currUrlFragment==mktoMarketingActivitiesDefaultFragment||currUrlFragment==mktoMarketingActivitiesMarketingFragment||currUrlFragment==mktoMarketingActivitiesJapaneseFragment||currUrlFragment==mktoMarketingActivitiesFinservFragment||currUrlFragment==mktoMarketingActivitiesHealthcareFragment||currUrlFragment==mktoMarketingActivitiesHigherEdFragment||currUrlFragment==mktoLeadDatabaseDefaultFragment||currUrlFragment==mktoLeadDatabaseMarketingFragment||currUrlFragment==mktoLeadDatabaseJapaneseFragment||currUrlFragment==mktoLeadDatabaseFinservFragment||currUrlFragment==mktoLeadDatabaseHealthcareFragment||currUrlFragment==mktoLeadDatabaseHigherEdFragment){APP.disableButtons();}
else if(currUrlFragment==mktoAnalyticsDefaultFragment){APP.overrideAnalyticsTiles();}
if(currCompFragment!=mktoEmailDesignerFragment&&currCompFragment!=mktoEmailPreviewFragment&&currCompFragment!=mktoLandingPageDesignerFragment&&currCompFragment!=mktoLandingPagePreviewFragment&&currCompFragment!=mktoFormWizardFragment&&currCompFragment!=mktoMobilePushNotificationWizardFragment&&currCompFragment!=mktoSocialAppWizardFragment&&currCompFragment!=mktoABtestWizardFragment&&currCompFragment!=mktoEmailTestWizardFragment&&currUrlFragment!=mktoMyMarketoFragment){if(currUrlFragment==mktoOppInfluenceAnalyzerFragment||currUrlFragment==mktoProgramAnalyzerFragment||currUrlFragment==mktoModeler106Fragment||currUrlFragment==mktoModeler106abFragment||currUrlFragment==mktoSuccessPathAnalyzerFragment){console.log("Marketo App > Location: Analytics");APP.injectAnalyzerNavBar();}}}}
else{APP.overrideSuperballMenuItems();if(currUrlFragment==mktoMyMarketoFragment){APP.overrideHomeTiles();}
window.onhashchange=function(){currUrlFragment=Mkt3.DL.getDlToken();if(currUrlFragment==mktoMyMarketoFragment){APP.overrideHomeTiles();}}}
APP.overrideSuperballMenuItems();}},0);}
=======
console.log("Marketo App > Running"),window.mkto_live_plugin_state=!0;var currentUrl=window.location.href,currentProtocol=window.location.protocol,currentHost=window.location.host,mktoAppDomain="^https://app-[a-z0-9]+.marketo.com",mktoAppMatch="https://app-*.marketo.com",mktoLoginDomain="^https://login.marketo.com",mktoAppLoginDomain="^https://app.marketo.com",mktoDesignerDomain="^https://[a-z0-9]+-[a-z0-9]+.marketodesigner.com",mktoDesignerMatch="https://*.marketodesigner.com/*",rtpDemoDomain="^http://sjrtp1.marketo.com/demo/$|^http://cloud4.insightera.com/demo/$",emailDeliverabilityDomain="^https://250ok.com/",mktoWizard=mktoAppDomain+"/m#",mktoEmailDesigner=mktoDesignerDomain+"/ds",mktoLandingPageDesigner=mktoDesignerDomain+"/lpeditor/",defaultTurnerLogoGreen="http://marketolive.com/m3/assets/img/turner-tech-green.png",defaultTurnerLogoWhite="http://marketolive.com/m3/assets/img/turner-tech-white.png",defaultColor="rgb(42, 83, 112)",mktoAccountString106="mktodemoaccount106",mktoAccountString106a="mktodemoaccount106a",mktoAccountString106b="mktodemoaccount106b",mktoAccountString106d="mktodemoaccount106d",mktoAccountStringsMatch="^"+mktoAccountString106+"$|^"+mktoAccountString106a+"$|^"+mktoAccountString106b+"$|^"+mktoAccountString106d+"$",mktoAccountStrings106and106dMatch="^"+mktoAccountString106+"$|^"+mktoAccountString106d+"$",mktoEmailInsightsLink="http://www.marketolive.com/en/analytics/email-insights-summit-demo-1",mktoEmailDeliverabilityToolsLink="https://250ok.com/login",mktoMyMarketoFragment="MM0A1",mktoMarketingActivitiesDefaultFragment="MA15A1",mktoMarketingActivitiesMarketingFragment="MA19802A1",mktoMarketingActivitiesJapaneseFragment="MA19848A1",mktoMarketingActivitiesFinservFragment="MA20806A1",mktoMarketingActivitiesHealthcareFragment="MA20826A1",mktoMarketingActivitiesHigherEdFragment="MA20846A1",mktoLeadDatabaseDefaultFragment="ML0A1ZN2",mktoLeadDatabaseMarketingFragment="ML0A1ZN19788",mktoLeadDatabaseJapaneseFragment="ML0A1ZN19834",mktoLeadDatabaseFinservFragment="ML0A1ZN20792",mktoLeadDatabaseHealthcareFragment="ML0A1ZN20812",mktoLeadDatabaseHigherEdFragment="ML0A1ZN20832",mktoAnalyticsDefaultFragment="AH0A1ZN17",mktoOppInfluenceAnalyzerFragment="AR1559A1!",mktoProgramAnalyzerFragment="AR1544A1!",mktoModeler106Fragment="RCM70A1!",mktoModeler106abFragment="RCM5A1!",mktoSuccessPathAnalyzerFragment="AR1682A1!",mktoAdBridgeSmartListFragment="SL1119566B2LA1",mktoEmailDesignerFragment="EME",mktoEmailPreviewFragment="EMP",mktoLandingPageDesignerFragment="LPE",mktoLandingPagePreviewFragment="LPP",mktoFormWizardFragment="FOE",mktoMobilePushNotificationWizardFragment="MPNE",mktoSocialAppWizardFragment="SOAE",mktoABtestWizardFragment="EBE",mktoEmailTestWizardFragment="CCE",mktoCalendarFragment="CAL",mktoAnalyticsFragment="AR",mktoDefaultWorkspaceId=1,mktoMarketingWorkspaceId=172,mktoJapaneseWorkspaceId=173,mktoFinservWorkspaceId=174,mktoHealthcareWorkspaceId=175,mktoHigherEdWorkspaceId=176,userWorkspaceName="My Workspace",isMktoLiveInstance=!1,userName,pod,APP=APP||{};if(APP.getCookie=function(e){console.log("Marketo App > Getting: Cookie "+e);for(var o,t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++)if(o=a[i].trim(),0==o.indexOf(t))return o.substring(t.length,o.length);return console.log("Marketo App > Getting: Cookie "+e+" not found"),null},APP.disableDemoPluginCheck=function(){console.log("Marketo App > Disabling: Demo Plugin Check"),window&&window.mkto_live_plugin_state&&(window.mkto_live_plugin_state=!0),MktPage&&MktPage.validateDemoPlugin&&(MktPage.validateDemoPlugin=function(){}),isMktoLiveInstance=!0},APP.disablePropertyPanelSaving=function(){console.log("Marketo App > Disabling: Saving of Landing Page Property Panel & Sync Error Message"),Mkt3&&Mkt3.controller&&Mkt3.controller.editor&&Mkt3.controller.editor.LandingPagePropertyPanel&&Mkt3.controller.editor.LandingPagePropertyPanel.prototype&&Mkt3.controller.editor.LandingPagePropertyPanel.prototype.fireSyncProperties&&(Mkt3.controller.editor.LandingPagePropertyPanel.prototype.fireSyncProperties=function(){console.log("Marketo App > Executing: Disable Saving of Landing Page Property Panel & Sync Error Message")})},APP.disableConfirmationMessage=function(){console.log("Marketo App > Disabling: Smart Campaign Delete Confirmation Message"),Mkt&&Mkt.widgets&&Mkt.widgets.DataPanel&&Mkt.widgets.DataPanel.prototype&&Mkt.widgets.DataPanel.prototype.clickClose&&(Mkt.widgets.DataPanel.prototype.clickClose=function(){console.log("Marketo App > Executing: Disable Smart Campaign Delete Confirmation Message");var e=this.hasSettings(),t=!1;if(this.isSmartlist&&this.dpMeta.trigger){var a=this.dpMgr.getTriggers().length;1==a&&(t=!0)}if(e||t){var o=MktLang.getStr("DataFormPanel.Delete_arg0",[this.dpTypeName(!0)]),i=this.dpMeta.displayName||this.dpMeta.name,r=MktLang.getStr("DataFormPanel.Are_you_sure_you_want_to_delete_arg0_arg1",[this.dpTypeName(),MktLang.getDBStr(i)]);t&&(r+=MktLang.getStr("DataFormPanel.Triggered_campaigns_must_contain_trigger_remain_active")),this.dpMgr.isSmartlist&&!this.dpMeta.trigger&&this.dpMgr.smartListRuleLogic.customMode()&&(r+=MktLang.getStr("DataFormPanel.Reminder")+MktLang.getStr("DataFormPanel.Check_your_advanced_filter_rules_after_any_insert_delete_reorder")),MktCanvas&&MktCanvas.getActiveTab()&&MktCanvas.getActiveTab().config&&MktCanvas.getActiveTab().config.accessZoneId?(console.log("Marketo App > Closing: Smart Campaign Delete Confirmation Message"),this._doClose()):Ext4.Msg.confirmDelete({title:o,msg:r,minHeight:300,fn:function(e){"ok"===e&&this._doClose()},scope:this})}else this._doClose()})},APP.overrideHomeTiles=function(){if(console.log("Marketo App > Overriding: My Marketo Home Tiles"),MktCanvas&&MktCanvas.getEl()&&MktCanvas.getEl().dom&&MktCanvas.getEl().dom.nextSibling&&MktCanvas.getEl().dom.nextSibling.childNodes&&MktCanvas.getEl().dom.nextSibling.childNodes[0]&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0]&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0]&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0]&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0]&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0]&&MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes){console.log("Marketo App > Executing: Override My Marketo Home Tiles");var i,r,s,n,l,d,c,e=MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0],t=MktCanvas.lookupComponent(e),a=t.el.dom.textContent.replace(/([a-z])([A-Z])/g,"$1,$2").replace(/([A-Z])([A-Z][a-z])/g,"$1,$2").split(","),o=new RegExp(' href="[^"]*" ',"g");for(c=0;c<a.length;c++)"Email Insights"==a[c]?s=MktCanvas.lookupComponent(e.childNodes[c]):"Deliverability Tools"==a[c]&&(l=MktCanvas.lookupComponent(e.childNodes[c]));s?s.el.dom.outerHTML=s.el.dom.outerHTML.replace(o,' href="'+mktoEmailInsightsLink+'" '):(n='<div class="x4-btn mkt3-homeTile x4-btn-default-small x4-icon-text-left x4-btn-icon-text-left x4-btn-default-small-icon-text-left x-panel" style="height: 150px;" id="homeTile-1084"><em id="homeTile-1084-btnWrap"><a id="homeTile-1084-btnEl" href="'+mktoEmailInsightsLink+'" class="x4-btn-center" target="_blank" role="link" style="width: 150px; height: 150px;"><span id="homeTile-1084-btnInnerEl" class="x4-btn-inner" style="width: 150px; height: 150px; line-height: 150px;">Email Insights</span><span id="homeTile-1084-btnIconEl" class="x4-btn-icon mki3-email-insights-svg"></span></a></em><div class="x-panel-bwrap" id="ext-gen164"><div class="x-panel-body x-panel-body-noheader" id="ext-gen165"></div></div></div>',i=new RegExp("homeTile-1084","g"),r=MktCanvas.lookupComponent(e.childNodes[e.childNodes.length-1]).cloneConfig(),n=n.replace(i,r.id),r.el.dom.outerHTML=n,e.appendChild(e.childNodes[e.childNodes.length-2]),e.appendChild(r.el.dom)),l?l.el.dom.outerHTML=l.el.dom.outerHTML.replace(o,' href="'+mktoEmailDeliverabilityToolsLink+'" '):(d='<div class="x4-btn mkt3-homeTile x4-btn-default-small x4-icon-text-left x4-btn-icon-text-left x4-btn-default-small-icon-text-left" style="height: 150px;" id="homeTile-1036"><em id="homeTile-1036-btnWrap"><a id="homeTile-1036-btnEl" href="'+mktoEmailDeliverabilityToolsLink+'" class="x4-btn-center" target="_blank" role="link" style="width: 150px; height: 150px;"><span id="homeTile-1036-btnInnerEl" class="x4-btn-inner" style="width: 150px; height: 150px; line-height: 150px;">Deliverability Tools</span><span id="homeTile-1036-btnIconEl" class="x4-btn-icon mki3-mail-sealed-svg"></span></a></em></div>',i=new RegExp("homeTile-1036","g"),r=MktCanvas.lookupComponent(e.childNodes[e.childNodes.length-1]).cloneConfig(),d=d.replace(i,r.id),r.el.dom.outerHTML=d,e.appendChild(e.childNodes[e.childNodes.length-2]),e.appendChild(r.el.dom))}},APP.overrideSuperballMenuItems=function(){console.log("Marketo App > Overriding: Superball Menu Items"),MktPage&&MktPage.showSuperMenu&&(MktPage.showSuperMenu=function(){console.log("Marketo App > Executing: Override Superball Menu Items");var e=Ext.get(Ext.DomQuery.selectNode(".mkt-app-logo")),t=e.menu,a=55;if(!t&&(t=e.menu=Ext4.widget("appNavigationMenu",{listeners:{boxready:function(o){var i=e.getRegion();i.bottom>a&&(o.setBodyStyle("padding-top",i.bottom-a+10+"px"),o.updateLayout()),t.setZIndex(e.getStyle("zIndex")-5)},beforerender:function(e){e.addCls(e.componentCls+"-hidden")},show:function(t){t.removeCls(t.componentCls+"-hidden"),e.ignoreNextClick=!0,e.removeClass(e.attentionCls),MktPage.savedState.isUsedSuperMenu||(MktPage.savedState.isUsedSuperMenu=!0,MktSession.ajaxRequest("user/saveUserPref",{serializeParms:{key:"isUsedSuperMenu",data:MktPage.savedState.isUsedSuperMenu}}))},beforehide:function(e){e.addCls(e.componentCls+"-hidden")},hide:function(){(function(){e.ignoreNextClick=!1}).defer(250)}}}),t&&t.items&&t.items.items)){console.log("Marketo App > Working: Override Superball Menu Items");var o,i,r,s,n;for(o=0;o<t.items.items.length;o++)i=t.items.items[o],"Email Insights"==i.text?r=i:"Deliverability Tools"==i.text&&(s=i);r?(r.href=mktoEmailInsightsLink,r.update()):(n=t.items.items[0].cloneConfig(),n.setText("Email Insights"),n.setIconCls("mki3-email-insights-svg"),n.href=mktoEmailInsightsLink,n.hrefTarget="_blank",n.update(),t.add(n)),s?(s.href=mktoEmailDeliverabilityToolsLink,s.update()):(n=t.items.items[0].cloneConfig(),n.setText("Deliverability Tools"),n.setIconCls("mki3-mail-sealed-svg"),n.href=mktoEmailDeliverabilityToolsLink,n.hrefTarget="_blank",n.update(),t.add(n))}t.isVisible()||e.ignoreNextClick||(t.showAt(0,a),t.setZIndex(e.getStyle("zIndex")-5))})},APP.overrideAnalyticsTiles=function(){console.log("Marketo App > Overriding: Analytics Tiles");var e=window.setInterval(function(){if("undefined"!=typeof MktPage&&"undefined"!=typeof MktCanvas&&"undefined"!=typeof MktCanvas.getActiveTab().config.mkt3XType&&(window.clearInterval(e),MktPage&&MktPage.savedState&&-1!=MktPage.savedState.custPrefix.search(mktoAccountStrings106and106dMatch)&&MktCanvas&&MktCanvas.getActiveTab()&&MktCanvas.getActiveTab().config&&"analyticsHome"==MktCanvas.getActiveTab().config.mkt3XType&&MktCanvas.getActiveTab().config.accessZoneId==mktoDefaultWorkspaceId&&MktCanvas.getActiveTab().el&&MktCanvas.getActiveTab().el.dom&&MktCanvas.getActiveTab().el.dom.childNodes&&MktCanvas.getActiveTab().el.dom.childNodes[0]&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1]&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0]&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0]&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0]&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0]&&MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes)){console.log("Marketo App > Executing: Analytics Tiles");var t,a,o=MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes,i="https://app-sjp.marketo.com";for(t=0;t<o.length;t++)if(o[t]&&o[t].outerHTML&&o[t].textContent)switch(a=o[t].outerHTML,o[t].textContent){case"Email Performance":a='<a href="'+i+'/#AR3866B2">'+a+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a;break;case"Lead Performance":a='<a href="'+i+'/#AR3874B2">'+a+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a;break;case"Web Page Activity":a='<a href="'+i+'/#AR3876B2">'+a+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a;break;case"Opportunity Influence Analyzer":a='<a href="'+i+'/#AR1559A1">'+a+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a;break;case"Program Analyzer":a='<a href="'+i+'/#AR1544A1">'+a+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a;break;case"Success Path Analyzer":a='<a href="'+i+'/#AR1682A1">'+a+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a;break;case"Revenue Explorer":break;case"Email Insights":var r=new RegExp(' href="[^"]*" ',"g");a=a.replace(r,' href="'+mktoEmailInsightsLink+'" '),MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a;break;case"Engagement Stream Performance":a='<a href="'+i+'/#AR3881B2">'+a+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a;break;case"Program Performance":a='<a href="'+i+'/#AR3882B2">'+a+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a;break;case"Email Link Performance":a='<a href="'+i+'/#AR3886B2">'+a+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a;break;case"Social Influence":break;case"Leads By Revenue Stage":a='<a href="'+i+'/#AR3889B2">'+a+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a;break;case"Landing Page Performance":a='<a href="'+i+'/#AR3891B2">'+a+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a;break;case"Leads By Status":a='<a href="'+i+'/#AR3893B2">'+a+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a;break;case"Company Web Activity":a='<a href="'+i+'/#AR3901B2">'+a+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a;break;case"Sales Insight Email Performance":a='<a href="'+i+'/#AR3903B2">'+a+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=a}}},0)},APP.overrideSmartCampaignSaving=function(){console.log("Marketo App > Overriding: Saving for Smart Campaigns"),Mkt&&Mkt.widgets&&Mkt.widgets.DataPanelManager&&Mkt.widgets.DataPanelManager.prototype&&Mkt.widgets.DataPanelManager.prototype.save&&(Mkt.widgets.DataPanelManager.prototype.save=function(e,t,a){console.log("Marketo App > Executing: Override Saving for Smart Campaigns"),this._updateDataPanelOrder(!0);var o=MktCanvas.getActiveTab();if(APP.evaluateMenu("button",null,o,null)||"false"==APP.getCookie("toggleState"))console.log("Marketo App > Disabling: Saving for Smart Campaigns");else{if(this.saveQueue.blockingSaveInProgress)return this.saveQueue.pendingChangesCount++,this.saveQueue.dataPanelMetas=this._serializeDataPanels(),void(this.saveQueue.dataPanelCount=this.countDataPanels());var i;if(i=this.saveQueue.dataPanelMetas?this.saveQueue.dataPanelMetas:this._serializeDataPanels(),this.saveQueue.pendingChangesCount=0,this.saveQueue.dataPanelMetas=null,this.saveQueue.dataPanelCount=0,null===i)return;if(0===i.length&&this.isFlow,this.dpSubtype!=DPConst.RUN_ACTION&&i){if(this.lastSave.dataPanelMetas&&this.lastSave.dataPanelMetas==i)return;if(this.lastSave.dataPanelMetasUpdated&&this.lastSave.dataPanelMetasUpdated==i)return}console.debug("Saving "+this.dpType+":",MktFormat.formatJsonStr(i)),DPDEBUG&&(console.debug("Current Save:",i),this.lastSave.dataPanelMetas&&console.debug("Previous Save:",this.lastSave.dataPanelMetas),this.lastSave.dataPanelMetasUpdated&&console.debug("Previous Update:",this.lastSave.dataPanelMetasUpdated)),this.lastSave.acceptUpdates=a,this.lastSave.dataPanelMetas=i,this.saveQueue.blockingSaveInProgress=!0,this.beforeSaveMessage();var r=Ext.apply({dataPanelMetas:i,accessZoneId:this.accessZoneId},this.baseSaveParams);if(this.isSmartlist&&this.smartListRuleLogic.customMode())if(this.smartListRuleLogic.isCustomLogicValid()){var s=this.smartListRuleLogic.getSmartListLogicSaveParams();Ext.apply(r,s)}else console.debug("Data panel save successful. Custom rule logic is not valid");r[this.appVarsBase+"Id"]=this.dataPanelStorageId,this.beforeSaveHook(),DPDEBUG&&console.debug("Saving... ",r),MktSession.ajaxRequest(this.saveAction,{serializeParms:r,onMySuccess:this.saveSuccess.createDelegate(this),onMyFailure:this.saveFailure.createDelegate(this)})}})},APP.overrideSmartCampaignCanvas=function(){console.log("Marketo App > Overriding: Smart Campaign Canvases"),Mkt&&Mkt.widgets&&Mkt.widgets.DataPanelLayout&&Mkt.widgets.DataPanelLayout.prototype&&Mkt.widgets.DataPanelLayout.prototype.initComponent&&(Mkt.widgets.DataPanelLayout.prototype.initComponent=function(){if(console.log("Marketo App > Executing: Override Smart Campaign Canvases"),MktCanvas&&MktCanvas.getActiveTab()&&MktCanvas.getActiveTab().config&&MktCanvas.getActiveTab().config.accessZoneId==mktoDefaultWorkspaceId&&(console.log("Marketo App > Enabling: Smart Campaign Canvases"),this.dpEditable=!0),DPDEBUG=!1,this.dpSubtype&&this.addClass("mktDataPanelLayout-"+this.dpSubtype),this.canvas&&MktCanvas.mask(this.canvas),"Smartlist"==this.dpType?(this.isSmartlist=!0,this.Flow=!1,this.SETTINGS="conditions"):"Flow"==this.dpType&&(this.isSmartlist=!1,this.isFlow=!0,this.SETTINGS="actions"),this.items=[],this.items.push({region:"center",margins:MktPage.isFeatureEnabled("carbolt")?"":"7 5 10 10",layout:"fit",items:this.createManager()}),this.dpEditable&&this.canvas&&this.paletteWidth>0){this.canvasWidth=MktCanvas.getWidth();var e=Math.min(this.canvasWidth-700,this.maxPaletteWidth);this.paletteWidth=Math.max(this.paletteWidth,e),this.items.push({cls:"mktEastPanel",region:"east",margins:MktPage.isFeatureEnabled("carbolt")?"0 0 0 15":"5 5 5 8",layout:"fit",width:this.paletteWidth,items:this.createPalette()})}Mkt.widgets.DataPanelLayout.superclass.initComponent.apply(this),this.canvas&&MktPage.canvasCleanupStack.push(this.canvasCleanup.createDelegate(this)),this.canvas&&this.extendCanvasToolbar(),this.canvas&&this.extendCanvasGutter(),this.canvas&&MktCanvas.addHook(this.canvas,{dp:this})})},APP.overrideUpdatePortletOrder=function(){console.log("Marketo App > Overriding: Updating of Portlet Order"),Mkt&&Mkt.apps&&Mkt.apps.localasset&&Mkt.apps.localasset.LocalAssetPortal&&Mkt.apps.localasset.LocalAssetPortal.prototype&&Mkt.apps.localasset.LocalAssetPortal.prototype.updatePortletOrder&&(console.log("Marketo App > Executing: Override Updating of Portlet Order"),Mkt.apps.localasset.LocalAssetPortal.prototype.updatePortletOrder=function(e){var t=MktCanvas.getActiveTab(),a=APP.evaluateMenu("button",null,t,null);if(a)console.log("Marketo App > Disabling: Updating of Portlet Order");else{for(var o=[],i=0;i<this.items.length;i++){var r=this.items.get(i).smartCampaignMetaData;o.push(r.compTypeId+":"+r.compId)}var s={compId:this.programId,portletOrdering:Ext.encode(o)};MktSession.ajaxRequest("marketingEvent/orderLocalAssetPortlets",{serializeParms:s,localAssetManager:this,portletOrdering:o,onMySuccess:this.updatePortletOrderSuccess})}})},APP.discardLandingPageDrafts=function(e){if(console.log("Marketo App > Discarding: Landing Page Drafts"),mktLPLManager&&mktLPLManager.doModifyPages){console.log("Marketo App > Executing: Discard Landing Page Drafts");var t=Ext.MessageBox.show({title:"Marketo Live",msg:"Discarding Landing Page Drafts",progress:!1,wait:!1,width:270,closable:!1});mktLPLManager.doModifyPages("revert",e),t&&t.hide&&t.hide()}},APP.discardEmailDrafts=function(e){if(console.log("Marketo App > Discarding: Email Drafts"),mktEmManager&&mktEmManager.discardDraft){console.log("Marketo App > Executing: Discard Email Drafts");var t=Ext.MessageBox.show({title:"Marketo Live",msg:"Discarding Email Drafts",progress:!1,wait:!1,width:270,closable:!1});mktEmManager.discardDraft(e),t&&t.hide&&t.hide()}},APP.discardFormPushDrafts=function(e,t){if(console.log("Marketo App > Discarding: "+e+" Drafts"),Ext4&&Ext4.getStore&&Ext4.create&&Mkt3){console.log("Marketo App > Executing: Discard "+e+" Drafts");var a=Ext4.getStore(e);MktMessage&&MktMessage.showSystemError&&(MktMessage.showSystemError=function(){}),"undefined"!=typeof Mkt3&&(a||(a=Ext4.create("Mkt3.store."+e,{storeId:e})),a.load({filters:[{property:"id",value:t}],callback:function(e){for(var t=0;t<e.length;t++){var a=e[t];a.discard(function(e){e&&a.updateNode()},this)}}}))}},APP.overrideTreeNodeExpand=function(){console.log("Marketo App > Overriding: Tree Node Expand"),MktAsyncTreeNode&&MktAsyncTreeNode.prototype&&MktAsyncTreeNode.prototype.expand&&userName&&(MktAsyncTreeNode.prototype.expand=function(){console.log("Marketo App > Executing: Tree Node Expand");var t,e=this.attributes;if(this.text==userWorkspaceName||this.parentNode.text==userWorkspaceName&&1==this.attributes.system||null!=this.parentNode.parentNode&&this.parentNode.parentNode.text==userWorkspaceName&&1==this.attributes.system)for(t=0;t<this.childNodes.length;t++)0==this.childNodes[t].attributes.system&&this.childNodes[t].text.toLowerCase()!==userName&&(this.childNodes[t].hidden=!0);e.folder&&(e.cancelFirstExpand?delete this.attributes.cancelFirstExpand:this.childNodes&&this.childNodes.length>0&&!e.mktExpanded&&this.text!=userWorkspaceName&&this.parentNode.text!=userWorkspaceName&&null!=this.parentNode.parentNode&&this.parentNode.parentNode.text!=userWorkspaceName&&(console.log("Marketo App > Saving: Folder Expand State"),MktFolder.saveExpandState(this,!0))),MktAsyncTreeNode.superclass.expand.apply(this,arguments),e.mktExpanded=!0})},APP.overrideTreeNodeCollapse=function(){console.log("Marketo App > Overriding: Tree Node Collapse"),MktAsyncTreeNode&&MktAsyncTreeNode.prototype&&MktAsyncTreeNode.prototype.collapse&&userName&&(MktAsyncTreeNode.prototype.collapse=function(){console.log("Marketo App > Executing: Tree Node Collapse");var t,e=this.attributes;if(this.text==userWorkspaceName||this.parentNode.text==userWorkspaceName&&1==this.attributes.system||null!=this.parentNode.parentNode&&this.parentNode.parentNode.text==userWorkspaceName&&1==this.attributes.system)for(t=0;t<this.childNodes.length;t++)0==this.childNodes[t].attributes.system&&this.childNodes[t].text.toLowerCase()!==userName&&(this.childNodes[t].ui.elNode.hidden=!0);e.suppressAjaxCollapse?delete this.attributes.suppressAjaxCollapse:isDefined(e.folder)&&e.folder&&e.mktExpanded===!0&&MktFolder.saveExpandState(this,!1),MktTreeNode.superclass.collapse.apply(this,arguments),e.mktExpanded=!1})},APP.overrideNewProgramCreate=function(){console.log("Marketo App > Overriding: New Program/Segmentation Creation"),Mkt&&Mkt.widgets&&Mkt.widgets.ModalForm&&Mkt.widgets.ModalForm.prototype&&Mkt.widgets.ModalForm.prototype.okButtonHandler&&userName&&(Mkt.widgets.ModalForm.prototype.okButtonHandler=function(){if(console.log("Marketo App > Executing: New Program/Segmentation Creation"),"New Program"==this.title||"New Segmentation"==this.title){var e;if("New Program"==this.title){if(this.getInputItems())if(this.getInputItems()[1]&&"Name"==this.getInputItems()[1].fieldLabel)-1==this.getInputItems()[1].getValue().toLowerCase().search(userName+"$")&&this.getInputItems()[1].setValue(this.getInputItems()[1].getValue()+" - "+userName);else for(e=0;e<this.getInputItems().length;e++)this.getInputItems()[e]&&"Name"==this.getInputItems()[e].fieldLabel&&-1==this.getInputItems()[e].getValue().toLowerCase().search(userName+"$")&&this.getInputItems()[e].setValue(this.getInputItems()[e].getValue()+" - "+userName)}else if("New Segmentation"==this.title&&this.findByType("textfield"))if(this.findByType("textfield")[0]&&"Name"==this.findByType("textfield")[0].fieldLabel)-1==this.findByType("textfield")[0].getValue().toLowerCase().search(userName+"$")&&this.findByType("textfield")[0].setValue(this.findByType("textfield")[0].getValue()+" - "+userName);else for(e=0;e<this.findByType("textfield").length;e++)this.findByType("textfield")[e]&&"Name"==this.findByType("textfield")[e].fieldLabel&&-1==this.findByType("textfield")[e].getValue().toLowerCase().search(userName+"$")&&this.findByType("textfield")[e].setValue(this.findByType("textfield")[e].getValue()+" - "+userName)}if(!this.submitInProgress&&this.beforeSubmitCallback()!==!1&&(this.okCallback&&isFunction(this.okCallback)&&this.okCallback(),this.submitUrl)){this.showProgressModal?(this.hide(),this.progressModal=Ext.MessageBox.show({title:MktLang.getStr("ModalForm.Please_wait"),msg:this.progressMsg,progress:!0,wait:!0,width:200,closable:!1})):MktSession.clockCursor(),this.submitInProgress=!0,this.enableOkCancelButton(!this.submitInProgress),this.serializeJSON&&(this.serializeParms=this.serializeParms||{},this.serializeParms._json=Ext.encode(this.serializeJSON));var t=Ext.apply({},this.serializeParms,this.baseParams);MktSession.ajaxRequest(this.submitUrl,{serializeParms:t,onMySuccess:this.submitSuccessHandler.createDelegate(this),onMyFailure:this.submitFailedHandler.createDelegate(this)})}})},APP.overrideAssetSaveEdit=function(){console.log("Marketo App > Overriding: Asset Save Edit"),Mkt&&Mkt.widgets&&Mkt.widgets.CanvasHeader&&Mkt.widgets.CanvasHeader.prototype&&Mkt.widgets.CanvasHeader.prototype.saveEdit&&(Mkt.widgets.CanvasHeader.prototype.saveEdit=function(){if(MktCanvas&&MktCanvas.getActiveTab()&&MktCanvas.getActiveTab().config&&MktCanvas.getActiveTab().config.accessZoneId&&userName){console.log("Marketo App > Executing: Asset Save Edit");var e=MktCanvas.getActiveTab().config.accessZoneId;if(e!=mktoDefaultWorkspaceId&&e!=mktoJapaneseWorkspaceId&&e!=mktoFinservWorkspaceId&&e!=mktoHealthcareWorkspaceId&&e!=mktoHigherEdWorkspaceId){var t=!1;if((-1!=MktExplorer.getEl().dom.ownerDocument.title.search("Marketing Activities")&&("mpTEName"==this.titleId||"cdhTEName"==this.titleId||"pname"==this.titleId)||-1==MktExplorer.getEl().dom.ownerDocument.title.search("Marketing Activities"))&&(MktCanvas.getActiveTab().config.accessZoneId==mktoMarketingWorkspaceId&&"pname"==this.titleId&&this.titleValue==userName&&(t=!0),-1==this.getTitleField().getValue().toLowerCase().search(userName+"$")&&this.getTitleField().setValue(this.getTitleField().getValue()+" - "+userName)),t){var a=!1;MktSession.clockCursor(!0),this.getTitleField().setValue(this.titleValue);var o=MktCanvas.getActiveTab(),i=null;if(o.config.expNodeId){var r=MktExplorer.getNodeById(o.config.expNodeId);if(r&&r.attributes.compType){var s=r.attributes.compType;"Marketing Program"==s&&(i=o.config.expNodeId),"Image"==s&&(a=!1)}}var n=this.getEl(),l=this,d=this.formPanel,c=this.viewPanel;d.hide(!0,.2),c.show(!0,.2),c.body.update(l.viewTemplate.apply(l)),n.animate({height:{from:this.getHeight(),to:this.origHeight}},.25,function(){l.setHeight(l.origHeight),l.body.setHeight(l.origHeight),isFunction(l.savedCallback)&&l.savedCallback()}),MktSession.unclockCursor(),this._saveInProgress=!1}else{var a=!0;MktSession.clockCursor(!0),this.serializeParms[this.titleId]=this.getTitleField().getValue(),this.serializeParms[this.descId]=this.getDescField().getValue(),this.newTitleValue=MktPage.isFeatureEnabled("treeEncoding")?this.serializeParms[this.titleId]:Ext.util.Format.htmlEncode(this.serializeParms[this.titleId]),this.newDescValue=Ext.util.Format.htmlEncode(this.serializeParms[this.descId]),this.updateCanvasConfig(),this.prevTitleValue=this.titleValue,this.titleValue=this.newTitleValue,this.descValue=this.newDescValue,MktPage.updateFullTitle();var o=MktCanvas.getActiveTab();o.updateTabTitle(this.titleValue);var i=null;if(o.config.expNodeId){var r=MktExplorer.getNodeById(o.config.expNodeId);if(r&&r.attributes.compType){var s=r.attributes.compType;"Marketing Program"==s&&(i=o.config.expNodeId,MktExplorer.lockSubTree(i)),"Image"==s&&(a=!1)}a&&MktExplorer.updateNodeText(o.config.expNodeId,this.titleValue)}var n=this.getEl(),l=this,d=this.formPanel,c=this.viewPanel;d.hide(!0,.2),c.show(!0,.2),c.body.update(l.viewTemplate.apply(l)),n.animate({height:{from:this.getHeight(),to:this.origHeight}},.25,function(){l.setHeight(l.origHeight),l.body.setHeight(l.origHeight),isFunction(l.savedCallback)&&l.savedCallback()}),MktSession.unclockCursor(),this._saveInProgress=!0,MktSession.ajaxRequest(this.actionUrl,{serializeParms:this.serializeParms,containerId:this.id,onMySuccess:this.saveResponse.createDelegate(this,[i],!0),onMyError:this.saveError.createDelegate(this,[i])})}}if(e==mktoDefaultWorkspaceId||e==mktoJapaneseWorkspaceId||e==mktoFinservWorkspaceId||e==mktoHealthcareWorkspaceId||e==mktoHigherEdWorkspaceId){var a=!1;MktSession.clockCursor(!0),this.getTitleField().setValue(this.titleValue);var o=MktCanvas.getActiveTab(),i=null;if(o.config.expNodeId){var r=MktExplorer.getNodeById(o.config.expNodeId);if(r&&r.attributes.compType){var s=r.attributes.compType;"Marketing Program"==s&&(i=o.config.expNodeId),"Image"==s&&(a=!1)}}var n=this.getEl(),l=this,d=this.formPanel,c=this.viewPanel;d.hide(!0,.2),c.show(!0,.2),c.body.update(l.viewTemplate.apply(l)),n.animate({height:{from:this.getHeight(),to:this.origHeight}},.25,function(){l.setHeight(l.origHeight),l.body.setHeight(l.origHeight),isFunction(l.savedCallback)&&l.savedCallback()}),MktSession.unclockCursor(),this._saveInProgress=!1}}})},APP.overrideNewAssetCreate=function(){console.log("Marketo App > Overriding: New Asset Creation"),Mkt3&&Mkt3.controller&&Mkt3.controller.lib&&Mkt3.controller.lib.AbstractModalForm&&Mkt3.controller.lib.AbstractModalForm.prototype&&Mkt3.controller.lib.AbstractModalForm.prototype.onSubmit&&userName&&(Mkt3.controller.lib.AbstractModalForm.prototype.onSubmit=function(e){
if(console.log("Marketo App > Executing: New Asset Creation"),(null==e||null==e.ownerAsset||null==e.ownerAsset.isOneOfProgramTypes||0==e.ownerAsset.isOneOfProgramTypes())&&null!=this&&null!=this.getField("name")&&null!=this.getField("name").getValue()){var t=this.getField("name").getValue();-1==t.toLowerCase().search(userName+"$")&&this.getField("name").setValue(t+" - "+userName)}e=e.isXType("modalForm")?e:e.up("modalForm"),e.setSubmitting(!0),this.validate(e)?this.application.fireEvent(this.widgetId+"BeforeSubmit",e?e.getRecord():null)!==!1?this.submit(e)!==!1&&this.submitComplete(e):e.setSubmitting(!1):(e.showDefaultMessage(),e.setSubmitting(!1))})},APP.overrideNewFolders=function(){console.log("Marketo App > Overriding: New Folders"),MktMa&&MktMa.newProgramFolderSubmit&&userName&&(MktMa.newProgramFolderSubmit=function(e,t,a){console.log("Marketo App > Executing: New Folders in Marketing Activities"),MktSession.clockCursor(!0);var o={};(-1!=this.currNode.parentNode.attributes.compType.search("Folder$")&&-1==e.toLowerCase().search(userName+"$")||e==userName)&&(e=e+" - "+userName),o.text=e,o.parentId=t,o.tempNodeId=a,MktSession.ajaxRequest("explorer/createProgramFolder",{serializeParms:o,onMySuccess:MktMa.newProgramFolderDone,onMyFailure:function(e){var t=MktExplorer.getNodeById(e);t&&t.remove()}.createDelegate(this,[a])}),MktMa.currNode&&MktMa.currNode.unselect()}),MktFolder&&MktFolder.newFolderSubmit&&userName&&(MktFolder.newFolderSubmit=function(e,t,a){console.log("Marketo App > Executing: New Folders"),MktSession.clockCursor(!0);var o={};(-1==e.toLowerCase().search(userName+"$")||e==userName)&&(e=e+" - "+userName),o.text=e,o.parentNodeId=t,o.tempNodeId=a,MktSession.ajaxRequest("folder/createFolderSubmit",{serializeParms:o,onMySuccess:MktFolder.newFolderSubmitDone.createDelegate(this,[a]),onMyFailure:function(e){var t=MktExplorer.getNodeById(e);t&&t.remove()}.createDelegate(this,[a])})})},APP.overrideRenamingFolders=function(){console.log("Marketo App > Overriding: Renaming Folders"),MktMa&&MktMa.renameProgramFolderSubmit&&userName&&(MktMa.renameProgramFolderSubmit=function(e,t,a){console.log("Marketo App > Executing: Renaming Folders in Marketing Activities"),MktSession.clockCursor(!0);var o=MktExplorer.getNodeById(a),i={};t==userName&&1==this.currNode.parentNode.attributes.system&&this.currNode.attributes.accessZoneId==mktoMarketingWorkspaceId?(o&&o.setText(t),MktSession.unclockCursor()):((-1==(-1!=this.currNode.parentNode.attributes.compType.search("Folder$")&&e.toLowerCase().search(userName+"$"))||e==userName)&&(e=e+" - "+userName,o&&o.setText(e)),i.origProgramName=t,i.newProgramName=e,i.folderId=a,MktSession.ajaxRequest("explorer/renameProgramFolder",{serializeParms:i,onMySuccess:MktMa.renameProgramFolderSubmitDone,onMyFailure:function(e,t){var a=MktExplorer.getNodeById(e);a&&a.setText(t)}.createDelegate(this,[a,t])}))}),MktFolder&&MktFolder.renameFolderSubmit&&userName&&(MktFolder.renameFolderSubmit=function(e,t,a){console.log("Marketo App > Executing: Renaming Folders"),MktSession.clockCursor(!0);var o={};t==userName&&1==this.currNode.parentNode.attributes.system&&this.currNode.attributes.accessZoneId==mktoMarketingWorkspaceId?(MktFolder.currNode.setText(t),MktSession.unclockCursor()):((-1==e.toLowerCase().search(userName+"$")||e==userName)&&(e=e+" - "+userName,MktFolder.currNode.setText(e)),o.text=e,o.nodeId=a,MktSession.ajaxRequest("folder/renameFolderSubmit",{serializeParms:o,onMySuccess:MktFolder.renameFolderSubmitDone.createDelegate({parms:o,startValue:t}),onMyFailure:function(){MktFolder.currNode.setText(t)}.createDelegate(this)}))})},APP.hideFoldersOnImport=function(){console.log("Marketo App > Hiding: Folders On Program Import via Override"),Ext&&Ext.form&&Ext.form.ComboBox&&Ext.form.ComboBox.prototype&&Ext.form.ComboBox.prototype.onTriggerClick&&userName&&(Ext.form.ComboBox.prototype.onTriggerClick=function(){if(console.log("Marketo App > Executing: Hide Folders On Program Import via Override"),!this.readOnly&&!this.disabled)if(this.isExpanded())this.collapse(),this.el.focus();else{if(this.onFocus({}),"all"==this.triggerAction){if(this.doQuery(this.allQuery,!0),this&&this.label&&this.label.dom&&"Campaign Folder:"==this.label.dom.textContent&&MktCanvas&&MktCanvas.getActiveTab()&&MktCanvas.getActiveTab().config&&MktCanvas.getActiveTab().config.accessZoneId==mktoMarketingWorkspaceId){console.log("Marketo App > Executing: Hide Campaign Folders On Program Import via Override");var e;for(e=0;e<this.view.all.elements.length;e++)this.view.all.elements[e].textContent.toLowerCase()!=userName&&(this.view.all.elements[e].hidden=!0)}}else this.doQuery(this.getRawValue());this.el.focus()}})},APP.hidePageGrid=function(){console.log("Marketo App > Hiding: Page Grid via Override"),MktGrids&&MktGrids.CanvasGridPanel&&MktGrids.CanvasGridPanel.prototype&&MktGrids.CanvasGridPanel.prototype.loadPagedGrid&&(MktGrids.CanvasGridPanel.prototype.loadPagedGrid=function(){if(MktCanvas&&MktCanvas.getActiveTab()&&MktCanvas.getActiveTab().config&&MktCanvas.getActiveTab().config.accessZoneId==mktoMarketingWorkspaceId)switch(this.canvas){case"landingCanvasLP":this.hide();break;case"landingCanvasFO":this.hide();break;case"landingCanvasEM":this.hide();break;case"landingCanvasSnippet":this.hide();break;case"landingCanvasIM":this.hide();break;case"ldbCanvasLeadList":this.hide();break;case"campaignCanvasDetailActivityLog":this.hide();break;case"atxCanvasDetailView":}this.store.load({params:{start:0,query:this.query}})})},APP.disableButtons=function(){console.log("Marketo App > Disabling: Buttons"),$jQ=jQuery.noConflict(),$jQ&&$jQ(".mktButtonPositive")&&$jQ(".mktButtonPositive").remove()},APP.evaluateMoveItem=function(e,t){if(console.log("Marketo App > Evaluating: Move Item"),userName){var a,o,i;if(e.attributes&&(e.attributes.accessZoneId==mktoDefaultWorkspaceId||e.attributes.accessZoneId==mktoJapaneseWorkspaceId||e.attributes.accessZoneId==mktoFinservWorkspaceId||e.attributes.accessZoneId==mktoHealthcareWorkspaceId||e.attributes.accessZoneId==mktoHigherEdWorkspaceId)||t.attributes&&(t.attributes.accessZoneId==mktoDefaultWorkspaceId||t.attributes.accessZoneId==mktoJapaneseWorkspaceId||t.attributes.accessZoneId==mktoFinservWorkspaceId||t.attributes.accessZoneId==mktoHealthcareWorkspaceId||t.attributes.accessZoneId==mktoHigherEdWorkspaceId))return!1;if(e.attributes.accessZoneId==mktoMarketingWorkspaceId&&t.attributes.accessZoneId==mktoMarketingWorkspaceId){for(o=e,i=o.getDepth(),a=0;i>a;a++){if(o.text==userName){for(o=t,i=o.getDepth(),a=0;i>a;a++){if(o.text==userName)return!0;o=o.parentNode}return!1}o=o.parentNode}return!1}if(e.attributes.accessZoneId==mktoMarketingWorkspaceId){for(o=e,i=o.getDepth(),a=0;i>a;a++){if(o.text==userName)return!0;o=o.parentNode}return!1}if(t.attributes.accessZoneId==mktoMarketingWorkspaceId){for(o=t,i=o.getDepth(),a=0;i>a;a++){if(o.text==userName)return!0;o=o.parentNode}return!1}return!0}},APP.disableDragAndDrop=function(){console.log("Marketo App > Disabling: Tree Node Drop"),Ext&&Ext.tree&&Ext.tree.TreeDropZone&&Ext.tree.TreeDropZone.prototype&&Ext.tree.TreeDropZone.prototype.processDrop&&(Ext.tree.TreeDropZone.prototype.processDrop=function(e,t,a,o,i,r){if(console.log("Marketo App > Executing: Tree Node Drop"),APP.evaluateMoveItem(r,e)){var s={tree:this.tree,target:e,data:t,point:a,source:o,rawEvent:i,dropNode:r,cancel:!r,dropStatus:!1},n=this.tree.fireEvent("beforenodedrop",s);return n!==!1&&s.cancel!==!0&&s.dropNode?(e=s.target,"append"!=a||e.isExpanded()?this.completeDrop(s):e.expand(!1,null,function(){this.completeDrop(s)}.createDelegate(this)),!0):(e.ui.endDrop(),s.dropStatus)}return!1})},APP.evaluateMenu=function(e,t,a,o){if(console.log("Marketo App > Evaluating: Menu"),userName){var i=!1;switch(e){case"tree":if(t&&t.currNode&&t.currNode.attributes&&(t.currNode.attributes.accessZoneId==mktoDefaultWorkspaceId||t.currNode.attributes.accessZoneId==mktoJapaneseWorkspaceId||t.currNode.attributes.accessZoneId==mktoFinservWorkspaceId||t.currNode.attributes.accessZoneId==mktoHealthcareWorkspaceId||t.currNode.attributes.accessZoneId==mktoHigherEdWorkspaceId||t.currNode.attributes.accessZoneId==mktoMarketingWorkspaceId)){if(i=!0,t.currNode.attributes.accessZoneId==mktoMarketingWorkspaceId){var r,s=t.currNode,n=s.getDepth();for(r=0;n>r;r++){if(s.attributes.text==userName){i=!1;break}s=s.parentNode}}}else if((!t||!t.currNode||!t.currNode.attributes||!t.currNode.attributes.accessZoneId)&&a&&a.config&&(a.config.accessZoneId==mktoDefaultWorkspaceId||a.config.accessZoneId==mktoJapaneseWorkspaceId||a.config.accessZoneId==mktoFinservWorkspaceId||a.config.accessZoneId==mktoHealthcareWorkspaceId||a.config.accessZoneId==mktoHigherEdWorkspaceId||a.config.accessZoneId==mktoMarketingWorkspaceId&&(a.config.expNodeId&&MktExplorer.getNodeById(a.config.expNodeId)||a.config.dlZoneFolderId&&MktExplorer.getNodeById(a.config.dlZoneFolderId)))&&(i=!0,a.config.accessZoneId==mktoMarketingWorkspaceId)){var r,s,n;for(s=a.config.expNodeId?MktExplorer.getNodeById(a.config.expNodeId):MktExplorer.getNodeById(a.config.dlZoneFolderId),n=s.getDepth(),r=0;n>r;r++){if(s.attributes.text==userName){i=!1;break}s=s.parentNode}}return i;case"button":if(a&&a.config&&(a.config.accessZoneId==mktoDefaultWorkspaceId||a.config.accessZoneId==mktoJapaneseWorkspaceId||a.config.accessZoneId==mktoFinservWorkspaceId||a.config.accessZoneId==mktoHealthcareWorkspaceId||a.config.accessZoneId==mktoHigherEdWorkspaceId||a.config.accessZoneId==mktoMarketingWorkspaceId&&(a.config.expNodeId&&MktExplorer.getNodeById(a.config.expNodeId)||a.config.dlZoneFolderId&&MktExplorer.getNodeById(a.config.dlZoneFolderId)))&&(i=!0,a.config.accessZoneId==mktoMarketingWorkspaceId)){var r,s,n;for(s=a.config.expNodeId?MktExplorer.getNodeById(a.config.expNodeId):MktExplorer.getNodeById(a.config.dlZoneFolderId),n=s.getDepth(),r=0;n>r;r++){if(s.attributes.text==userName){i=!1;break}s=s.parentNode}}return i;case"socialAppToolbar":if((o.getSocialApp()&&(o.getSocialApp().get("zoneId")==mktoDefaultWorkspaceId||o.getSocialApp().get("zoneId")==mktoJapaneseWorkspaceId||o.getSocialApp().get("zoneId")==mktoFinservWorkspaceId||o.getSocialApp().get("zoneId")==mktoHealthcareWorkspaceId||o.getSocialApp().get("zoneId")==mktoHigherEdWorkspaceId)||o.getSocialApp().get("zoneId")==mktoMarketingWorkspaceId&&o.getSocialApp().getNodeJson()&&o.getSocialApp().getNodeJson().id&&MktExplorer.getNodeById(o.getSocialApp().getNodeJson().id))&&(i=!0,o.getSocialApp().get("zoneId")==mktoMarketingWorkspaceId)){var r,s=MktExplorer.getNodeById(o.getSocialApp().getNodeJson().id),n=s.getDepth();for(r=0;n>r;r++){if(s.attributes.text==userName){i=!1;break}s=s.parentNode}}return i;case"mobilePushNotification":if((o.getMobilePushNotification()&&(o.getMobilePushNotification().get("zoneId")==mktoDefaultWorkspaceId||o.getMobilePushNotification().get("zoneId")==mktoJapaneseWorkspaceId||o.getMobilePushNotification().get("zoneId")==mktoFinservWorkspaceId||o.getMobilePushNotification().get("zoneId")==mktoHealthcareWorkspaceId||o.getMobilePushNotification().get("zoneId")==mktoHigherEdWorkspaceId)||o.getMobilePushNotification().get("zoneId")==mktoMarketingWorkspaceId&&o.getMobilePushNotification().getNodeJson()&&o.getMobilePushNotification().getNodeJson().id&&MktExplorer.getNodeById(o.getMobilePushNotification().getNodeJson().id))&&(i=!0,o.getMobilePushNotification().get("zoneId")==mktoMarketingWorkspaceId)){var r,s=MktExplorer.getNodeById(o.getMobilePushNotification().getNodeJson().id),n=s.getDepth();for(r=0;n>r;r++){if(s.attributes.text==userName){i=!1;break}s=s.parentNode}}return i;default:return!0}}},APP.disableMenus=function(){if(console.log("Marketo App > Disabling: Menus"),Ext&&Ext.menu&&Ext.menu.Menu&&Ext.menu.Menu.prototype&&Ext.menu.Menu.prototype.showAt&&(Ext.menu.Menu.prototype.showAt=function(e,t){if(console.log("Marketo App > Executing: Disable Actions and Right-click menus for ALL in ALL"),this.fireEvent("beforeshow",this)!==!1){var a,o=this.items,i=MktCanvas.getActiveTab(),r=["formApprove","formClone","formDelete","formMove","formDraftApprove","pageApprove","pageUnapprove","pageConvertToTestGroup","pageClone","pageDelete","pageMove","pageDraftApprove","emailApprove","emailUnapprove","emailClone","emailDelete","emailMove","emailNewTest","emailDraftApprove","emailApproveTest","importList","cloneSmartlist","cloneList","deleteList","showSupportHistory","showSupportUsagePerf","showSmartListProcessorDiag","showSmartListProcessorOverride","cloneReport_atxCanvasOverview","deleteReport","cloneReport","deleteReport","moveReport","blackCatDiag","mergeLeads","sendEmail","sendPushNotification","addToList","removeFromList","interestingMoment","sendAlert","changeScore","changeDataValue","changeStatusInProgression","addToNurture","changeNurtureCadence","changeNurtureTrack","changeLeadPartition","changeRevenueStage","deleteLead","giveCreditToReferrer","requestCampaign","removeFromFlow","pushLeadToSFDC","createTask","convertLead","changeOwner","deleteLeadFromSFDC","addToSFDCCampaign","changeStatusInSFDCCampaign","removeFromSFDCCampaign","deleteItem","createProgramFolder","newSmartCampaign","createNewMarketingProgram","entryRescheduleEntries","sfdcCampaignSync","cloneMarketingProgram","deleteMarketingProgram","eventSchedule","entryRescheduleEntries","webinarSettings","sfdcCampaignSync","cloneMarketingEvent","deleteMarketingEvent","refreshFromWebinarProvider","sfdcCampaignSync","cloneNurtureProgram","deleteNurtureProgram","testNurtureProgram","newSmartCampaign","createNewMarketingProgram","newLocalAsset","createProgramFolder","renameProgramFolder","deleteProgramFolder","convertToArchiveFolder","convertToCampaignFolder","scClone","scArchive","scMove","cloneMarketingProgram","deleteMarketingProgram","cloneMarketingEvent","deleteMarketingEvent","cloneNurtureProgram","deleteNurtureProgram","cloneEmailBatchProgram","deleteEmailBatchProgram","cloneInAppProgram","deleteInAppProgram","shareProgramFolder","scActivate","scAbort","scCampChangeHistory","scCampRunHistory","scClearPalette","scClearSmartList","scClearFlow","progGenerateRef","checkForCorruptEmails","socialAppApprove","socialAppClone","socialAppDelete","socialAppDraftApprove","pushNotificationUnapprove","pushNotificationApprove","pushNotificationClone","pushNotificationDelete","pushNotificationDraftApprove","Not in ProgramStatusMarketingEvent","SentStatusMarketingEvent","VisitedStatusMarketingEvent","EngagedStatusMarketingEvent","deleteCustomToken","newLandingPage","newTestGroup","newPageTemplate","pageTemplateImport","newForm","newVideoShare","newShareButton","newReferralOffer","newEmail","newEmailTemplate","newSnippet","uploadImage","share","createFolder","renameFolder","deleteFolder","convertToArchiveFolder","convertToFolder","approvePageTemplate","unapprovePageTemplate","clonePageTemplate","pageTemplateDelete","approveDraftPageTemplate","emailTemplateApprove","emailTemplateUnapprove","emailTemplateClone","emailTemplateDelete","emailTemplateDraftApprove","snippetApprove","snippetUnapprove","snippetClone","snippetDelete","snippetDraftApprove","uploadImage","imageDelete","replaceImage","newSmartList","newList","newSegmentation","importList","newLead","newDataMgr","newSegmentation","newSmartList","share","createFolder","renameFolder","deleteFolder","convertToArchiveFolder","convertToFolder","createDraftSegmentation","approveSegmentation","unapproveSegmentation","deleteSegmentation","refreshSegmentation","approveDraftSegmentation","newRcm_atxCanvasOverview","newRcm_rcmCanvasOverview","newRcm_atxCanvasSubscriptions","newRcm","share","createFolder","renameFolder","deleteFolder","convertToArchiveFolder","convertToFolder","newReport_atxCanvasOverview","cloneReport_atxCanvasOverview","deleteReport","cloneReport","deleteReport","cloneReport","deleteReport","moveReport","rcmApproveStages","rcmUnapproveStages","rcmApprove","rcmUnapprove","rcmClone","rcmDelete","rcmApproveDraft","rcmAassignmentRules"];if(a="tree"!=this.triggeredFrom&&"button"!=this.triggeredFrom?APP.evaluateMenu("tree",this,i,null):"leadDbListMenu"==this.id||"segmentationMenu"==this.id?APP.evaluateMenu("tree",this,i,null):APP.evaluateMenu(this.triggeredFrom,this,i,null),r.forEach(function(e){var t=o.get(e);t&&t.setDisabled(a)}),o.get("shareProgramFolder")?o.get("shareProgramFolder").setDisabled(!0):o.get("share")&&o.get("share").setDisabled(!0),this.ownerCt&&-1!=this.ownerCt.text.search("^View:")){var s;for(s=0;s<this.items.items.length;s++)switch(this.items.items[s].text){case"Create View":this.items.items[s].setDisabled(!0);break;case"Edit Default":this.items.items[s].setDisabled(!0)}}this.parentMenu=t,this.el||this.render(),this.enableScrolling?(this.el.setXY(e),e[1]=this.constrainScroll(e[1]),e=[this.el.adjustForConstraints(e)[0],e[1]]):e=this.el.adjustForConstraints(e),this.el.setXY(e),this.el.show(),Ext.menu.Menu.superclass.onShow.call(this),Ext.isIE&&(this.fireEvent("autosize",this),Ext.isIE8||this.el.repaint()),this.hidden=!1,this.focus(),this.fireEvent("show",this)}}),Mkt3&&Mkt3.controller&&Mkt3.controller.socialApp&&Mkt3.controller.socialApp.SocialApp&&Mkt3.controller.socialApp.SocialApp.prototype&&Mkt3.controller.socialApp.SocialApp.prototype.loadToolbar){var e=Mkt3.controller.socialApp.SocialApp.prototype.loadToolbar;Mkt3.controller.socialApp.SocialApp.prototype.loadToolbar=function(t,a){console.log("Marketo App > Executing: Disable Actions menu for Social Apps in Marketing Activities"),e.apply(this,arguments);var o=APP.evaluateMenu("socialAppToolbar",null,null,this),i=Ext4.ComponentQuery.query("socialAppToolbar contextMenu [action=approve],socialAppToolbar contextMenu [action=clone],socialAppToolbar contextMenu [action=delete],socialAppToolbar contextMenu [action=approveDraft],");return i.forEach(function(e){e&&e.setDisabled(o)}),t}}if(Mkt3&&Mkt3.controller&&Mkt3.controller.mobilePushNotification&&Mkt3.controller.mobilePushNotification.MobilePushNotification&&Mkt3.controller.mobilePushNotification.MobilePushNotification.prototype&&Mkt3.controller.mobilePushNotification.MobilePushNotification.prototype.loadToolbar){var t=Mkt3.controller.mobilePushNotification.MobilePushNotification.prototype.loadToolbar;Mkt3.controller.mobilePushNotification.MobilePushNotification.prototype.loadToolbar=function(e,a){console.log("Marketo App > Executing: Disable Actions menu for Push Notifications in Marketing Activities"),t.apply(this,arguments);var o=APP.evaluateMenu("mobilePushNotification",null,null,this),i=Ext4.ComponentQuery.query("mobilePushNotification contextMenu [action=approve],mobilePushNotification contextMenu [action=unapprove],mobilePushNotification contextMenu [action=clone],mobilePushNotification contextMenu [action=delete],mobilePushNotification contextMenu [action=approveDraft],");return i.forEach(function(e){e&&e.setDisabled(o)}),e}}Ext4&&Ext4.Component&&Ext4.Component.prototype&&Ext4.Component.prototype.showAt&&(Ext4.Component.prototype.showAt=function(e,t,a){console.log("Marketo App > Executing: Disable Content & Actions menu for a Nurture Program Stream in Marketing Activities");var o=this;if(o.rendered||!o.autoRender&&!o.floating||(o.doAutoRender(),o.hidden=!0),o.floating?o.setPosition(e,t,a):o.setPagePosition(e,t,a),o.show(),MktCanvas&&MktCanvas.getActiveTab()){var i,r=APP.evaluateMenu("button",null,MktCanvas.getActiveTab(),null);for(i=0;i<o.items.items.length;i++)switch(o.items.items[i].action){case"edit":break;case"clone":o.items.items[i].setDisabled(r);break;case"activateAllContent":break;case"showArchivedContent":break;case"hideArchivedContent":break;case"editTransitionRules":break;case"delete":o.items.items[i].setDisabled(r);break;case"activate":break;case"deactivate":break;case"schedule":break;case"archive":o.items.items[i].setDisabled(r);break;case"unarchive":o.items.items[i].setDisabled(r);break;case"remove":break;case"emailEditDraft":break;case"emailPreview":break;case"emailApproveDraft":o.items.items[i].setDisabled(r);break;case"emailSendTest":break;case"goToEmail":break;case"emailEditDraft":break;case"emailPreviewDraft":break;case"emailSendTestOfDraft":break;case"emailApproveDraft":o.items.items[i].setDisabled(r);break;case"programViewAssets":break;case"programViewSetup":break;case"programViewTokens":break;case"programViewMembers":break;case"goToProgram":break;case"mobilePushEditDraft":break;case"mobilePushPreview":break;case"mobilePushApprove":o.items.items[i].setDisabled(r);break;case"mobilePushSendTest":break;case"goToPushNotification":}}})},APP.hideToolbarItems=function(){console.log("Marketo App > Hiding: Toolbar Items"),Ext&&Ext.layout&&Ext.layout.ContainerLayout&&Ext.layout.ContainerLayout.prototype&&Ext.layout.ContainerLayout.prototype.renderItem&&(Ext.layout.ContainerLayout.prototype.renderItem=function(e,t,a){if(e&&e.topToolbar&&e.topToolbar.items){console.log("Marketo App > Executing: Disable Toolbar items for ALL in ALL");var i=(this.items,MktCanvas.getActiveTab()),r=!APP.evaluateMenu("button",null,i,null),s=["deleteItem","gotoDeliverability_landingEMDetail","deleteCustomToken","importMembers","importTemplate_landingCanvasTM","importTemplate_landingTMDetail","gotoDeliverability_landingCanvasEM","imageUpload_landingCanvasIM","imageReplace_landingCanvasIM"];s.forEach(function(t){var a=e.topToolbar.items.get(t);a&&("gotoDeliverability_landingEMDetail"==t?a.setVisible(!1):a.setVisible(r))})}e&&(e.rendered?this.isValidParent(e,a)||(Ext.isNumber(t)&&(t=a.dom.childNodes[t]),a.dom.insertBefore(e.getPositionEl().dom,t||null),e.container=a,this.configureItem(e,t)):(e.render(a,t),this.configureItem(e,t)))})},APP.limitNurturePrograms=function(){if(console.log("Marketo App > Limiting: Nurture Programs"),Mkt&&Mkt.apps&&Mkt.apps.marketingEvent&&Mkt.apps.marketingEvent.MarketingEventForm&&Mkt.apps.marketingEvent.MarketingEventForm.prototype&&Mkt.apps.marketingEvent.MarketingEventForm.prototype.beforeSubmitCallback){var e=Mkt.apps.marketingEvent.MarketingEventForm.prototype.beforeSubmitCallback;Mkt.apps.marketingEvent.MarketingEventForm.prototype.beforeSubmitCallback=function(){console.log("Marketo App > Executing: Limit Nurture Programs");var t=!1,a=MktExplorer.boundTree.root,o="Nurture Program",i=[];a.cascade(function(){var e=this.attributes;e&&e.xtra&&e.xtra.compType==o&&e.xtra.accessZoneId==MktCanvas.getActiveTab().config.accessZoneId&&i.push(this)},void 0,[o]);if(i.length>=3&&(t=!0),1==t){var s=Ext.MessageBox.show({title:"MarketoLive",msg:"Users are limited to 3 nurture programs each.",width:400,closable:!0});return s.show,!1}return e.apply(this,arguments)}}},APP.injectAnalyzerNavBar=function(){var e=window.setInterval(function(){if("undefined"!=typeof PODS){console.log("Marketo App > Injecting: Analyzer Navigation Bar"),window.clearInterval(e),"undefined"==typeof pod&&(pod=new PODS.Pod(PODS.getCookie("userPod")));for(var t=0;t<pod.valueSet.length;t++)if(currentUrl==pod.valueSet[t].url){console.log("Marketo App > Updating: CSS for Analyzer Navigation Bar"),$j=jQuery.noConflict();var a="#"+pod.valueSet[t].position;$j(a).parent().css("display","block"),$j(a).parent().siblings().css("display","none"),$j(a).removeClass("analyzer-button").addClass("analyzer-title"),$j(a).siblings().removeClass("analyzer-title").addClass("analyzer-button"),$j("#modeler,#success-path-analyzer,#opportunity-influence-analyzer,#program-analyzer").bind("click",function(e){console.log("Marketo App > Identifying: Current Analyzer");for(var t=0;t<pod.valueSet.length;t++)e.target.id==pod.valueSet[t].position&&(a=t);window.location=pod.valueSet[a].url})}}},0)},APP.overrideSaving=function(){if(console.log("Marketo App > Overriding: Saving for Nurture Streams"),Mkt3&&Mkt3.data&&Mkt3.data.Store&&Mkt3.data.Store.prototype&&Mkt3.data.Store.prototype.sync){var e=Mkt3.data.Store.prototype.sync;Mkt3.data.Store.prototype.sync=function(){if(console.log("Marketo App > Executing: Override Saving for Nurture Streams (sync)"),-1!=window.location.href.search("/#"+mktoCalendarFragment))Mkt3.data.Store.prototype.sync=e;else{var t;MktCanvas&&MktCanvas.getActiveTab()&&"false"!=APP.getCookie("toggleState")?t=APP.evaluateMenu("button",null,MktCanvas.getActiveTab(),null):"false"==APP.getCookie("toggleState")&&(t=!0),t?console.log("Marketo App > Disabling: Saving for Nurture Streams (sync)"):(this.autoSyncSuspended&&(this.autoSync=!0,this.autoSyncSuspended=!1),this.getProxy()instanceof Mkt3.data.proxy.AjaxPost?Mkt3.Synchronizer.sync(this):this.callParent(arguments))}}}Ext4&&Ext4.data&&Ext4.data.Model&&Ext4.data.Model.prototype&&Ext4.data.Model.prototype.destroy&&(Ext4.data.Model.prototype.destroy=function(e){console.log("Marketo App > Executing: Override Saving for Nurture Streams (destroy)");var t;if(MktCanvas&&MktCanvas.getActiveTab()&&"false"!=APP.getCookie("toggleState")?t=APP.evaluateMenu("button",null,MktCanvas.getActiveTab(),null):"false"==APP.getCookie("toggleState")&&(t=!0),!t){e=Ext.apply({records:[this],action:"destroy"},e);var n,l,d,c,g,a=this,o=a.phantom!==!0,i=e.scope||a,r=a.stores,s=0;return c=new Ext.data.Operation(e),g=function(t){if(d=[a,t],t.wasSuccessful()){for(n=r.length;n>s;s++)l=r[s],l.remove(a,!0),o&&l.fireEvent("write",l,t);a.clearListeners(),Ext.callback(e.success,i,d)}else Ext.callback(e.failure,i,d);Ext.callback(e.callback,i,d)},o?a.getProxy().destroy(c,g,a):(c.complete=c.success=!0,c.resultSet=a.getProxy().reader.nullResultSet,g(c)),a}console.log("Marketo App > Disabling: Saving for Nurture Streams (destroy)")})},APP.enableSaving=function(){console.log("Marketo App > Enabling: Saving for Editors"),Mkt3&&Mkt3.data&&Mkt3.data.Store&&Mkt3.data.Store.prototype&&Mkt3.data.Store.prototype.sync&&(Mkt3.data.Store.prototype.sync=function(){console.log("Marketo App > Executing: Enable Saving for Editors (sync)"),this.autoSyncSuspended&&(this.autoSync=!0,this.autoSyncSuspended=!1),this.getProxy()instanceof Mkt3.data.proxy.AjaxPost?Mkt3.Synchronizer.sync(this):this.callParent(arguments)}),Ext4&&Ext4.data&&Ext4.data.Model&&Ext4.data.Model.prototype&&Ext4.data.Model.prototype.destroy&&(Ext4.data.Model.prototype.destroy=function(e){console.log("Marketo App > Executing: Enable Saving for Editors (destroy)"),e=Ext.apply({records:[this],action:"destroy"},e);var s,n,l,d,c,t=this,a=t.phantom!==!0,o=e.scope||t,i=t.stores,r=0;return d=new Ext.data.Operation(e),c=function(d){if(l=[t,d],d.wasSuccessful()){for(s=i.length;s>r;r++)n=i[r],n.remove(t,!0),a&&n.fireEvent("write",n,d);t.clearListeners(),Ext.callback(e.success,o,l)}else Ext.callback(e.failure,o,l);Ext.callback(e.callback,o,l)},a?t.getProxy().destroy(d,c,t):(d.complete=d.success=!0,d.resultSet=t.getProxy().reader.nullResultSet,c(d)),t})},APP.disableSaving=function(){console.log("Marketo App > Disabling: Saving for Editors"),Mkt3&&Mkt3.data&&Mkt3.data.Store&&Mkt3.data.Store.prototype&&Mkt3.data.Store.prototype.sync&&(Mkt3.data.Store.prototype.sync=function(){console.log("Marketo App > Executing: Disable Saving for Editors (sync)")}),Ext4&&Ext4.data&&Ext4.data.Model&&Ext4.data.Model.prototype&&Ext4.data.Model.prototype.destroy&&(Ext4.data.Model.prototype.destroy=function(){console.log("Marketo App > Executing: Disable Saving for Editors (destroy)")}),Mkt3&&Mkt3.controller&&Mkt3.controller.editor&&Mkt3.controller.editor.form&&Mkt3.controller.editor.form.settings&&Mkt3.controller.editor.form.settings.FieldSelection&&Mkt3.controller.editor.form.settings.FieldSelection.prototype&&Mkt3.controller.editor.form.settings.FieldSelection.prototype.deleteFormField&&(Mkt3.controller.editor.form.settings.FieldSelection.prototype.deleteFormField=function(e){console.log("Marketo App > Executing: Enable Deleting Form Field");var a,o,i,r,t=e.getFieldWidget();if(t&&"fieldset"===t.get("datatype"))for(r=this.getForm().getFormFields(),a=e.get("id"),o=0;o<r.getCount();o++)i=r.getAt(o),i.get("fieldsetFieldId")==a&&this.deleteFormField(i);e.destroy({scope:this,callback:function(e,a){a.success&&t&&t.destroy()}}),this.renumberWidgets()})},APP.overlayEmailDesigner=function(){console.log("Marketo App > Overlaying: Email Designer");var a,o,r,s,n,e=APP.getCookie("logo"),t=APP.getCookie("color");(null==e||null==e.value)&&(e=defaultTurnerLogoWhite),(null==t||null==t.value)&&(t=defaultColor),a=window.setInterval(function(){o=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("logo-bkg"),r=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("logo-swap-company"),s=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("logo-swap-container"),n=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("logo-swap-company-container"),null!=o&&null!=r&&(console.log("Marketo App > Overlaying: iframe"),window.clearInterval(a),s.style.display="none",n.style.display="block",r.src=e)},0)},APP.overlayLandingPageDesigner=function(){console.log("Marketo App > Overlaying: Landing Page Designer");var a,o,i,r,s,n,l,e=APP.getCookie("logo"),t=APP.getCookie("color");null==e||null==e.value?(e=defaultTurnerLogoGreen,o="Turner"):(a=e.split("https://logo.clearbit.com/")[1].split(".")[0],o=a.charAt(0).toUpperCase()+a.slice(1)),(null==t||null==t.value)&&(t=defaultColor),i=window.setInterval(function(){r=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("lp-logo"),s=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("background-color"),n=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("bigger-background"),l=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("sub-title"),null!=r&&null!=s&&null!=n&&null!=l&&(console.log("Marketo App > Overlaying: iframe"),window.clearInterval(i),r.src=e,s.style.backgroundColor=t,n.style.backgroundColor=t,l.innerHTML=o+" invites you to join:")},0)},APP.openAdBridgeModal=function(){console.log("Marketo App > Opening: Ad Bridge Modal Window"),document&&document.getElementsByClassName("x-btn-text mkiUserTarget")&&document.getElementsByClassName("x-btn-text mkiUserTarget")[0]&&"button"==document.getElementsByClassName("x-btn-text mkiUserTarget")[0].type&&(console.log("Marketo App > Executing: Open Ad Bridge Modal Window"),document.getElementsByClassName("x-btn-text mkiUserTarget")[0].click())},APP.getEmailIds=function(e){console.log("Marketo App > Getting: Email IDs for account string: "+e);var t=[];switch(e){case mktoAccountString106:t.push(15464),t.push(18113,18106,18111,18110),t.push(10010,10179,10180,12845,10181,10182,10183,10184),t.push(4894,3764,3765,3767,3766,3762),t.push(12818,12820,12819,12816,12811,12815,12812,12813,12814,12821,12817,12823),t.push(12900,12901,12899,12898),t.push(12902,12903,12904),t.push(16474,17254,16403),t.push(18117,18118,18122,18119,18116,18123,18120,18121,18124),t.push(16118,16119,16120,16122,16121,16117),t.push(16331,16332,16338,16333,16123,16339,16335,16336,17868),t.push(16125,16129,16126,16124,16132,16131,16130,16128,16127,16133,16137,16136),t.push(18126),t.push(20350,20368),t.push(20327),t.push(20329);break;case mktoAccountString106a:t.push(14240),t.push(10171,10173,10172,10169,9957,9974,9968,10174,9972,9973,10170,9962),t.push(10010,10179,10180,10181,10182,10183,10184),t.push(4894,3764,3765,3767,3766,3762);break;case mktoAccountString106b:t.push(13924),t.push(12818,12820,12819,12816,12811,12815,12812,12821,12813,12814,12817,12823),t.push(10010,10179,10180,12845,10181,10182,10183,10184),t.push(4894,3764,3765,3767,3766,3762);break;case mktoAccountString106d:t.push(15464),t.push(18113,18106,18111,18110),t.push(10010,10179,10180,12845,10181,10182,10183,10184),t.push(4894,3764,3765,3767,3766,3762),t.push(12818,12820,12819,12816,12811,12815,12812,12813,12814,12821,12817,12823),t.push(12900,12901,12899,12898),t.push(12902,12903,12904),t.push(16474,17254,16403),t.push(18117,18118,18122,18119,18116,18123,18120,18121,18124),t.push(16118,16119,16120,16122,16121,16117),t.push(16331,16332,16338,16333,16123,16339,16335,16336,17868),t.push(16125,16129,16126,16124,16132,16131,16130,16128,16127,16133,16137,16136),t.push(18126),t.push(20350,20368),t.push(20327),
t.push(20329);break;default:console.log("Marketp App > Invalid: account string in getEmailIds(): "+e)}return t},-1!=currentUrl.search(mktoAppDomain)||-1!=currentUrl.search(mktoDesignerDomain)||-1!=currentUrl.search(mktoWizard)){console.log("Marketo App > Location: Marketo URL");var isMktPageApp=window.setInterval(function(){if("undefined"!=typeof MktPage){console.log("Marketo App > Location: Marketo Page");var e,t,a,o;if(MktPage.savedState&&MktPage.savedState.custPrefix&&MktPage.userid&&Mkt3&&Mkt3.DL&&Mkt3.DL.getDlToken()&&(window.clearInterval(isMktPageApp),e=MktPage.savedState.custPrefix,t=MktPage.userid.toLowerCase(),a=Mkt3.DL.getDlToken(),Mkt3.DL.dl&&Mkt3.DL.dl.dlCompCode&&(o=Mkt3.DL.dl.dlCompCode),userName=-1!=t.search(".demo@marketo.com$")?t.split(".demo")[0]:-1!=t.search("marketolive@")?t.split("@")[1].split(".")[0]:t.split("@")[0]),-1!=e.search(mktoAccountStringsMatch)||"false"==APP.getCookie("toggleState")){if(console.log("Marketo App > Location: MarketoLive Instance"),window.mkto_live_plugin_state=!0,-1!=t.search("^admin@mktodemoaccount")||-1!=t.search("^mktodemoaccount[a-z0-9]*@marketo.com")||-1!=t.search("^marketodemo.*@gmail.com$")){if(console.log("Marketo App > User: Admin"),APP.disableDemoPluginCheck(),"false"!=APP.getCookie("toggleState"))return;console.log("Marketo App > User: Admin is now a normal user")}if(APP.disableDemoPluginCheck(),a==mktoMyMarketoFragment)APP.overrideHomeTiles();else if(a==mktoMarketingActivitiesDefaultFragment||a==mktoMarketingActivitiesMarketingFragment||a==mktoMarketingActivitiesJapaneseFragment||a==mktoMarketingActivitiesFinservFragment||a==mktoMarketingActivitiesHealthcareFragment||a==mktoMarketingActivitiesHigherEdFragment||a==mktoLeadDatabaseDefaultFragment||a==mktoLeadDatabaseMarketingFragment||a==mktoLeadDatabaseJapaneseFragment||a==mktoLeadDatabaseFinservFragment||a==mktoLeadDatabaseHealthcareFragment||a==mktoLeadDatabaseHigherEdFragment)APP.disableButtons();else if(a==mktoAnalyticsDefaultFragment)APP.overrideAnalyticsTiles();else if(a==mktoAdBridgeSmartListFragment)var i=window.setInterval(function(){"undefined"!=typeof document.getElementsByClassName("x-btn-text mkiUserTarget")[0]&&(console.log("Marketo App > Location: Ad Bridge Smart List"),window.clearInterval(i),APP.openAdBridgeModal())},0);if(o!=mktoEmailDesignerFragment&&o!=mktoEmailPreviewFragment&&o!=mktoLandingPageDesignerFragment&&o!=mktoLandingPagePreviewFragment&&o!=mktoFormWizardFragment&&o!=mktoMobilePushNotificationWizardFragment&&o!=mktoSocialAppWizardFragment&&o!=mktoABtestWizardFragment&&o!=mktoEmailTestWizardFragment){-1!=e.search(mktoAccountStringsMatch)?(APP.overrideTreeNodeExpand(),APP.overrideTreeNodeCollapse(),APP.overrideSaving(),APP.disableDragAndDrop(),APP.disableMenus(),APP.hideToolbarItems(),APP.overrideSmartCampaignSaving(),APP.overrideUpdatePortletOrder(),APP.overrideNewProgramCreate(),APP.overrideAssetSaveEdit(),-1==e.search(mktoAccountString106d)&&APP.overrideNewAssetCreate(),APP.overrideNewFolders(),APP.overrideRenamingFolders(),APP.hideFoldersOnImport(),APP.disableConfirmationMessage()):(APP.overrideSaving(),APP.overrideSmartCampaignSaving(),APP.overrideUpdatePortletOrder(),APP.disableConfirmationMessage()),(a==mktoOppInfluenceAnalyzerFragment||a==mktoProgramAnalyzerFragment||a==mktoModeler106Fragment||a==mktoModeler106abFragment||a==mktoSuccessPathAnalyzerFragment)&&(console.log("Marketo App > Location: Analytics"),APP.injectAnalyzerNavBar());var r={},s=[],n=[],l=[],d=APP.getEmailIds(e);switch(e){case mktoAccountString106:r.dpageid_11826="dpageid_11826",r.dpageid_11822="dpageid_11822",r.dpageid_8819="dpageid_8819",r.dpageid_8941="dpageid_8941",r.dpageid_4876="dpageid_4876",r.dpageid_4872="dpageid_4872",r.dpageid_4874="dpageid_4874",r.dpageid_11856="dpageid_11856",r.dpageid_11548="dpageid_11548",r.dpageid_11546="dpageid_11546",r.dpageid_12420="dpageid_12420",r.dpageid_12418="dpageid_12418",r.dpageid_11552="dpageid_11552",r.dpageid_11550="dpageid_11550",r.dpageid_11553="dpageid_11553",r.dpageid_12345="dpageid_12345",r.dpageid_11556="dpageid_11556",r.dpageid_13187="dpageid_13187",r.dpageid_13185="dpageid_13185",r.dpageid_12709="dpageid_12709",r.dpageid_12720="dpageid_12720",r.dpageid_12717="dpageid_12717",r.dpageid_12719="dpageid_12719",r.dpageid_12569="dpageid_12569",r.dpageid_12932="dpageid_12932",r.dpageid_13165="dpageid_13165",r.dpageid_12586="dpageid_12586",r.dpageid_12517="dpageid_12517",r.dpageid_12250="dpageid_12250",r.dpageid_12934="dpageid_12934",r.dpageid_12401="dpageid_12401",r.dpageid_13167="dpageid_13167",r.dpageid_12248="dpageid_12248",r.dpageid_12177="dpageid_12177",s.push(3576,1749,1900),s.push(3018,3708,3020,3021),s.push(3952,3955,3953),s.push(3816,3818,3828),s.push(3313,4125,3559),n.push(29,23),n.push(99,216,103,218),n.push(187),n.push(169),n.push(131),l.push(586,587,491,484,448),l.push(853),l.push(1091,1090,1093,1092,1094),l.push(1021,1023,1025,1022,1020),l.push(860,1024,861,859,858);break;case mktoAccountString106a:r.dpageid_10672="dpageid_10672",r.dpageid_10454="dpageid_10454",s.push(2532,1749,1900),n.push(29,26);break;case mktoAccountString106b:r.dpageid_10760="dpageid_10768",r.dpageid_10762="dpageid_10762",s.push(2472,1749,1900),n.push(2,1);break;case mktoAccountString106d:r.dpageid_11826="dpageid_11826",r.dpageid_11822="dpageid_11822",r.dpageid_8819="dpageid_8819",r.dpageid_8941="dpageid_8941",r.dpageid_4876="dpageid_4876",r.dpageid_4872="dpageid_4872",r.dpageid_4874="dpageid_4874",r.dpageid_11856="dpageid_11856",r.dpageid_11548="dpageid_11548",r.dpageid_11546="dpageid_11546",r.dpageid_12420="dpageid_12420",r.dpageid_12418="dpageid_12418",r.dpageid_11552="dpageid_11552",r.dpageid_11550="dpageid_11550",r.dpageid_11553="dpageid_11553",r.dpageid_12345="dpageid_12345",r.dpageid_11556="dpageid_11556",r.dpageid_13187="dpageid_13187",r.dpageid_13185="dpageid_13185",r.dpageid_12709="dpageid_12709",r.dpageid_12720="dpageid_12720",r.dpageid_12717="dpageid_12717",r.dpageid_12719="dpageid_12719",r.dpageid_12569="dpageid_12569",r.dpageid_12932="dpageid_12932",r.dpageid_13165="dpageid_13165",r.dpageid_12586="dpageid_12586",r.dpageid_12517="dpageid_12517",r.dpageid_12250="dpageid_12250",r.dpageid_12934="dpageid_12934",r.dpageid_12401="dpageid_12401",r.dpageid_13167="dpageid_13167",r.dpageid_12248="dpageid_12248",r.dpageid_12177="dpageid_12177",s.push(3576,1749,1900),s.push(3018,3708,3020,3021),s.push(3952,3955,3953),s.push(3816,3818,3828),s.push(3313,4125,3559),n.push(29,23),n.push(99,216,103,218),n.push(187),n.push(169),n.push(131),l.push(586,587,491,484,448),l.push(853),l.push(1091,1090,1093,1092,1094),l.push(1021,1023,1025,1022,1020),l.push(860,1024,861,859,858)}var c=window.setInterval(function(){"undefined"!=typeof mktLPLManager&&(window.clearInterval(c),APP.discardLandingPageDrafts(r),APP.discardEmailDrafts(d),APP.discardFormPushDrafts("Form",s),APP.discardFormPushDrafts("MobilePushNotification",n),APP.discardFormPushDrafts("SocialApp",l),APP.limitNurturePrograms())},0)}else{if(o==mktoLandingPageDesignerFragment){console.log("Marketo App > Location: Landing Page Designer");var g="LPE11826",p="LPP11826",m="LPE10672",u="LPP10672",k="LPE10768",h="LPP10768";switch(a){case g:APP.overlayLandingPageDesigner();break;case p:APP.overlayLandingPageDesigner();break;case m:APP.overlayLandingPageDesigner();break;case u:APP.overlayLandingPageDesigner();break;case k:APP.overlayLandingPageDesigner();break;case h:APP.overlayLandingPageDesigner()}var f=window.setInterval(function(){Mkt3&&Mkt3.app&&Mkt3.app.controllers&&Mkt3.app.controllers.get("Mkt3.controller.editor.LandingPage")&&Mkt3.app.controllers.get("Mkt3.controller.editor.LandingPage").getLandingPage()&&(Mkt3.app.controllers.get("Mkt3.controller.editor.LandingPage").getLandingPage().get("zoneId")==mktoDefaultWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.LandingPage").getLandingPage().get("zoneId")==mktoJapaneseWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.LandingPage").getLandingPage().get("zoneId")==mktoFinservWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.LandingPage").getLandingPage().get("zoneId")==mktoHealthcareWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.LandingPage").getLandingPage().get("zoneId")==mktoHigherEdWorkspaceId)&&(console.log("Marketo App > Loaded: Landing Page Designer"),window.clearInterval(f),APP.disablePropertyPanelSaving())},0);return}console.log("Marketo App > Location: Designers/Wizards");var M="EME15464",v="EME14240",P="EME13924",b="EME20327",A="EME20350",N="EME20368",E="EME20329",y="EME1546",S="EME20350",C="EME20368",x="EME20327",I="EME20329",D=M+"|"+v+"|"+P+"|"+b+"|"+A+"|"+N+"|"+E+"|"+y+"|"+S+"|"+C+"|"+x+"|"+I;switch(loadParameters={filters:[{property:"id",value:Mkt3.DL.dl.compId}],callback:function(e){e.forEach(function(e){if(e.get("zoneId")){var t=e.get("zoneId");console.log("Marketo App > currAssetWorkspaceId = "+t),(t==mktoDefaultWorkspaceId||t==mktoJapaneseWorkspaceId||t==mktoFinservWorkspaceId||t==mktoHealthcareWorkspaceId||t==mktoHigherEdWorkspaceId||"false"==APP.getCookie("toggleState"))&&APP.disableSaving()}})}},o){case mktoEmailDesignerFragment:Ext4&&Ext4.getStore("Email")&&Ext4.getStore("Email").load&&(console.log("Callback for Email Editor"),Ext4.getStore("Email").load(loadParameters)),-1!=a.search(D)&&APP.overlayEmailDesigner();break;case mktoFormWizardFragment:Ext4&&Ext4.getStore("Form")&&Ext4.getStore("Form").load&&(console.log("Callback for Form Editor"),Ext4.getStore("Form").load(loadParameters));break;case mktoMobilePushNotificationWizardFragment:Ext4&&Ext4.getStore("MobilePushNotification")&&Ext4.getStore("MobilePushNotification").load&&(console.log("Callback for Push Notification Editor"),Ext4.getStore("MobilePushNotification").load(loadParameters));break;case mktoSocialAppWizardFragment:Ext4&&Ext4.getStore("SocialApp")&&Ext4.getStore("SocialApp").load&&(console.log("Callback for Social App Editor"),Ext4.getStore("SocialApp").load(loadParameters));break;case mktoABtestWizardFragment:var T=window.setInterval(function(){Mkt3&&Mkt3.app&&Mkt3.app.controllers&&Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor")&&Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor()&&Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record&&(Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoDefaultWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoJapaneseWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoFinservWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoHealthcareWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoHigherEdWorkspaceId)&&(console.log("Marketo App > Location: A/B Test Wizard"),window.clearInterval(T),APP.disableSaving())},0);break;case mktoEmailTestWizardFragment:var w=window.setInterval(function(){Mkt3&&Mkt3.app&&Mkt3.app.controllers&&Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor")&&Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor()&&Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record&&(Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoDefaultWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoJapaneseWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoFinservWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoHealthcareWorkspaceId||Mkt3.app.controllers.get("Mkt3.controller.editor.wizard.Editor").getEditor().record.get("zoneId")==mktoHigherEdWorkspaceId)&&(console.log("Marketo App > Location: Email Test Group Wizard"),window.clearInterval(w),APP.disableSaving())},0)}}window.onhashchange=function(){console.log("Window: Hash Changed"),currentUrl=window.location.href,a=Mkt3.DL.getDlToken(),Mkt3.DL.dl&&Mkt3.DL.dl.dlCompCode&&(o=Mkt3.DL.dl.dlCompCode),a==mktoMyMarketoFragment?APP.overrideHomeTiles():a==mktoMarketingActivitiesDefaultFragment||a==mktoMarketingActivitiesMarketingFragment||a==mktoMarketingActivitiesJapaneseFragment||a==mktoMarketingActivitiesFinservFragment||a==mktoMarketingActivitiesHealthcareFragment||a==mktoMarketingActivitiesHigherEdFragment||a==mktoLeadDatabaseDefaultFragment||a==mktoLeadDatabaseMarketingFragment||a==mktoLeadDatabaseJapaneseFragment||a==mktoLeadDatabaseFinservFragment||a==mktoLeadDatabaseHealthcareFragment||a==mktoLeadDatabaseHigherEdFragment?APP.disableButtons():a==mktoAnalyticsDefaultFragment&&APP.overrideAnalyticsTiles(),o!=mktoEmailDesignerFragment&&o!=mktoEmailPreviewFragment&&o!=mktoLandingPageDesignerFragment&&o!=mktoLandingPagePreviewFragment&&o!=mktoFormWizardFragment&&o!=mktoMobilePushNotificationWizardFragment&&o!=mktoSocialAppWizardFragment&&o!=mktoABtestWizardFragment&&o!=mktoEmailTestWizardFragment&&a!=mktoMyMarketoFragment&&(a==mktoOppInfluenceAnalyzerFragment||a==mktoProgramAnalyzerFragment||a==mktoModeler106Fragment||a==mktoModeler106abFragment||a==mktoSuccessPathAnalyzerFragment)&&(console.log("Marketo App > Location: Analytics"),APP.injectAnalyzerNavBar())}}else-1!=e.search("mktodemoaccount*")&&(APP.overrideSuperballMenuItems(),a==mktoMyMarketoFragment&&APP.overrideHomeTiles(),window.onhashchange=function(){a=Mkt3.DL.getDlToken(),a==mktoMyMarketoFragment&&APP.overrideHomeTiles()})}},0)}
>>>>>>> Stashed changes
