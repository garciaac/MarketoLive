console.log("Marketo App > Running"),window.mkto_live_plugin_state=!0;var currentUrl=window.location.href,currentProtocol=window.location.protocol,currentHost=window.location.host,mktoAppDomain="^https://app-[a-z0-9]+.marketo.com",mktoAppMatch="https://app-*.marketo.com",mktoLoginDomain="^https://login.marketo.com",mktoAppLoginDomain="^https://app.marketo.com",mktoDesignerDomain="^https://[a-z0-9]+-[a-z0-9]+.marketodesigner.com",mktoDesignerMatch="https://*.marketodesigner.com/*",mktoEmailDesigner=mktoDesignerDomain+"/ds",mktoLandingPageDesigner=mktoDesignerDomain+"/lpeditor/",defaultTurnerLogoGreen="http://marketolive.com/m3-dev/assets/img/turner-tech-green.png",defaultTurnerLogoWhite="http://marketolive.com/m3-dev/assets/img/turner-tech-white.png",defaultColor="rgb(42, 83, 112)",mktoWizard=mktoAppDomain+"/m#",rtpDemoDomain="^http://sjrtp1.marketo.com/demo/$|^http://cloud4.insightera.com/demo/$",emailDeliverabilityDomain="^https://250ok.com/",mktoMyMarketoFragment="MM0A1",mktoMarketingActivitiesDefaultFragment="MA15A1",mktoMarketingActivitiesMarketingFragment="MA19802A1",mktoMarketingActivitiesJapaneseFragment="MA19848A1",mktoLeadDatabaseDefaultFragment="ML0A1ZN2",mktoLeadDatabaseMarketingFragment="ML0A1ZN19788",mktoLeadDatabaseJapaneseFragment="ML0A1ZN19834",mktoAnalyticsFragment="AH0A1ZN17",mktoAdBridgeSmartListFragment="SL1119566B2LA1",mktoEmailDesignerFragment="EME",mktoEmailPreviewFragment="EMP",mktoLandingPageDesignerFragment="LPE",mktoLandingPagePreviewFragment="LPP",mktoFormWizardFragment="FOE",mktoMobilePushNotificationWizardFragment="MPNE",mktoSocialAppWizardFragment="SOAE",mktoABtestWizardFragment="EBE",mktoMarketingWorkspaceId=172,mktoJapaneseWorkspaceId=173,userWorkspaceName="My Workspace",isMktoLiveInstance=!1,pod,APP=APP||{};if(APP.getCookie=function(e){console.log("Marketo App > Getting: Cookie "+e);for(var o,t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;++i){var o=a[i].trim();if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null},APP.disableDemoPluginCheck=function(){console.log("Marketo App > Disabling: Demo Plugin Check"),window.mkto_live_plugin_state=!0,MktPage.validateDemoPlugin=function(){},isMktoLiveInstance=!0},APP.disablePropertyPanelSaving=function(){console.log("Marketo App > Disabling: Saving of Landing Page Property Panel & Sync Error Message"),Mkt3.controller.editor.LandingPagePropertyPanel.prototype.fireSyncProperties=function(){}},APP.disableConfirmationMessage=function(){console.log("Marketo App > Disabling: Smart Campaign Delete Confirmation Message"),Mkt.widgets.DataPanel.prototype.clickClose=function(){var e=this.hasSettings(),t=!1;if(this.isSmartlist&&this.dpMeta.trigger){var a=this.dpMgr.getTriggers().length;1==a&&(t=!0)}if(e||t){var o=MktLang.getStr("DataFormPanel.Delete_arg0",[this.dpTypeName(!0)]),i=this.dpMeta.displayName||this.dpMeta.name,s=MktLang.getStr("DataFormPanel.Are_you_sure_you_want_to_delete_arg0_arg1",[this.dpTypeName(),MktLang.getDBStr(i)]);t&&(s+=MktLang.getStr("DataFormPanel.Triggered_campaigns_must_contain_trigger_remain_active")),this.dpMgr.isSmartlist&&!this.dpMeta.trigger&&this.dpMgr.smartListRuleLogic.customMode()&&(s+=MktLang.getStr("DataFormPanel.Reminder")+MktLang.getStr("DataFormPanel.Check_your_advanced_filter_rules_after_any_insert_delete_reorder")),MktCanvas&&MktCanvas.getActiveTab()&&MktCanvas.getActiveTab().config&&MktCanvas.getActiveTab().config.accessZoneId?(console.log("Marketo App > Closing: Smart Campaign Delete Confirmation Message"),this._doClose()):Ext4.Msg.confirmDelete({title:o,msg:s,minHeight:300,fn:function(e){"ok"===e&&this._doClose()},scope:this})}else this._doClose()}},APP.overrideDeliverabilityToolsTile=function(){console.log("Marketo App > Overriding: Deliverability Tools Tile");var t,a,o,i,s,r,e=MktCanvas.getEl().dom.nextSibling.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes;for(s=0;s<e.length;s++){if("presentation"==e[s].getAttribute("role")){o=e[s];break}for(t=e[s].getElementsByTagName("span"),r=0;r<t.length;r++)if("Deliverability Tools"==t[r].innerHTML){i=e[s];break}for(a=e[s].getElementsByTagName("a"),r=0;r<a.length;r++)if(-1!=a[r].href.search("/homepage/sso\\?sso=250ok$")){a[r].href="https://250ok.com/login";break}}null==i&&null!=o&&(e[e.length]=o,e[e.length].outerHTML='<div class="x4-btn mkt3-homeTile x4-btn-default-small x4-icon-text-left x4-btn-icon-text-left x4-btn-default-small-icon-text-left" style="height: 150px;" id="homeTile-1036"><em id="homeTile-1036-btnWrap"><a id="homeTile-1036-btnEl" href="https://250ok.com/login" class="x4-btn-center" target="_blank" role="link" style="width: 150px; height: 150px;"><span id="homeTile-1036-btnInnerEl" class="x4-btn-inner" style="width: 150px; height: 150px; line-height: 150px;">Deliverability Tools</span><span id="homeTile-1036-btnIconEl" class="x4-btn-icon mki3-mail-sealed-svg"></span></a></em></div>')},APP.overrideDeliverabilityToolsMenuItem=function(){console.log("Marketo App > Overriding: Deliverability Tools Superball Menu Item"),MktPage.showSuperMenu=function(){var e=Ext.get(Ext.DomQuery.selectNode(".mkt-app-logo")),t=e.menu,a=55;if(!t&&(t=e.menu=Ext4.widget("appNavigationMenu",{listeners:{boxready:function(o){var i=e.getRegion();i.bottom>a&&(o.setBodyStyle("padding-top",i.bottom-a+10+"px"),o.updateLayout()),t.setZIndex(e.getStyle("zIndex")-5)},beforerender:function(e){e.addCls(e.componentCls+"-hidden")},show:function(t){t.removeCls(t.componentCls+"-hidden"),e.ignoreNextClick=!0,e.removeClass(e.attentionCls),MktPage.savedState.isUsedSuperMenu||(MktPage.savedState.isUsedSuperMenu=!0,MktSession.ajaxRequest("user/saveUserPref",{serializeParms:{key:"isUsedSuperMenu",data:MktPage.savedState.isUsedSuperMenu}}))},beforehide:function(e){e.addCls(e.componentCls+"-hidden")},hide:function(){(function(){e.ignoreNextClick=!1}).defer(250)}}}),"undefined"!=typeof t.items.items)){console.log("Marketo App > Executing: Deliverability Tools Superball Menu Item");var o,i,s,r=!1;for(o=0;o<t.items.items.length;o++){if(s=t.items.items[o],"Deliverability Tools"==s.text){r=!0,-1!=s.href.search("/homepage/sso\\?sso=250ok$")&&(s.href="https://250ok.com/login",s.update());break}"Community"==s.text&&(i=s)}r||null==i||(i.setText("Deliverability Tools"),i.setIconCls("mki3-mail-sealed-svg"),i.href="https://250ok.com/login",i.update())}t.isVisible()||e.ignoreNextClick||(t.showAt(0,a),t.setZIndex(e.getStyle("zIndex")-5))}},APP.overrideAnalyticsTiles=function(){console.log("Marketo App > Overriding: Analytics Tiles");var e=window.setInterval(function(){if("undefined"!=typeof MktPage&&"undefined"!=typeof MktCanvas&&"undefined"!=typeof MktCanvas.getActiveTab().config.mkt3XType&&(window.clearInterval(e),null!=MktPage&&null!=MktPage.savedState&&null!=MktPage.savedState.custPrefix&&"mktodemoaccount106"==MktPage.savedState.custPrefix&&null!=MktCanvas&&"analyticsHome"==MktCanvas.getActiveTab().config.mkt3XType&&null!=MktCanvas.getActiveTab().config.accessZoneId&&1==MktCanvas.getActiveTab().config.accessZoneId&&null!=MktCanvas.getActiveTab().el&&null!=MktCanvas.getActiveTab().el.dom&&null!=MktCanvas.getActiveTab().el.dom.childNodes)){console.log("Marketo App > Executing: Analytics Tiles");var t,a="https://app-sjp.marketo.com",o=MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes.length;for(t=0;o>t;t++){var i=MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML;switch(MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].textContent){case"Email Performance":i='<a href="'+a+'/#AR3866B2">'+i+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=i;break;case"Lead Performance":i='<a href="'+a+'/#AR3874B2">'+i+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=i;break;case"Web Page Activity":i='<a href="'+a+'/#AR3876B2">'+i+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=i;break;case"Opportunity Influence Analyzer":i='<a href="'+a+'/#AR1559A1">'+i+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=i;break;case"Program Analyzer":i='<a href="'+a+'/#AR1544A1">'+i+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=i;break;case"Success Path Analyzer":i='<a href="'+a+'/#AR1682A1">'+i+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=i;break;case"Revenue Explorer":break;case"Engagement Stream Performance":i='<a href="'+a+'/#AR3881B2">'+i+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=i;break;case"Program Performance":i='<a href="'+a+'/#AR3882B2">'+i+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=i;break;case"Email Link Performance":i='<a href="'+a+'/#AR3886B2">'+i+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=i;break;case"Social Influence":break;case"Leads By Revenue Stage":i='<a href="'+a+'/#AR3889B2">'+i+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=i;break;case"Landing Page Performance":i='<a href="'+a+'/#AR3891B2">'+i+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=i;break;case"Leads By Status":i='<a href="'+a+'/#AR3893B2">'+i+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=i;break;case"Company Web Activity":i='<a href="'+a+'/#AR3901B2">'+i+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=i;break;case"Sales Insight Email Performance":i='<a href="'+a+'/#AR3903B2">'+i+"</a>",MktCanvas.getActiveTab().el.dom.childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[t].outerHTML=i}}}},0)},APP.overrideSmartCampaignSaving=function(){console.log("Marketo App > Overriding: Saving for Smart Campaigns"),Mkt.widgets.DataPanelManager.prototype.save=function(e,t,a){this._updateDataPanelOrder(!0);var o=MktCanvas.getActiveTab();if(APP.evaluateMenu("button",null,o,null)||"false"==APP.getCookie("priv"))console.log("Marketo App > Disabling: Saving for Smart Campaigns");else{if(this.saveQueue.blockingSaveInProgress)return this.saveQueue.pendingChangesCount++,this.saveQueue.dataPanelMetas=this._serializeDataPanels(),void(this.saveQueue.dataPanelCount=this.countDataPanels());var i;if(i=this.saveQueue.dataPanelMetas?this.saveQueue.dataPanelMetas:this._serializeDataPanels(),this.saveQueue.pendingChangesCount=0,this.saveQueue.dataPanelMetas=null,this.saveQueue.dataPanelCount=0,null===i)return;if(0===i.length&&this.isFlow,this.dpSubtype!=DPConst.RUN_ACTION&&i){if(this.lastSave.dataPanelMetas&&this.lastSave.dataPanelMetas==i)return;if(this.lastSave.dataPanelMetasUpdated&&this.lastSave.dataPanelMetasUpdated==i)return}console.debug("Saving "+this.dpType+":",MktFormat.formatJsonStr(i)),DPDEBUG&&(console.debug("Current Save:",i),this.lastSave.dataPanelMetas&&console.debug("Previous Save:",this.lastSave.dataPanelMetas),this.lastSave.dataPanelMetasUpdated&&console.debug("Previous Update:",this.lastSave.dataPanelMetasUpdated)),this.lastSave.acceptUpdates=a,this.lastSave.dataPanelMetas=i,this.saveQueue.blockingSaveInProgress=!0,this.beforeSaveMessage();var s=Ext.apply({dataPanelMetas:i,accessZoneId:this.accessZoneId},this.baseSaveParams);if(this.isSmartlist&&this.smartListRuleLogic.customMode())if(this.smartListRuleLogic.isCustomLogicValid()){var r=this.smartListRuleLogic.getSmartListLogicSaveParams();Ext.apply(s,r)}else console.debug("Data panel save successful. Custom rule logic is not valid");s[this.appVarsBase+"Id"]=this.dataPanelStorageId,this.beforeSaveHook(),DPDEBUG&&console.debug("Saving... ",s),MktSession.ajaxRequest(this.saveAction,{serializeParms:s,onMySuccess:this.saveSuccess.createDelegate(this),onMyFailure:this.saveFailure.createDelegate(this)})}}},APP.overrideSmartCampaignCanvas=function(){console.log("Marketo App > Overriding: Smart Campaign Canvases"),Mkt.widgets.DataPanelLayout.prototype.initComponent=function(){if(1==MktCanvas.getActiveTab().config.accessZoneId&&(console.log("Marketo App > Enabling: Smart Campaign Canvases"),this.dpEditable=!0),DPDEBUG=!1,this.dpSubtype&&this.addClass("mktDataPanelLayout-"+this.dpSubtype),this.canvas&&MktCanvas.mask(this.canvas),"Smartlist"==this.dpType?(this.isSmartlist=!0,this.Flow=!1,this.SETTINGS="conditions"):"Flow"==this.dpType&&(this.isSmartlist=!1,this.isFlow=!0,this.SETTINGS="actions"),this.items=[],this.items.push({region:"center",margins:MktPage.isFeatureEnabled("carbolt")?"":"7 5 10 10",layout:"fit",items:this.createManager()}),this.dpEditable&&this.canvas&&this.paletteWidth>0){this.canvasWidth=MktCanvas.getWidth();var e=Math.min(this.canvasWidth-700,this.maxPaletteWidth);this.paletteWidth=Math.max(this.paletteWidth,e),this.items.push({cls:"mktEastPanel",region:"east",margins:MktPage.isFeatureEnabled("carbolt")?"0 0 0 15":"5 5 5 8",layout:"fit",width:this.paletteWidth,items:this.createPalette()})}Mkt.widgets.DataPanelLayout.superclass.initComponent.apply(this),this.canvas&&MktPage.canvasCleanupStack.push(this.canvasCleanup.createDelegate(this)),this.canvas&&this.extendCanvasToolbar(),this.canvas&&this.extendCanvasGutter(),this.canvas&&MktCanvas.addHook(this.canvas,{dp:this})}},APP.overrideUpdatePortletOrder=function(){console.log("Marketo App > Overriding: Updating of Portlet Order"),Mkt.apps.localasset.LocalAssetPortal.prototype.updatePortletOrder=function(e){var t=MktCanvas.getActiveTab(),a=APP.evaluateMenu("button",null,t,null);if(a)console.log("Marketo App > Disabling: Updating of Portlet Order");else{for(var o=[],i=0;i<this.items.length;i++){var s=this.items.get(i).smartCampaignMetaData;o.push(s.compTypeId+":"+s.compId)}var r={compId:this.programId,portletOrdering:Ext.encode(o)};MktSession.ajaxRequest("marketingEvent/orderLocalAssetPortlets",{serializeParms:r,localAssetManager:this,portletOrdering:o,onMySuccess:this.updatePortletOrderSuccess})}}},APP.discardLandingPageDrafts=function(e){console.log("Marketo App > Discarding: Landing Page Drafts");var t=Ext.MessageBox.show({title:"MarketoLive",msg:"Discarding Landing Page Drafts",progress:!1,wait:!1,width:270,closable:!1});mktLPLManager.doModifyPages("revert",e),t.hide()},APP.discardEmailDrafts=function(e){console.log("Marketo App > Discarding: Email Drafts");var t=Ext.MessageBox.show({title:"MarketoLive",msg:"Discarding Email Drafts",progress:!1,wait:!1,width:270,closable:!1});mktEmManager.discardDraft(e),t.hide()},APP.discardFormPushDrafts=function(e,t){console.log("Marketo App > Discarding: "+e+" Drafts");var a=Ext4.getStore(e);MktMessage.showSystemError;MktMessage.showSystemError=Ext4.emptyFn,"undefined"!=typeof Mkt3&&(a||(a=Ext4.create("Mkt3.store."+e,{storeId:e})),a.load({filters:[{property:"id",value:t}],callback:function(e){for(var t=0;t<e.length;t++){var a=e[t];a.discard(function(e){e&&a.updateNode()},this)}}}))},APP.overrideTreeNodeExpand=function(){console.log("Marketo App > Overriding: Tree Node Expand"),MktAsyncTreeNode.prototype.expand=function(){console.log("Marketo App > Executing: Tree Node Expand");var t,e=this.attributes;if(this.text==userWorkspaceName||this.parentNode.text==userWorkspaceName&&1==this.attributes.system||null!=this.parentNode.parentNode&&this.parentNode.parentNode.text==userWorkspaceName&&1==this.attributes.system){var o,a=MktPage.userid.toLowerCase();for(o=-1!=a.search(".demo@marketo.com$")?a.split(".demo")[0]:a.split("@")[0],t=0;t<this.childNodes.length;t++)0==this.childNodes[t].attributes.system&&this.childNodes[t].text.toLowerCase()!==o&&(this.childNodes[t].hidden=!0)}e.folder&&(e.cancelFirstExpand?delete this.attributes.cancelFirstExpand:this.childNodes&&this.childNodes.length>0&&!e.mktExpanded&&this.text!=userWorkspaceName&&this.parentNode.text!=userWorkspaceName&&null!=this.parentNode.parentNode&&this.parentNode.parentNode.text!=userWorkspaceName&&(console.log("Marketo App > Saving: Folder Expand State"),MktFolder.saveExpandState(this,!0))),MktAsyncTreeNode.superclass.expand.apply(this,arguments),e.mktExpanded=!0}},APP.overrideTreeNodeCollapse=function(){console.log("Marketo App > Overriding: Tree Node Collapse"),MktAsyncTreeNode.prototype.collapse=function(){console.log("Marketo App > Executing: Tree Node Collapse");var t,e=this.attributes;if(this.text==userWorkspaceName||this.parentNode.text==userWorkspaceName&&1==this.attributes.system||null!=this.parentNode.parentNode&&this.parentNode.parentNode.text==userWorkspaceName&&1==this.attributes.system){var o,a=MktPage.userid.toLowerCase();for(o=-1!=a.search(".demo@marketo.com$")?a.split(".demo")[0]:a.split("@")[0],t=0;t<this.childNodes.length;t++)0==this.childNodes[t].attributes.system&&this.childNodes[t].text.toLowerCase()!==o&&(this.childNodes[t].ui.elNode.hidden=!0)}e.suppressAjaxCollapse?delete this.attributes.suppressAjaxCollapse:isDefined(e.folder)&&e.folder&&e.mktExpanded===!0&&MktFolder.saveExpandState(this,!1),MktTreeNode.superclass.collapse.apply(this,arguments),e.mktExpanded=!1}},APP.overrideNewProgramCreate=function(){console.log("Marketo App > Overriding: New Program/Segmentation Creation"),Mkt.widgets.ModalForm.prototype.okButtonHandler=function(){if(console.log("Marketo App > Executing: New Program/Segmentation Creation"),"New Program"==this.title||"New Segmentation"==this.title){var t,a,e=MktPage.userid.toLowerCase();if(t=-1!=e.search(".demo@marketo.com$")?e.split(".demo")[0]:e.split("@")[0],"New Program"==this.title)if("Name"==this.getInputItems()[1].fieldLabel)-1==this.getInputItems()[1].getValue().toLowerCase().search(t+"$")&&this.getInputItems()[1].setValue(this.getInputItems()[1].getValue()+" - "+t);else for(a=0;a<this.getInputItems().length;a++)"Name"==this.getInputItems()[a].fieldLabel&&-1==this.getInputItems()[a].getValue().toLowerCase().search(t+"$")&&this.getInputItems()[a].setValue(this.getInputItems()[a].getValue()+" - "+t);else if("New Segmentation"==this.title)if("Name"==this.findByType("textfield")[0].fieldLabel)-1==this.findByType("textfield")[0].getValue().toLowerCase().search(t+"$")&&this.findByType("textfield")[0].setValue(this.findByType("textfield")[0].getValue()+" - "+t);else for(a=0;a<this.findByType("textfield").length;a++)"Name"==this.findByType("textfield")[a].fieldLabel&&-1==this.findByType("textfield")[a].getValue().toLowerCase().search(t+"$")&&this.findByType("textfield")[a].setValue(this.findByType("textfield")[a].getValue()+" - "+t)}if(!this.submitInProgress&&this.beforeSubmitCallback()!==!1&&(this.okCallback&&isFunction(this.okCallback)&&this.okCallback(),this.submitUrl)){this.showProgressModal?(this.hide(),this.progressModal=Ext.MessageBox.show({title:MktLang.getStr("ModalForm.Please_wait"),msg:this.progressMsg,progress:!0,wait:!0,width:200,closable:!1})):MktSession.clockCursor(),this.submitInProgress=!0,this.enableOkCancelButton(!this.submitInProgress),this.serializeJSON&&(this.serializeParms=this.serializeParms||{},this.serializeParms._json=Ext.encode(this.serializeJSON));var o=Ext.apply({},this.serializeParms,this.baseParams);MktSession.ajaxRequest(this.submitUrl,{serializeParms:o,onMySuccess:this.submitSuccessHandler.createDelegate(this),onMyFailure:this.submitFailedHandler.createDelegate(this)})}}},APP.overrideAssetSaveEdit=function(){console.log("Marketo App > Overriding: Asset Save Edit"),Mkt.widgets.CanvasHeader.prototype.saveEdit=function(){if(console.log("Marketo App > Executing: Asset Save Edit"),null!=MktCanvas&&null!=MktCanvas.getActiveTab()&&null!=MktCanvas.getActiveTab().config&&null!=MktCanvas.getActiveTab().config.accessZoneId&&1!=MktCanvas.getActiveTab().config.accessZoneId&&MktCanvas.getActiveTab().config.accessZoneId!=mktoJapaneseWorkspaceId){var e=!1;if(-1!=MktExplorer.getEl().dom.ownerDocument.title.search("Marketing Activities")&&("mpTEName"==this.titleId||"cdhTEName"==this.titleId||"pname"==this.titleId)||-1==MktExplorer.getEl().dom.ownerDocument.title.search("Marketing Activities")){var a,t=MktPage.userid.toLowerCase();a=-1!=t.search(".demo@marketo.com$")?t.split(".demo")[0]:t.split("@")[0],MktCanvas.getActiveTab().config.accessZoneId==mktoMarketingWorkspaceId&&"pname"==this.titleId&&this.titleValue==a&&(e=!0),-1==this.getTitleField().getValue().toLowerCase().search(a+"$")&&this.getTitleField().setValue(this.getTitleField().getValue()+" - "+a)}if(e){var i=!1;MktSession.clockCursor(!0),this.getTitleField().setValue(this.titleValue);var s=MktCanvas.getActiveTab(),r=null;if(s.config.expNodeId){var n=MktExplorer.getNodeById(s.config.expNodeId);if(n&&n.attributes.compType){var l=n.attributes.compType;"Marketing Program"==l&&(r=s.config.expNodeId),"Image"==l&&(i=!1)}}var d=this.getEl(),c=this,g=this.formPanel,p=this.viewPanel;g.hide(!0,.2),p.show(!0,.2),p.body.update(c.viewTemplate.apply(c)),d.animate({height:{from:this.getHeight(),to:this.origHeight}},.25,function(){c.setHeight(c.origHeight),c.body.setHeight(c.origHeight),isFunction(c.savedCallback)&&c.savedCallback()}),MktSession.unclockCursor(),this._saveInProgress=!1}else{var i=!0;MktSession.clockCursor(!0),this.serializeParms[this.titleId]=this.getTitleField().getValue(),this.serializeParms[this.descId]=this.getDescField().getValue(),this.newTitleValue=MktPage.isFeatureEnabled("treeEncoding")?this.serializeParms[this.titleId]:Ext.util.Format.htmlEncode(this.serializeParms[this.titleId]),this.newDescValue=Ext.util.Format.htmlEncode(this.serializeParms[this.descId]),this.updateCanvasConfig(),this.prevTitleValue=this.titleValue,this.titleValue=this.newTitleValue,this.descValue=this.newDescValue,MktPage.updateFullTitle();var s=MktCanvas.getActiveTab();s.updateTabTitle(this.titleValue);var r=null;if(s.config.expNodeId){var n=MktExplorer.getNodeById(s.config.expNodeId);if(n&&n.attributes.compType){var l=n.attributes.compType;"Marketing Program"==l&&(r=s.config.expNodeId,MktExplorer.lockSubTree(r)),"Image"==l&&(i=!1)}i&&MktExplorer.updateNodeText(s.config.expNodeId,this.titleValue)}var d=this.getEl(),c=this,g=this.formPanel,p=this.viewPanel;g.hide(!0,.2),p.show(!0,.2),p.body.update(c.viewTemplate.apply(c)),d.animate({height:{from:this.getHeight(),to:this.origHeight}},.25,function(){c.setHeight(c.origHeight),c.body.setHeight(c.origHeight),isFunction(c.savedCallback)&&c.savedCallback()}),MktSession.unclockCursor(),this._saveInProgress=!0,MktSession.ajaxRequest(this.actionUrl,{serializeParms:this.serializeParms,containerId:this.id,onMySuccess:this.saveResponse.createDelegate(this,[r],!0),onMyError:this.saveError.createDelegate(this,[r])})}}if(null!=MktCanvas&&null!=MktCanvas.getActiveTab()&&null!=MktCanvas.getActiveTab().config&&null!=MktCanvas.getActiveTab().config.accessZoneId&&(1==MktCanvas.getActiveTab().config.accessZoneId||MktCanvas.getActiveTab().config.accessZoneId==mktoJapaneseWorkspaceId)){var i=!1;MktSession.clockCursor(!0),this.getTitleField().setValue(this.titleValue);var s=MktCanvas.getActiveTab(),r=null;if(s.config.expNodeId){var n=MktExplorer.getNodeById(s.config.expNodeId);if(n&&n.attributes.compType){var l=n.attributes.compType;"Marketing Program"==l&&(r=s.config.expNodeId),"Image"==l&&(i=!1)}}var d=this.getEl(),c=this,g=this.formPanel,p=this.viewPanel;g.hide(!0,.2),p.show(!0,.2),p.body.update(c.viewTemplate.apply(c)),d.animate({height:{from:this.getHeight(),to:this.origHeight}},.25,function(){c.setHeight(c.origHeight),c.body.setHeight(c.origHeight),isFunction(c.savedCallback)&&c.savedCallback()}),MktSession.unclockCursor(),this._saveInProgress=!1}}},APP.overrideNewAssetCreate=function(){console.log("Marketo App > Overriding: New Asset Creation"),Mkt3.controller.lib.AbstractModalForm.prototype.onSubmit=function(e){if(console.log("Marketo App > Executing: New Asset Creation"),(null==e||null==e.ownerAsset||null==e.ownerAsset.isOneOfProgramTypes||0==e.ownerAsset.isOneOfProgramTypes())&&null!=this&&null!=this.getField("name")&&null!=this.getField("name").getValue()){var o,t=this.getField("name").getValue(),a=MktPage.userid.toLowerCase();o=-1!=a.search(".demo@marketo.com$")?a.split(".demo")[0]:a.split("@")[0],-1==t.toLowerCase().search(o+"$")&&this.getField("name").setValue(t+" - "+o)}e=e.isXType("modalForm")?e:e.up("modalForm"),e.setSubmitting(!0),this.validate(e)?this.application.fireEvent(this.widgetId+"BeforeSubmit",e?e.getRecord():null)!==!1?this.submit(e)!==!1&&this.submitComplete(e):e.setSubmitting(!1):(e.showDefaultMessage(),e.setSubmitting(!1))}},APP.overrideNewFolders=function(){console.log("Marketo App > Overriding: New Folders"),MktMa.newProgramFolderSubmit=function(e,t,a){console.log("Marketo App > Executing: New Folders in Marketing Activities"),MktSession.clockCursor(!0);var i,o=MktPage.userid.toLowerCase(),s={};i=-1!=o.search(".demo@marketo.com$")?o.split(".demo")[0]:o.split("@")[0],(-1!=this.currNode.parentNode.attributes.compType.search("Folder$")&&-1==e.toLowerCase().search(i+"$")||e==i)&&(e=e+" - "+i),s.text=e,s.parentId=t,s.tempNodeId=a,MktSession.ajaxRequest("explorer/createProgramFolder",{serializeParms:s,onMySuccess:MktMa.newProgramFolderDone,onMyFailure:function(e){var t=MktExplorer.getNodeById(e);t&&t.remove()}.createDelegate(this,[a])}),MktMa.currNode&&MktMa.currNode.unselect()},MktFolder.newFolderSubmit=function(e,t,a){console.log("Marketo App > Executing: New Folders"),MktSession.clockCursor(!0);var i,o=MktPage.userid.toLowerCase(),s={};i=-1!=o.search(".demo@marketo.com$")?o.split(".demo")[0]:o.split("@")[0],(-1==e.toLowerCase().search(i+"$")||e==i)&&(e=e+" - "+i),s.text=e,s.parentNodeId=t,s.tempNodeId=a,MktSession.ajaxRequest("folder/createFolderSubmit",{serializeParms:s,onMySuccess:MktFolder.newFolderSubmitDone.createDelegate(this,[a]),onMyFailure:function(e){var t=MktExplorer.getNodeById(e);t&&t.remove()}.createDelegate(this,[a])})}},APP.overrideRenamingFolders=function(){console.log("Marketo App > Overriding: Renaming Folders"),MktMa.renameProgramFolderSubmit=function(e,t,a){console.log("Marketo App > Executing: Renaming Folders in Marketing Activities"),MktSession.clockCursor(!0);var s,o=MktPage.userid.toLowerCase(),i=MktExplorer.getNodeById(a),r={};s=-1!=o.search(".demo@marketo.com$")?o.split(".demo")[0]:o.split("@")[0],t==s&&1==this.currNode.parentNode.attributes.system&&this.currNode.attributes.accessZoneId==mktoMarketingWorkspaceId?(i&&i.setText(t),MktSession.unclockCursor()):((-1==(-1!=this.currNode.parentNode.attributes.compType.search("Folder$")&&e.toLowerCase().search(s+"$"))||e==s)&&(e=e+" - "+s,i&&i.setText(e)),r.origProgramName=t,r.newProgramName=e,r.folderId=a,MktSession.ajaxRequest("explorer/renameProgramFolder",{serializeParms:r,onMySuccess:MktMa.renameProgramFolderSubmitDone,onMyFailure:function(e,t){var a=MktExplorer.getNodeById(e);a&&a.setText(t)}.createDelegate(this,[a,t])}))},MktFolder.renameFolderSubmit=function(e,t,a){console.log("Marketo App > Executing: Renaming Folders"),MktSession.clockCursor(!0);var i,o=MktPage.userid.toLowerCase(),s={};i=-1!=o.search(".demo@marketo.com$")?o.split(".demo")[0]:o.split("@")[0],t==i&&1==this.currNode.parentNode.attributes.system&&this.currNode.attributes.accessZoneId==mktoMarketingWorkspaceId?(MktFolder.currNode.setText(t),MktSession.unclockCursor()):((-1==e.toLowerCase().search(i+"$")||e==i)&&(e=e+" - "+i,MktFolder.currNode.setText(e)),s.text=e,s.nodeId=a,MktSession.ajaxRequest("folder/renameFolderSubmit",{serializeParms:s,onMySuccess:MktFolder.renameFolderSubmitDone.createDelegate({parms:s,startValue:t}),onMyFailure:function(){MktFolder.currNode.setText(t)}.createDelegate(this)}))}},APP.hideFoldersOnImport=function(){console.log("Marketo App > Hiding: Folders On Program Import via Override"),Ext.form.ComboBox.prototype.onTriggerClick=function(){if(!this.readOnly&&!this.disabled)if(this.isExpanded())this.collapse(),this.el.focus();else{if(this.onFocus({}),"all"==this.triggerAction){if(this.doQuery(this.allQuery,!0),null!=this&&null!=this.label&&null!=this.label.dom&&null!=this.label.dom.textContent&&"Campaign Folder:"==this.label.dom.textContent&&null!=MktCanvas&&null!=MktCanvas.getActiveTab()&&null!=MktCanvas.getActiveTab().config&&null!=MktCanvas.getActiveTab().config.accessZoneId&&MktCanvas.getActiveTab().config.accessZoneId==mktoMarketingWorkspaceId){var t,a,e=MktPage.userid.toLowerCase();for(t=-1!=e.search(".demo@marketo.com$")?e.split(".demo")[0]:e.split("@")[0],a=0;a<this.view.all.elements.length;a++)this.view.all.elements[a].textContent.toLowerCase()!=t&&(this.view.all.elements[a].hidden=!0)}}else this.doQuery(this.getRawValue());this.el.focus()}}},APP.hidePageGrid=function(){console.log("Marketo App > Hiding: Page Grid via Override"),MktGrids.CanvasGridPanel.prototype.loadPagedGrid=function(){if(MktCanvas.getActiveTab().config.accessZoneId==mktoMarketingWorkspaceId)switch(this.canvas){case"landingCanvasLP":this.hide();break;case"landingCanvasFO":this.hide();break;case"landingCanvasEM":this.hide();break;case"landingCanvasSnippet":this.hide();break;case"landingCanvasIM":this.hide();break;case"ldbCanvasLeadList":this.hide();break;case"campaignCanvasDetailActivityLog":this.hide();break;case"atxCanvasDetailView":}this.store.load({params:{start:0,query:this.query}})}},APP.disableButtons=function(){console.log("Marketo App > Disabling: Buttons"),$jQ=jQuery.noConflict(),$jQ(".mktButtonPositive").remove()},APP.evaluateMoveItem=function(e,t){console.log("Marketo App > Evaluating: Move Item");var a,o,i,s,r=MktPage.userid.toLowerCase();if(o=-1!=r.search(".demo@marketo.com$")?r.split(".demo")[0]:r.split("@")[0],e.attributes&&(1==e.attributes.accessZoneId||e.attributes.accessZoneId==mktoJapaneseWorkspaceId)||t.attributes&&(1==t.attributes.accessZoneId||t.attributes.accessZoneId==mktoJapaneseWorkspaceId))return!1;if(e.attributes.accessZoneId==mktoMarketingWorkspaceId&&t.attributes.accessZoneId==mktoMarketingWorkspaceId){for(i=e,s=i.getDepth(),a=0;s>a;a++){if(i.text==o){for(i=t,s=i.getDepth(),a=0;s>a;a++){if(i.text==o)return!0;i=i.parentNode}return!1}i=i.parentNode}return!1}if(e.attributes.accessZoneId==mktoMarketingWorkspaceId){for(i=e,s=i.getDepth(),a=0;s>a;a++){if(i.text==o)return!0;i=i.parentNode}return!1}if(t.attributes.accessZoneId==mktoMarketingWorkspaceId){for(i=t,s=i.getDepth(),a=0;s>a;a++){if(i.text==o)return!0;i=i.parentNode}return!1}return!0},APP.disableDragAndDrop=function(){console.log("Marketo App > Disabling: Tree Node Drop"),Ext.tree.TreeDropZone.prototype.processDrop=function(e,t,a,o,i,s){if(console.log("Marketo App > Executing: Tree Node Drop"),APP.evaluateMoveItem(s,e)){var r={tree:this.tree,target:e,data:t,point:a,source:o,rawEvent:i,dropNode:s,cancel:!s,dropStatus:!1},n=this.tree.fireEvent("beforenodedrop",r);return n!==!1&&r.cancel!==!0&&r.dropNode?(e=r.target,"append"!=a||e.isExpanded()?this.completeDrop(r):e.expand(!1,null,function(){this.completeDrop(r)}.createDelegate(this)),!0):(e.ui.endDrop(),r.dropStatus)}return!1}},APP.evaluateMenu=function(e,t,a,o){console.log("Marketo App > Evaluating: Menu");var i,s=!1,r=MktPage.userid.toLowerCase();switch(i=-1!=r.search(".demo@marketo.com$")?r.split(".demo")[0]:r.split("@")[0],e){case"tree":if(t&&t.currNode&&t.currNode.attributes&&(1==t.currNode.attributes.accessZoneId||t.currNode.attributes.accessZoneId==mktoJapaneseWorkspaceId||t.currNode.attributes.accessZoneId==mktoMarketingWorkspaceId)){
if(s=!0,t.currNode.attributes.accessZoneId==mktoMarketingWorkspaceId){var n,l=t.currNode,d=l.getDepth();for(n=0;d>n;n++){if(l.attributes.text==i){s=!1;break}l=l.parentNode}}}else if((!t||!t.currNode||!t.currNode.attributes||!t.currNode.attributes.accessZoneId)&&a&&a.config&&(1==a.config.accessZoneId||a.config.accessZoneId==mktoJapaneseWorkspaceId||a.config.accessZoneId==mktoMarketingWorkspaceId&&(a.config.expNodeId&&MktExplorer.getNodeById(a.config.expNodeId)||a.config.dlZoneFolderId&&MktExplorer.getNodeById(a.config.dlZoneFolderId)))&&(s=!0,a.config.accessZoneId==mktoMarketingWorkspaceId)){var n,l,d;for(l=a.config.expNodeId?MktExplorer.getNodeById(a.config.expNodeId):MktExplorer.getNodeById(a.config.dlZoneFolderId),d=l.getDepth(),n=0;d>n;n++){if(l.attributes.text==i){s=!1;break}l=l.parentNode}}return s;case"button":if(a&&a.config&&(1==a.config.accessZoneId||a.config.accessZoneId==mktoJapaneseWorkspaceId||a.config.accessZoneId==mktoMarketingWorkspaceId&&(a.config.expNodeId&&MktExplorer.getNodeById(a.config.expNodeId)||a.config.dlZoneFolderId&&MktExplorer.getNodeById(a.config.dlZoneFolderId)))&&(s=!0,a.config.accessZoneId==mktoMarketingWorkspaceId)){var n,l,d;for(l=a.config.expNodeId?MktExplorer.getNodeById(a.config.expNodeId):MktExplorer.getNodeById(a.config.dlZoneFolderId),d=l.getDepth(),n=0;d>n;n++){if(l.attributes.text==i){s=!1;break}l=l.parentNode}}return s;case"socialAppToolbar":if((o.getSocialApp()&&(1==o.getSocialApp().get("zoneId")||o.getSocialApp().get("zoneId")==mktoJapaneseWorkspaceId)||o.getSocialApp().get("zoneId")==mktoMarketingWorkspaceId&&o.getSocialApp().getNodeJson()&&o.getSocialApp().getNodeJson().id&&MktExplorer.getNodeById(o.getSocialApp().getNodeJson().id))&&(s=!0,o.getSocialApp().get("zoneId")==mktoMarketingWorkspaceId)){var n,l=MktExplorer.getNodeById(o.getSocialApp().getNodeJson().id),d=l.getDepth();for(n=0;d>n;n++){if(l.attributes.text==i){s=!1;break}l=l.parentNode}}return s;case"mobilePushNotification":if((o.getMobilePushNotification()&&(1==o.getMobilePushNotification().get("zoneId")||o.getMobilePushNotification().get("zoneId")==mktoJapaneseWorkspaceId)||o.getMobilePushNotification().get("zoneId")==mktoMarketingWorkspaceId&&o.getMobilePushNotification().getNodeJson()&&o.getMobilePushNotification().getNodeJson().id&&MktExplorer.getNodeById(o.getMobilePushNotification().getNodeJson().id))&&(s=!0,o.getMobilePushNotification().get("zoneId")==mktoMarketingWorkspaceId)){var n,l=MktExplorer.getNodeById(o.getMobilePushNotification().getNodeJson().id),d=l.getDepth();for(n=0;d>n;n++){if(l.attributes.text==i){s=!1;break}l=l.parentNode}}return s;default:return!0}},APP.disableMenus=function(){console.log("Marketo App > Disabling: Menus"),Ext.menu.Menu.prototype.showAt=function(e,t){if(console.log("Marketo App > Executing: Disabling Actions and Right-click menus for ALL in ALL"),this.fireEvent("beforeshow",this)!==!1){var a,o=this.items,i=MktCanvas.getActiveTab(),s=["formApprove","formClone","formDelete","formMove","formDraftApprove","pageApprove","pageUnapprove","pageConvertToTestGroup","pageClone","pageDelete","pageMove","pageDraftApprove","emailApprove","emailUnapprove","emailClone","emailDelete","emailMove","emailNewTest","emailDraftApprove","emailApproveTest","importList","cloneSmartlist","cloneList","deleteList","showSupportHistory","showSupportUsagePerf","showSmartListProcessorDiag","showSmartListProcessorOverride","cloneReport_atxCanvasOverview","deleteReport","cloneReport","deleteReport","moveReport","blackCatDiag","mergeLeads","sendEmail","sendPushNotification","addToList","removeFromList","interestingMoment","sendAlert","changeScore","changeDataValue","changeStatusInProgression","addToNurture","changeNurtureCadence","changeNurtureTrack","changeLeadPartition","changeRevenueStage","deleteLead","giveCreditToReferrer","requestCampaign","removeFromFlow","pushLeadToSFDC","createTask","convertLead","changeOwner","deleteLeadFromSFDC","addToSFDCCampaign","changeStatusInSFDCCampaign","removeFromSFDCCampaign","deleteItem","createProgramFolder","newSmartCampaign","createNewMarketingProgram","importProgram","entryRescheduleEntries","sfdcCampaignSync","cloneMarketingProgram","deleteMarketingProgram","eventSchedule","entryRescheduleEntries","webinarSettings","sfdcCampaignSync","cloneMarketingEvent","deleteMarketingEvent","refreshFromWebinarProvider","sfdcCampaignSync","cloneNurtureProgram","deleteNurtureProgram","testNurtureProgram","newSmartCampaign","createNewMarketingProgram","newLocalAsset","createProgramFolder","renameProgramFolder","deleteProgramFolder","convertToArchiveFolder","convertToCampaignFolder","scClone","scArchive","scMove","cloneMarketingProgram","deleteMarketingProgram","cloneMarketingEvent","deleteMarketingEvent","cloneNurtureProgram","deleteNurtureProgram","cloneEmailBatchProgram","deleteEmailBatchProgram","cloneInAppProgram","deleteInAppProgram","shareProgramFolder","scActivate","scAbort","scCampChangeHistory","scCampRunHistory","scClearPalette","scClearSmartList","scClearFlow","progGenerateRef","checkForCorruptEmails","socialAppApprove","socialAppClone","socialAppDelete","socialAppDraftApprove","pushNotificationUnapprove","pushNotificationApprove","pushNotificationClone","pushNotificationDelete","pushNotificationDraftApprove","Not in ProgramStatusMarketingEvent","SentStatusMarketingEvent","VisitedStatusMarketingEvent","EngagedStatusMarketingEvent","deleteCustomToken","newLandingPage","newTestGroup","newPageTemplate","pageTemplateImport","newForm","newVideoShare","newShareButton","newReferralOffer","newEmail","newEmailTemplate","newSnippet","uploadImage","share","createFolder","renameFolder","deleteFolder","convertToArchiveFolder","convertToFolder","approvePageTemplate","unapprovePageTemplate","clonePageTemplate","pageTemplateDelete","approveDraftPageTemplate","emailTemplateApprove","emailTemplateUnapprove","emailTemplateClone","emailTemplateDelete","emailTemplateDraftApprove","snippetApprove","snippetUnapprove","snippetClone","snippetDelete","snippetDraftApprove","uploadImage","imageDelete","replaceImage","newSmartList","newList","newSegmentation","importList","newLead","newDataMgr","newSegmentation","newSmartList","share","createFolder","renameFolder","deleteFolder","convertToArchiveFolder","convertToFolder","createDraftSegmentation","approveSegmentation","unapproveSegmentation","deleteSegmentation","refreshSegmentation","approveDraftSegmentation","newRcm_atxCanvasOverview","newRcm_rcmCanvasOverview","newRcm_atxCanvasSubscriptions","newRcm","share","createFolder","renameFolder","deleteFolder","convertToArchiveFolder","convertToFolder","newReport_atxCanvasOverview","cloneReport_atxCanvasOverview","deleteReport","cloneReport","deleteReport","cloneReport","deleteReport","moveReport","rcmApproveStages","rcmUnapproveStages","rcmApprove","rcmUnapprove","rcmClone","rcmDelete","rcmApproveDraft","rcmAassignmentRules"];if(a="tree"!=this.triggeredFrom&&"button"!=this.triggeredFrom?APP.evaluateMenu("tree",this,i,null):"leadDbListMenu"==this.id||"segmentationMenu"==this.id?APP.evaluateMenu("tree",this,i,null):APP.evaluateMenu(this.triggeredFrom,this,i,null),s.forEach(function(e){var t=o.get(e);t&&t.setDisabled(a)}),this.ownerCt&&-1!=this.ownerCt.text.search("^View:")){var r;for(r=0;r<this.items.items.length;r++)switch(this.items.items[r].text){case"Create View":this.items.items[r].setDisabled(!0);break;case"Edit Default":this.items.items[r].setDisabled(!0)}}this.parentMenu=t,this.el||this.render(),this.enableScrolling?(this.el.setXY(e),e[1]=this.constrainScroll(e[1]),e=[this.el.adjustForConstraints(e)[0],e[1]]):e=this.el.adjustForConstraints(e),this.el.setXY(e),this.el.show(),Ext.menu.Menu.superclass.onShow.call(this),Ext.isIE&&(this.fireEvent("autosize",this),Ext.isIE8||this.el.repaint()),this.hidden=!1,this.focus(),this.fireEvent("show",this)}};var e=Mkt3.controller.socialApp.SocialApp.prototype.loadToolbar;Mkt3.controller.socialApp.SocialApp.prototype.loadToolbar=function(t,a){console.log("Marketo App > Executing: Disabling Actions menu for Social Apps in Marketing Activities"),e.apply(this,arguments);var o=APP.evaluateMenu("socialAppToolbar",null,null,this),i=Ext4.ComponentQuery.query("socialAppToolbar contextMenu [action=approve],socialAppToolbar contextMenu [action=clone],socialAppToolbar contextMenu [action=delete],socialAppToolbar contextMenu [action=approveDraft],");return i.forEach(function(e){e&&e.setDisabled(o)}),t};var t=Mkt3.controller.mobilePushNotification.MobilePushNotification.prototype.loadToolbar;Mkt3.controller.mobilePushNotification.MobilePushNotification.prototype.loadToolbar=function(e,a){console.log("Marketo App > Executing: Disabling Actions menu for Push Notifications in Marketing Activities"),t.apply(this,arguments);var o=APP.evaluateMenu("mobilePushNotification",null,null,this),i=Ext4.ComponentQuery.query("mobilePushNotification contextMenu [action=approve],mobilePushNotification contextMenu [action=unapprove],mobilePushNotification contextMenu [action=clone],mobilePushNotification contextMenu [action=delete],mobilePushNotification contextMenu [action=approveDraft],");return i.forEach(function(e){e&&e.setDisabled(o)}),e},Ext4.Component.prototype.showAt=function(e,t,a){var o=this;if(o.rendered||!o.autoRender&&!o.floating||(o.doAutoRender(),o.hidden=!0),o.floating?o.setPosition(e,t,a):o.setPagePosition(e,t,a),o.show(),MktCanvas&&MktCanvas.getActiveTab()){var i,s=APP.evaluateMenu("button",null,MktCanvas.getActiveTab(),null);for(i=0;i<o.items.items.length;i++)switch(o.items.items[i].action){case"edit":break;case"clone":o.items.items[i].setDisabled(s);break;case"activateAllContent":break;case"showArchivedContent":break;case"hideArchivedContent":break;case"editTransitionRules":break;case"delete":o.items.items[i].setDisabled(s);break;case"activate":break;case"deactivate":break;case"schedule":break;case"archive":o.items.items[i].setDisabled(s);break;case"unarchive":o.items.items[i].setDisabled(s);break;case"remove":break;case"emailEditDraft":break;case"emailPreview":break;case"emailApproveDraft":o.items.items[i].setDisabled(s);break;case"emailSendTest":break;case"goToEmail":break;case"emailEditDraft":break;case"emailPreviewDraft":break;case"emailSendTestOfDraft":break;case"emailApproveDraft":o.items.items[i].setDisabled(s);break;case"programViewAssets":break;case"programViewSetup":break;case"programViewTokens":break;case"programViewMembers":break;case"goToProgram":break;case"mobilePushEditDraft":break;case"mobilePushPreview":break;case"mobilePushApprove":o.items.items[i].setDisabled(s);break;case"mobilePushSendTest":break;case"goToPushNotification":}}}},APP.hideToolbarItems=function(){console.log("Marketo App > Hiding: Toolbar Items"),Ext.layout.ContainerLayout.prototype.renderItem=function(e,t,a){if(e&&e.topToolbar&&e.topToolbar.items){console.log("Marketo App > Executing: Disabling Toolbar items for ALL in ALL");var i=(this.items,MktCanvas.getActiveTab()),s=!APP.evaluateMenu("button",null,i,null),r=["deleteItem","gotoDeliverability_landingEMDetail","deleteCustomToken","importMembers","importTemplate_landingCanvasTM","importTemplate_landingTMDetail","gotoDeliverability_landingCanvasEM","imageUpload_landingCanvasIM","imageReplace_landingCanvasIM"];r.forEach(function(t){var a=e.topToolbar.items.get(t);a&&("gotoDeliverability_landingEMDetail"==t?a.setVisible(!1):a.setVisible(s))})}e&&(e.rendered?this.isValidParent(e,a)||(Ext.isNumber(t)&&(t=a.dom.childNodes[t]),a.dom.insertBefore(e.getPositionEl().dom,t||null),e.container=a,this.configureItem(e,t)):(e.render(a,t),this.configureItem(e,t)))}},APP.limitNurturePrograms=function(){console.log("Marketo App > Limiting: Nurture Programs");var e=Mkt.apps.marketingEvent.MarketingEventForm.prototype.beforeSubmitCallback;Mkt.apps.marketingEvent.MarketingEventForm.prototype.beforeSubmitCallback=function(){var t=!1,a=MktExplorer.boundTree.root,o="Nurture Program",i=[];a.cascade(function(){var e=this.attributes;e&&e.xtra&&e.xtra.compType==o&&e.xtra.accessZoneId==MktCanvas.getActiveTab().config.accessZoneId&&i.push(this)},void 0,[o]);if(i.length>=3&&(t=!0),1==t){var r=Ext.MessageBox.show({title:"MarketoLive",msg:"Users are limited to 3 nurture programs each.",width:400,closable:!0});return r.show,!1}return e.apply(this,arguments)}},APP.injectAnalyzerNavBar=function(){var e=window.setInterval(function(){if("undefined"!=typeof PODS){console.log("Marketo App > Injecting: Analyzer Navigation Bar"),window.clearInterval(e),"undefined"==typeof pod&&(pod=new PODS.Pod(PODS.getCookie("userPod")));for(var t=0;t<pod.valueSet.length;t++)if(currentUrl==pod.valueSet[t].url){console.log("Marketo App > Updating: CSS for Analyzer Navigation Bar"),$j=jQuery.noConflict();var a="#"+pod.valueSet[t].position;$j(a).parent().css("display","block"),$j(a).parent().siblings().css("display","none"),$j(a).removeClass("analyzer-button").addClass("analyzer-title"),$j(a).siblings().removeClass("analyzer-title").addClass("analyzer-button"),$j("#modeler,#success-path-analyzer,#opportunity-influence-analyzer,#program-analyzer").bind("click",function(e){console.log("Marketo App > Identifying: Current Analyzer");for(var t=0;t<pod.valueSet.length;t++)e.target.id==pod.valueSet[t].position&&(a=t);window.location=pod.valueSet[a].url})}}},0)},APP.overrideSaving=function(){console.log("Marketo App > Overriding: Saving for Nurture Streams"),Mkt3.data.Store.prototype.sync=function(){var e;MktCanvas&&MktCanvas.getActiveTab()&&"false"!=APP.getCookie("priv")?e=APP.evaluateMenu("button",null,MktCanvas.getActiveTab(),null):"false"==APP.getCookie("priv")&&(e=!0),e?console.log("Marketo App > Disabling: Saving for Nurture Streams (sync)"):(this.autoSyncSuspended&&(this.autoSync=!0,this.autoSyncSuspended=!1),this.getProxy()instanceof Mkt3.data.proxy.AjaxPost?Mkt3.Synchronizer.sync(this):this.callParent(arguments))},Ext4.data.Model.prototype.destroy=function(e){var t;if(MktCanvas&&MktCanvas.getActiveTab()&&"false"!=APP.getCookie("priv")?t=APP.evaluateMenu("button",null,MktCanvas.getActiveTab(),null):"false"==APP.getCookie("priv")&&(t=!0),!t){e=Ext.apply({records:[this],action:"destroy"},e);var n,l,d,c,g,a=this,o=a.phantom!==!0,i=e.scope||a,s=a.stores,r=0;return c=new Ext.data.Operation(e),g=function(t){if(d=[a,t],t.wasSuccessful()){for(n=s.length;n>r;r++)l=s[r],l.remove(a,!0),o&&l.fireEvent("write",l,t);a.clearListeners(),Ext.callback(e.success,i,d)}else Ext.callback(e.failure,i,d);Ext.callback(e.callback,i,d)},o?a.getProxy().destroy(c,g,a):(c.complete=c.success=!0,c.resultSet=a.getProxy().reader.nullResultSet,g(c)),a}console.log("Marketo App > Disabling: Saving for Nurture Streams (destroy)")}},APP.enableSaving=function(){console.log("Marketo App > Enabling: Saving for Editors & Nurture Streams"),Mkt3.data.Store.prototype.sync=function(){this.autoSyncSuspended&&(this.autoSync=!0,this.autoSyncSuspended=!1),this.getProxy()instanceof Mkt3.data.proxy.AjaxPost?Mkt3.Synchronizer.sync(this):this.callParent(arguments)},Ext4.data.Model.prototype.destroy=function(e){e=Ext.apply({records:[this],action:"destroy"},e);var r,n,l,d,c,t=this,a=t.phantom!==!0,o=e.scope||t,i=t.stores,s=0;return d=new Ext.data.Operation(e),c=function(d){if(l=[t,d],d.wasSuccessful()){for(r=i.length;r>s;s++)n=i[s],n.remove(t,!0),a&&n.fireEvent("write",n,d);t.clearListeners(),Ext.callback(e.success,o,l)}else Ext.callback(e.failure,o,l);Ext.callback(e.callback,o,l)},a?t.getProxy().destroy(d,c,t):(d.complete=d.success=!0,d.resultSet=t.getProxy().reader.nullResultSet,c(d)),t}},APP.disableSaving=function(){console.log("Marketo App > Disabling: Saving for Editors"),Mkt3.data.Store.prototype.sync=function(){},Ext4.data.Model.prototype.destroy=function(){},Mkt3.controller.editor.form.settings.FieldSelection.prototype.deleteFormField=function(e){var a,o,i,s,t=e.getFieldWidget();if(t&&"fieldset"===t.get("datatype"))for(s=this.getForm().getFormFields(),a=e.get("id"),o=0;o<s.getCount();o++)i=s.getAt(o),i.get("fieldsetFieldId")==a&&this.deleteFormField(i);e.destroy({scope:this,callback:function(e,a){a.success&&t&&t.destroy()}}),this.renumberWidgets()}},APP.overlayEmailDesigner=function(){console.log("Marketo App > Overlaying: Email Designer");var e=APP.getCookie("logo"),t=APP.getCookie("color");null==e&&(e=defaultTurnerLogoWhite),null==t&&(t=defaultColor);var a=window.setInterval(function(){var t=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("logo-bkg"),o=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("logo-swap-company"),i=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("logo-swap-container"),s=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("logo-swap-company-container");null!=t&&null!=o&&(console.log("Marketo App > Overlaying: iframe"),window.clearInterval(a),i.style.display="none",s.style.display="block",o.src=e)},0)},APP.overlayLandingPageDesigner=function(){console.log("Marketo App > Overlaying: Landing Page Designer");var e=APP.getCookie("logo"),t=APP.getCookie("color");if(null==e)e=defaultTurnerLogoGreen;else var a=e.split("https://logo.clearbit.com/")[1].split(".")[0],o=a.charAt(0).toUpperCase()+a.slice(1);null==t&&(t=defaultColor);var i=window.setInterval(function(){var a=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("lp-logo"),s=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("background-color"),r=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("bigger-background"),n=document.getElementsByTagName("iframe")[0].contentWindow.document.getElementById("sub-title");null!=a&&null!=s&&null!=r&&null!=n&&(console.log("Marketo App > Overlaying: iframe"),window.clearInterval(i),a.src=e,s.style.backgroundColor=t,r.style.backgroundColor=t,n.innerHTML=o+" invites you to join:")},0)},APP.openAdBridgeModal=function(){console.log("Marketo App > Opening Ad Bridge Modal Window"),"button"==document.getElementsByClassName("x-btn-text mkiUserTarget")[0].type&&document.getElementsByClassName("x-btn-text mkiUserTarget")[0].click()},APP.getEmailIds=function(e){console.log("Marketo App > Getting Email Ids for Pod: "+e);var t=[];switch(e){case"app-sjp":t.push(15464),t.push(18113,18106,18111,18110),t.push(10010,10179,10180,12845,10181,10182,10183,10184),t.push(4894,3764,3765,3767,3766,3762),t.push(12818,12820,12819,12816,12811,12815,12812,12813,12814,12821,12817,12823),t.push(12900,12901,12899,12898),t.push(12902,12903,12904),t.push(16474,17254,16403),t.push(18117,18118,18122,18119,18116,18123,18120,18121,18124),t.push(16118,16119,16120,16122,16121,16117),t.push(16331,16332,16338,16333,16123,16339,16335,16336,17868),t.push(16125,16129,16126,16124,16132,16131,16130,16128,16127,16133,16137,16136),t.push(18126);break;case"app-ab07":t.push(14240),t.push(10171,10173,10172,10169,9957,9974,9968,10174,9972,9973,10170,9962),t.push(10010,10179,10180,10181,10182,10183,10184),t.push(4894,3764,3765,3767,3766,3762);break;case"app-ab08":t.push(13924),t.push(12818,12820,12819,12816,12811,12815,12812,12821,12813,12814,12817,12823),t.push(10010,10179,10180,12845,10181,10182,10183,10184),t.push(4894,3764,3765,3767,3766,3762);break;default:console.error("Marketp App > Invalid: User Pod in getEmailIds()")}return t},(-1!=currentUrl.search(mktoAppDomain)||-1!=currentUrl.search(mktoDesignerDomain)||-1!=currentUrl.search(mktoWizard))&&-1==currentUrl.search("#CAL")){console.log("Marketo App > Location: Marketo URL");var isMktPageApp=window.setInterval(function(){if("undefined"!=typeof MktPage){console.log("Marketo App > Location: Marketo Page"),window.clearInterval(isMktPageApp);var e=MktPage.savedState.custPrefix,t=MktPage.userid.toLowerCase(),a=Mkt3.DL.getDlToken();if("mktodemoaccount106"==e||"mktodemoaccount106a"==e||"mktodemoaccount106b"==e){if(console.log("Marketo App > Location: MarketoLive Instance"),window.mkto_live_plugin_state=!0,-1!=t.search("^admin@mktodemoaccount")||-1!=t.search("^mktodemoaccount[a-z0-9]*@marketo.com")||-1!=t.search("^marketodemo.*@gmail.com$")){if(console.log("Marketo App > User: Admin"),APP.disableDemoPluginCheck(),"false"!=APP.getCookie("priv"))return;console.log("Marketo App > User: Admin is now a normal user")}var o=173,i="AR1559A1!",s="AR1544A1!",r="RCM70A1!",n="RCM5A1!",l="AR1682A1!";if(APP.disableDemoPluginCheck(),a==mktoMyMarketoFragment)APP.overrideDeliverabilityToolsTile();else if(a==mktoMarketingActivitiesDefaultFragment||a==mktoMarketingActivitiesMarketingFragment||a==mktoMarketingActivitiesJapaneseFragment||a==mktoLeadDatabaseDefaultFragment||a==mktoLeadDatabaseMarketingFragment||a==mktoLeadDatabaseJapaneseFragment)APP.disableButtons();else if(a==mktoAnalyticsFragment)APP.overrideAnalyticsTiles();else if(a==mktoAdBridgeSmartListFragment)var d=window.setInterval(function(){"undefined"!=typeof document.getElementsByClassName("x-btn-text mkiUserTarget")[0]&&(console.log("Marketo App > Location: Ad Bridge Smart List"),window.clearInterval(d),APP.openAdBridgeModal())},0);if(-1==a.search("^"+mktoEmailDesignerFragment)&&-1==a.search("^"+mktoEmailPreviewFragment)&&-1==a.search("^"+mktoLandingPageDesignerFragment)&&-1==a.search("^"+mktoLandingPagePreviewFragment)&&-1==a.search("^"+mktoFormWizardFragment)&&-1==a.search("^"+mktoMobilePushNotificationWizardFragment)&&-1==a.search("^"+mktoSocialAppWizardFragment)&&-1==a.search("^"+mktoABtestWizardFragment)){APP.overrideTreeNodeExpand(),APP.overrideTreeNodeCollapse(),APP.disableDragAndDrop(),APP.overrideSaving(),APP.disableMenus(),APP.hideToolbarItems(),APP.overrideSmartCampaignSaving(),APP.overrideUpdatePortletOrder(),APP.overrideNewProgramCreate(),APP.overrideAssetSaveEdit(),APP.overrideNewAssetCreate(),APP.overrideNewFolders(),APP.overrideRenamingFolders(),APP.hideFoldersOnImport(),APP.disableConfirmationMessage(),(a==i||a==s||a==r||a==n||a==l)&&(console.log("Marketo App > Location: Analytics"),APP.injectAnalyzerNavBar());var c={},g=[],p=[],u=APP.getEmailIds(APP.getCookie("userPod"));switch(e){case"mktodemoaccount106":c.dpageid_11826="dpageid_11826",c.dpageid_11822="dpageid_11822",c.dpageid_8819="dpageid_8819",c.dpageid_8941="dpageid_8941",c.dpageid_4876="dpageid_4876",c.dpageid_4872="dpageid_4872",c.dpageid_4874="dpageid_4874",c.dpageid_11856="dpageid_11856",c.dpageid_11548="dpageid_11548",c.dpageid_11546="dpageid_11546",c.dpageid_12420="dpageid_12420",c.dpageid_12418="dpageid_12418",c.dpageid_11552="dpageid_11552",c.dpageid_11550="dpageid_11550",c.dpageid_11553="dpageid_11553",c.dpageid_12345="dpageid_12345",c.dpageid_11556="dpageid_11556",g.push(3576,1749,1900),g.push(3018,3708,3020,3021),p.push(29,23),g.push(99,94,103);break;case"mktodemoaccount106a":c.dpageid_10672="dpageid_10672",c.dpageid_10454="dpageid_10454",g.push(2532,1749,1900),p.push(29,26);break;case"mktodemoaccount106b":c.dpageid_10760="dpageid_10768",c.dpageid_10762="dpageid_10762",g.push(2472,1749,1900),p.push(2,1)}var m=window.setInterval(function(){"undefined"!=typeof mktLPLManager&&(window.clearInterval(m),APP.discardLandingPageDrafts(c),APP.discardEmailDrafts(u),APP.discardFormPushDrafts("Form",g),APP.discardFormPushDrafts("MobilePushNotification",p),APP.limitNurturePrograms())},0)}else{if(-1!=a.search("^"+mktoLandingPageDesignerFragment)){console.log("Marketo App > Location: Landing Page Designer");var h="LPE11826",f="LPP11826",k="LPE10672",v="LPP10672",M="LPE10768",P="LPP10768",b={filters:[{property:"id",value:Mkt3.DL.dl.compId}],callback:function(e){e.forEach(function(e){A=e.get("zoneId"),console.log("Marketo App > currAssetZoneId = "+A),(1==A||A==o||"false"==APP.getCookie("priv"))&&APP.disablePropertyPanelSaving()})}};switch(console.log("Callback for Landing Page Editor"),Ext4.getStore("LandingPage").load(b),a){case h:APP.overlayLandingPageDesigner();break;case f:APP.overlayLandingPageDesigner();break;case k:APP.overlayLandingPageDesigner();break;case v:APP.overlayLandingPageDesigner();break;case M:APP.overlayLandingPageDesigner();break;case P:APP.overlayLandingPageDesigner()}return}console.log("Marketo App > Location: Designers/Wizards");var A,N="EME15464",y="EME14240",C="EME13924",S="EME20327",T="EME19059",E="EME20329",I={filters:[{property:"id",value:Mkt3.DL.dl.compId}],callback:function(e){e.forEach(function(e){A=e.get("zoneId"),console.log("Marketo App > currAssetZoneId = "+A),(1==A||A==o||"false"==APP.getCookie("priv"))&&APP.disableSaving()})}};switch(Mkt3.DL.dl.dlCompCode){case mktoEmailDesignerFragment:switch(console.log("Callback for Email Editor"),Ext4.getStore("Email").load(I),a){case N:APP.overlayEmailDesigner();break;case S:APP.overlayEmailDesigner();break;case T:APP.overlayEmailDesigner();break;case E:APP.overlayEmailDesigner();break;case y:APP.overlayEmailDesigner();break;case C:APP.overlayEmailDesigner()}break;case mktoFormWizardFragment:console.log("Callback for Form Editor"),Ext4.getStore("Form").load(I);break;case mktoMobilePushNotificationWizardFragment:console.log("Callback for Push Notification Editor"),Ext4.getStore("MobilePushNotification").load(I);break;case mktoSocialAppWizardFragment:console.log("Callback for Social App Editor"),Ext4.getStore("SocialApp").load(I);break;default:A=-1}}window.onhashchange=function(){console.log("Window: Hash Changed"),currentUrl=window.location.href,a=Mkt3.DL.getDlToken(),a==mktoMyMarketoFragment?APP.overrideDeliverabilityToolsTile():a==mktoMarketingActivitiesDefaultFragment||a==mktoMarketingActivitiesMarketingFragment||a==mktoMarketingActivitiesJapaneseFragment||a==mktoLeadDatabaseDefaultFragment||a==mktoLeadDatabaseMarketingFragment||a==mktoLeadDatabaseJapaneseFragment?APP.disableButtons():a==mktoAnalyticsFragment&&APP.overrideAnalyticsTiles(),-1==a.search("^"+mktoEmailDesignerFragment)&&-1==a.search("^"+mktoEmailPreviewFragment)&&-1==a.search("^"+mktoLandingPageDesignerFragment)&&-1==a.search("^"+mktoLandingPagePreviewFragment)&&-1==a.search("^"+mktoFormWizardFragment)&&-1==a.search("^"+mktoMobilePushNotificationWizardFragment)&&-1==a.search("^"+mktoSocialAppWizardFragment)&&-1==a.search("^"+mktoABtestWizardFragment)&&a!=mktoMyMarketoFragment&&(a==i||a==s||a==r||a==n||a==l)&&(console.log("Marketo App > Location: Analytics"),APP.injectAnalyzerNavBar())}}else APP.overrideDeliverabilityToolsMenuItem(),a==mktoMyMarketoFragment&&APP.overrideDeliverabilityToolsTile(),window.onhashchange=function(){a=Mkt3.DL.getDlToken(),a==mktoMyMarketoFragment&&APP.overrideDeliverabilityToolsTile()};APP.overrideDeliverabilityToolsMenuItem()}},0)}